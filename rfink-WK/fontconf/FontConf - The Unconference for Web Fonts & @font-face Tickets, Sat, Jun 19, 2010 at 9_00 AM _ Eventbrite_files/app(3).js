/**
 * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.
 *
 * @version 1.0.1
 * @codingstandard ftlabs-jsv2
 * @copyright The Financial Times Limited [All Rights Reserved]
 * @license MIT License (see LICENSE.txt)
 */
function FastClick(a,b){"use strict";function c(a,b){return function(){return a.apply(b,arguments)}}var d;if(b=b||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=b.touchBoundary||10,this.layer=a,this.tapDelay=b.tapDelay||200,!FastClick.notNeeded(a)){for(var e=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],f=this,g=0,h=e.length;h>g;g++)f[e[g]]=c(f[e[g]],f);deviceIsAndroid&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(b,c,d){var e=Node.prototype.removeEventListener;"click"===b?e.call(a,b,c.hijacked||c,d):e.call(a,b,c,d)},a.addEventListener=function(b,c,d){var e=Node.prototype.addEventListener;"click"===b?e.call(a,b,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(a,b,c,d)}),"function"==typeof a.onclick&&(d=a.onclick,a.addEventListener("click",function(a){d(a)},!1),a.onclick=null)}}var deviceIsAndroid=navigator.userAgent.indexOf("Android")>0,deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent),deviceIsIOS4=deviceIsIOS&&/OS 4_\d(_\d)?/.test(navigator.userAgent),deviceIsIOSWithBadTarget=deviceIsIOS&&/OS ([6-9]|\d{2})_\d/.test(navigator.userAgent);FastClick.prototype.needsClick=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(deviceIsIOS&&"file"===a.type||a.disabled)return!0;break;case"label":case"video":return!0}return/\bneedsclick\b/.test(a.className)},FastClick.prototype.needsFocus=function(a){"use strict";switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!deviceIsAndroid;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},FastClick.prototype.sendClick=function(a,b){"use strict";var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},FastClick.prototype.determineEventType=function(a){"use strict";return deviceIsAndroid&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},FastClick.prototype.focus=function(a){"use strict";var b;deviceIsIOS&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},FastClick.prototype.updateScrollParent=function(a){"use strict";var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},FastClick.prototype.getTargetElementFromEventTarget=function(a){"use strict";return a.nodeType===Node.TEXT_NODE?a.parentNode:a},FastClick.prototype.onTouchStart=function(a){"use strict";var b,c,d;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],deviceIsIOS){if(d=window.getSelection(),d.rangeCount&&!d.isCollapsed)return!0;if(!deviceIsIOS4){if(c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},FastClick.prototype.touchHasMoved=function(a){"use strict";var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c?!0:!1},FastClick.prototype.onTouchMove=function(a){"use strict";return this.trackingClick?((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0):!0},FastClick.prototype.findControl=function(a){"use strict";return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},FastClick.prototype.onTouchEnd=function(a){"use strict";var b,c,d,e,f,g=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,c=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,deviceIsIOSWithBadTarget&&(f=a.changedTouches[0],g=document.elementFromPoint(f.pageX-window.pageXOffset,f.pageY-window.pageYOffset)||g,g.fastClickScrollParent=this.targetElement.fastClickScrollParent),d=g.tagName.toLowerCase(),"label"===d){if(b=this.findControl(g)){if(this.focus(g),deviceIsAndroid)return!1;g=b}}else if(this.needsFocus(g))return a.timeStamp-c>100||deviceIsIOS&&window.top!==window&&"input"===d?(this.targetElement=null,!1):(this.focus(g),this.sendClick(g,a),deviceIsIOS&&"select"===d||(this.targetElement=null,a.preventDefault()),!1);return deviceIsIOS&&!deviceIsIOS4&&(e=g.fastClickScrollParent,e&&e.fastClickLastScrollTop!==e.scrollTop)?!0:(this.needsClick(g)||(a.preventDefault(),this.sendClick(g,a)),!1)},FastClick.prototype.onTouchCancel=function(){"use strict";this.trackingClick=!1,this.targetElement=null},FastClick.prototype.onMouse=function(a){"use strict";return this.targetElement?a.forwardedTouchEvent?!0:a.cancelable&&(!this.needsClick(this.targetElement)||this.cancelNextClick)?(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1):!0:!0},FastClick.prototype.onClick=function(a){"use strict";var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail?!0:(b=this.onMouse(a),b||(this.targetElement=null),b)},FastClick.prototype.destroy=function(){"use strict";var a=this.layer;deviceIsAndroid&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},FastClick.notNeeded=function(a){"use strict";var b,c;if("undefined"==typeof window.ontouchstart)return!0;if(c=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!deviceIsAndroid)return!0;if(b=document.querySelector("meta[name=viewport]")){if(-1!==b.content.indexOf("user-scalable=no"))return!0;if(c>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}return"none"===a.style.msTouchAction?!0:!1},FastClick.attach=function(a,b){"use strict";return new FastClick(a,b)},"undefined"!=typeof define&&define.amd?define("vendor/fastclick-1.0.1",[],function(){"use strict";return FastClick}):"undefined"!=typeof module&&module.exports?(module.exports=FastClick.attach,module.exports.FastClick=FastClick):window.FastClick=FastClick,function(){"use strict";var a={lines:12,length:2,width:2,radius:4,corners:1,rotate:0,direction:1,color:"#ffffff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner--small",zIndex:1,top:"auto",left:"auto"},b=_.extend({},a,{length:3,width:3,radius:7,className:"spinner--medium"}),c=_.extend({},a,{length:5,width:4,radius:9,className:"spinner--large"});EB.namespace("SpinSettings"),EB.SpinSettings={small:a,medium:b,large:c}}(),define("vendor/spin-1.3_settings",function(){}),define("eb/ui_components/loading_view",["require","marionette","spin","vendor/spin-1.3_settings"],function(a){"use strict";return a("marionette"),a("spin"),a("vendor/spin-1.3_settings"),Backbone.Marionette.ItemView.extend({template:function(){return new Spinner(_.extend({},EB.SpinSettings.large,{color:"#000000"})).spin().el},className:"loading-spinner"})}),define("require/components/janus/component",["require","jquery","underscore","eventbrite","jquery_cookie"],function(a){"use strict";var b,c,d,e=a("jquery"),f=a("underscore"),g=a("eventbrite");return a("jquery_cookie"),b=function(a){var b,c=new Date,d=g.getEBDomain();c.setMinutes(c.getMinutes()+5),"."!==d.charAt(0)&&(d="."+d),b={expires:c,domain:d,path:"/"},e.cookie("janus_re","v=1&"+a+"=1",b)},c=function(a){var b,c=new Date,d=g.getEBDomain();c.setMinutes(c.getMinutes()+5),"."!==d.charAt(0)&&(d="."+d),b={expires:c,domain:d,path:"/"},e.cookie("janus_cp","v=1&"+a+"=1",b)},d=function(){return f.isUndefined(g.VHit)?!1:!f.isNull(g.VHit)},{exposeOnPageChange:function(a){d()||b(a)},exposeViaAjax:function(a){var c={};return d()?!1:(c[a]="1",b(a),e.post("/ajax/janus/exposure/",c))},logCheckpointOnPageChange:function(a){d()||c(a)},logCheckpointViaAjax:function(a,b){var c=f.extend({},b,{checkpointName:a});if(!d())return e.post("/ajax/janus/checkpoint/",c)}}}),define("eb/apps/authentication/analytics",["require","eb/analytics","mediatorjs","require/components/janus/component"],function(a){"use strict";var b=a("eb/analytics"),c=a("mediatorjs"),d=a("require/components/janus/component"),e={trackSubmitSuccess:function(){var a=this.getAction();b.trackEvent({action:this.capitalizeString(a),category:a}),this.trackJanusCheckpointOnPageChange(a+"_submitted")},trackRememberMeToggle:function(a){var c=a?"opt-in":"opt-out";b.trackEvent({action:"RememberMe",category:"login",label:c})},getAction:function(){var a=c.get("AuthAppConfig");return"undefined"==typeof a?"undefined":a.initialAuthAction},capitalizeString:function(a){return a.replace(/(?:^|\s)\S/g,function(a){return a.toUpperCase()})},getCheckpointName:function(a){var b=c.get("AuthAppConfig"),d=a+"_page";return"undefined"!=typeof b&&b.enableAuthModal===!0&&(d=a+"_modal"),d},trackJanusCheckpoint:function(a){d.logCheckpointViaAjax(this.getCheckpointName(a))},trackJanusCheckpointOnPageChange:function(a){d.logCheckpointOnPageChange(this.getCheckpointName(a))}};return e}),/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Basic AJAX     - http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/
// Advanced AJAX  - http://benalman.com/code/projects/jquery-bbq/examples/fragment-advanced/
// jQuery UI Tabs - http://benalman.com/code/projects/jquery-bbq/examples/fragment-jquery-ui-tabs/
// Deparam        - http://benalman.com/code/projects/jquery-bbq/examples/deparam/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4,
//                   Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-bbq/unit/
// 
// About: Release History
// 
// 1.2.1 - (2/17/2010) Actually fixed the stale window.location Safari bug from
//         <jQuery hashchange event> in BBQ, which was the main reason for the
//         previous release!
// 1.2   - (2/16/2010) Integrated <jQuery hashchange event> v1.2, which fixes a
//         Safari bug, the event can now be bound before DOM ready, and IE6/7
//         page should no longer scroll when the event is first bound. Also
//         added the <jQuery.param.fragment.noEscape> method, and reworked the
//         <hashchange event (BBQ)> internal "add" method to be compatible with
//         changes made to the jQuery 1.4.2 special events API.
// 1.1.1 - (1/22/2010) Integrated <jQuery hashchange event> v1.1, which fixes an
//         obscure IE8 EmulateIE7 meta tag compatibility mode bug.
// 1.1   - (1/9/2010) Broke out the jQuery BBQ event.special <hashchange event>
//         functionality into a separate plugin for users who want just the
//         basic event & back button support, without all the extra awesomeness
//         that BBQ provides. This plugin will be included as part of jQuery BBQ,
//         but also be available separately. See <jQuery hashchange event>
//         plugin for more information. Also added the <jQuery.bbq.removeState>
//         method and added additional <jQuery.deparam> examples.
// 1.0.3 - (12/2/2009) Fixed an issue in IE 6 where location.search and
//         location.hash would report incorrectly if the hash contained the ?
//         character. Also <jQuery.param.querystring> and <jQuery.param.fragment>
//         will no longer parse params out of a URL that doesn't contain ? or #,
//         respectively.
// 1.0.2 - (10/10/2009) Fixed an issue in IE 6/7 where the hidden IFRAME caused
//         a "This page contains both secure and nonsecure items." warning when
//         used on an https:// page.
// 1.0.1 - (10/7/2009) Fixed an issue in IE 8. Since both "IE7" and "IE8
//         Compatibility View" modes erroneously report that the browser
//         supports the native window.onhashchange event, a slightly more
//         robust test needed to be added.
// 1.0   - (10/2/2009) Initial release
function(a,b){"$:nomunge";function c(a){return"string"==typeof a}function d(a){var b=r.call(arguments,1);return function(){return a.apply(this,b.concat(r.call(arguments)))}}function e(a){return a.replace(/^[^#]*#?(.*)$/,"$1")}function f(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(d,e,f,g,h){var i,k,m,n,o;return g!==j?(m=f.match(d?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),o=m[3]||"",2===h&&c(g)?k=g.replace(d?E:D,""):(n=l(m[2]),g=c(g)?l[d?y:x](g):g,k=2===h?g:1===h?a.extend({},g,n):a.extend({},n,g),k=t(k),d&&(k=k.replace(q,s))),i=m[1]+(d?"#":k||!m[1]?"?":"")+k+o):i=e(f!==j?f:b[A][B]),i}function h(a,b,d){return b===j||"boolean"==typeof b?(d=b,b=t[a?y:x]()):b=c(b)?b.replace(a?E:D,""):b,l(b,d)}function i(b,d,e,f){return c(e)||"object"==typeof e||(f=e,e=d,d=j),this.each(function(){var c=a(this),g=d||p()[(this.nodeName||"").toLowerCase()]||"",h=g&&c.attr(g)||"";c.attr(g,t[b](h,e,f))})}var j,k,l,m,n,o,p,q,r=Array.prototype.slice,s=decodeURIComponent,t=a.param,u=a.bbq=a.bbq||{},v=a.event.special,w="hashchange",x="querystring",y="fragment",z="elemUrlAttr",A="location",B="href",C="src",D=/^.*\?|#.*$/g,E=/^.*\#/,F={};t[x]=d(g,0,f),t[y]=k=d(g,1,e),k.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);q=new RegExp(c.join("|"),"g")},k.noEscape(",/"),a.deparam=l=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=s(h[0]),k=d,l=0,m=i.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===h.length)if(g=s(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?j:e[g]!==j?e[g]:g),n)for(;n>=l;l++)i=""===m[l]?k.length:m[l],k=k[i]=n>l?k[i]||(m[l+1]&&isNaN(m[l+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):d[i]=d[i]!==j?[d[i],g]:g;else i&&(d[i]=c?j:"")}),d},l[x]=d(h,0),l[y]=m=d(h,1),a[z]||(a[z]=function(b){return a.extend(F,b)})({a:B,base:B,iframe:C,img:C,input:C,form:"action",link:B,script:C}),p=a[z],a.fn[x]=d(i,x),a.fn[y]=d(i,y),u.pushState=n=function(a,d){c(a)&&/^#/.test(a)&&d===j&&(d=2);var e=a!==j,f=k(b[A][B],e?a:{},e?d:2);b[A][B]=f+(/#/.test(f)?"":"#")},u.getState=o=function(a,b){return a===j||"boolean"==typeof a?m(a):m(b)[a]},u.removeState=function(b){var c={};b!==j&&(c=o(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]})),n(c,2)},v[w]=a.extend(v[w],{add:function(b){function c(a){var b=a[y]=k();a.getState=function(a,c){return a===j||"boolean"==typeof a?l(b,a):l(b,c)[a]},d.apply(this,arguments)}var d;return a.isFunction(b)?(d=b,c):(d=b.handler,void(b.handler=c))}})}(jQuery,this),/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// This working example, complete with fully commented code, illustrate one way
// in which this plugin can be used.
// 
// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4, Chrome, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/
// 
// About: Known issues
// 
// While this jQuery hashchange event implementation is quite stable and robust,
// there are a few unfortunate browser bugs surrounding expected hashchange
// event-based behaviors, independent of any JavaScript window.onhashchange
// abstraction. See the following examples for more information:
// 
// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/
// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/
// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/
// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/
// 
// About: Release History
// 
// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin
//         from a page on another domain would cause an error in Safari 4. Also,
//         IE6/7 Iframe is now inserted after the body (this actually works),
//         which prevents the page from scrolling when the event is first bound.
//         Event can also now be bound before DOM ready, but it won't be usable
//         before then in IE6/7.
// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug
//         where browser version is incorrectly reported as 8.0, despite
//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.
// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special
//         window.onhashchange functionality into a separate plugin for users
//         who want just the basic event & back button support, without all the
//         extra awesomeness that BBQ provides. This plugin will be included as
//         part of jQuery BBQ, but also be available separately.
function(a,b,c){"$:nomunge";function d(a){return a=a||b[g][i],a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f=a.event.special,g="location",h="hashchange",i="href",j=a.browser,k=document.documentMode,l=j.msie&&(k===c||8>k),m="on"+h in b&&!l;a[h+"Delay"]=100,f[h]=a.extend(f[h],{setup:function(){return m?!1:void a(e.start)},teardown:function(){return m?!1:void a(e.stop)}}),e=function(){function c(){j=k=function(a){return a},l&&(f=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,k=function(){return d(f.document[g][i])},(j=function(a,b){if(a!==b){var c=f.document;c.open().close(),c[g].hash="#"+a}})(d()))}var e,f,j,k,m={};return m.start=function(){if(!e){var f=d();j||c(),function l(){var c=d(),m=k(f);c!==f?(j(f=c,m),a(b).trigger(h)):m!==f&&(b[g][i]=b[g][i].replace(/#.*/,"")+"#"+m),e=setTimeout(l,a[h+"Delay"])}()}},m.stop=function(){f||(e&&clearTimeout(e),e=0)},m}()}(jQuery,this),define("jquery.ba-bbq.1.2.1",function(){}),define("eb/apps/authentication/pre_render_patches",["require"],function(){"use strict";var a=function(a){this.ensureEl(),a.render(),this.currentView=a,Marionette.triggerMethod.call(this,"show",a),Marionette.triggerMethod.call(a,"show")},b=function(){return this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},c=function(){this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions();var a=Array.prototype.slice.apply(arguments);return b.apply(this,a)};return{renderItemViewWithExistingEl:b,renderLayoutWithExistingEl:c,showWithExistingEl:a}}),function(a,b,c){b.namespace("Models");var d=function(a,b,c){"function"!=typeof a.mixin&&c.addMixin(a),a.mixin(b.rejectWithServerErrors).mixin(b.rejectIfServerValidationErrors)};b.Models.UserModel=b.Backbone.Model.extend({url:"/ajax/signup/",defaults:{user_type:"attendee",remember_me:1,referrer:""},validation:{email:[{required:!0},{pattern:"email",msg:window.gettext("Please enter a valid email address")}],passwd:{required:!0,minLength:4,msg:window.gettext("Password must be at least 4 characters")}},initialize:function(){c.bindAll(this,"handleExistsError"),this.on("change:email",this.handleEmailChanged),this.get("email")&&this.trigger("change:email")},activate:function(b){var c,d,e=this.get("email"),b=b||{},f=this.get("passwd");return d="forward"in this.attributes?this.attributes.forward:b.activationDestination||this.get("activationDestination"),c={email:e,password:f,destination:location.origin+d,use_ssl_destination:b.useSSLDestination||this.get("useSSLDestination"),preserve_tld:b.preserveTLD||this.get("preserveTLD")},this.activateUserDfd&&"pending"!==this.activateUserDfd.state()?this.activateUserDfd.promise():(this.activateUserDfd=f?e&&this.isValid("email")&&f&&this.isValid("password")?a.post("/users/soft_acct_signup_activation_email/",c):a.Deferred().reject():e&&this.isValid("email")?a.post("/users/send_activation_email/",c):a.Deferred().reject(),this.activateUserDfd.promise())},checkUserExists:function(){var c=this.get("email");return this.checkUserExistsDfd&&"pending"!==this.checkUserExistsDfd.state()?this.checkUserExistsDfd.promise():(this.checkUserExistsDfd=this.isValid("email")?a.get("/users/check-user-exists?email="+encodeURIComponent(c)).pipe(null,this.handleExistsError):a.Deferred().reject({error:b.Models.UserModel.ERROR_VALIDATION}),this.checkUserExistsDfd.promise())},handleExistsError:function(a){var c={error:b.Models.UserModel.ERROR_UNKNOWN};return 403===a.status&&(c.error=b.Models.UserModel.ERROR_RATELIMIT),c},signup:function(){this.save()},handleEmailChanged:function(){this.checkUserExistsDfd=a.Deferred(),this.activateUserDfd=a.Deferred()}}),b.Models.UserModel.ERROR_UNKNOWN="unknown",b.Models.UserModel.ERROR_RATELIMIT="ratelimit",b.Models.UserModel.ERROR_VALIDATION="validation","function"==typeof b.Backbone.Model.mixin&&d(b.Models.UserModel,b.Backbone.Mixins,window.Backbone.Advice),"function"==typeof define&&define("eb/models/user_model",["backbone_advice","eb/backbone/mixins","eb/csrfcookie"],function(a,c){return d(b.Models.UserModel,c,a),b.Models.UserModel})}(window.jQuery,window.EB,window._),function(a){a("eb/apps/authentication/notification_view",["require","eb/backbone/mixins","marionette","eb/models/user_model"],function(a){"use strict";{var b=a("eb/backbone/mixins"),c=a("marionette");a("eb/models/user_model")}return c.ItemView.extend({requiredOptions:["message"],getTemplate:function(){return window.Handlebars.templates.authentication_notification},initialize:function(a){this.options=a},serializeData:function(){return{message:this.options.message}}}).mixin(b.enforceDependencies)})}(window.define,window.jQuery,window.EB,window._),define("hb!eb/apps/authentication/activation_layout.handlebars",["handlebars.runtime"],function(a){return a["default"].template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="l-pad-vert-4 l-pad-hor-2">\n    <div class="js-current-component"></div>\n    <div class="text--centered">\n        <h2 class="text-heading-primary text-body--significant">',(f=c.heading)?f=f.call(b,{hash:{},data:e}):(f=b&&b.heading,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'</h2>\n        <p class="force-no-wrap l-pad-vert-2">',(f=c.email)?f=f.call(b,{hash:{},data:e}):(f=b&&b.email,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+'</p>\n        <hr>\n        <h3 class="l-pad-vert-4 text-body-medium text-body--understated">',(f=c.byLine)?f=f.call(b,{hash:{},data:e}):(f=b&&b.byLine,f=typeof f===h?f.call(b,{hash:{},data:e}):f),(f||0===f)&&(g+=f),g+="</h3>\n    </div>\n</div>\n"})}),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.authentication_get_tickets=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=c.helperMissing,j=this.escapeExpression;return h+='<div class="l-block-3">\n    <label class="is-hidden-accessible" for="gettickets-email">',g={hash:{},data:e},h+=j((f=c._||b._,f?f.call(b,"Email address",g):i.call(b,"_","Email address",g)))+'</label>\n    <input\n        value=""\n        name="email"\n        type="email"\n        placeholder="',g={hash:{},data:e},h+=j((f=c._||b._,f?f.call(b,"Email",g):i.call(b,"_","Email",g)))+'"\n        tabindex="1"\n        id="gettickets-email"\n    />\n    <div class="js-error-for-email form__field-error is-hidden"></div>\n</div>\n<div class="js-captcha-form-row l-block-3 is-hidden">\n    <div class="js-captcha-field"></div>\n    <div class="js-error-for-captcha form__field-error is-hidden"></div>\n</div>\n<div class="l-block-3">\n    <input type="submit" class="btn btn--block" tabindex="2" value="',g={hash:{},data:e},h+=j((f=c._||b._,f?f.call(b,"Continue",g):i.call(b,"_","Continue",g)))+'"/>\n</div>'}),this.Handlebars.templates.authentication_layout=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n        <div class="l-block-3 text--centered">',(d=c.formByLine)?d=d.call(a,{hash:{},data:b}):(d=a.formByLine,d=typeof d===j?d.apply(a):d),e+=k(d)+"</div>\n"}function g(){return'\n    <div class="js-fp js-d-fp"></div>\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<div class="l-pad-vert-4 l-sm-pad-vert-3 l-padded-h-2 pod">\n    <div class="text--centered">\n        <h1 class="text-large">',(h=c.heading)?h=h.call(b,{hash:{},data:e}):(h=b.heading,h=typeof h===j?h.apply(b):h),i+=k(h)+'</h1>\n        <p class="l-block-1">\n            ',(h=c.byLine)?h=h.call(b,{hash:{},data:e}):(h=b.byLine,h=typeof h===j?h.apply(b):h),(h||0===h)&&(i+=h),i+='\n        </p>\n    </div>\n    <form class="responsive-form l-block-3">\n',h=c["if"].call(b,b.formByLine,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+='\n        <div class="js-notification l-block-3"></div>\n        <div class="js-current-component">\n        </div>\n    </form>\n</div>\n\n',h=c["if"].call(b,b.fp,{hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+="\n"}),this.Handlebars.templates.authentication_login=Handlebars.template(function(a,b,c,d,e){function f(){return'\n        disabled="disabled"\n'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k=c.helperMissing,l=this.escapeExpression,m=this;return j+='<div class="l-block-3">\n    <label class="is-hidden-accessible" for="login-email">',i={hash:{},data:e},j+=l((g=c._||b._,g?g.call(b,"Email address",i):k.call(b,"_","Email address",i)))+'</label>\n    <input\n        name="email"\n        type="email"\n        value=""\n        placeholder="',i={hash:{},data:e},j+=l((g=c._||b._,g?g.call(b,"Email",i):k.call(b,"_","Email",i)))+'"\n',h=c["if"].call(b,b.isEmailDisabled,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+='\n        id="login-email"\n    />\n    <div class="js-error-for-email form__field-error is-hidden"></div>\n</div>\n<div class="l-block-3">\n    <label class="is-hidden-accessible" for="login-password">',i={hash:{},data:e},j+=l((g=c._||b._,g?g.call(b,"Password",i):k.call(b,"_","Password",i)))+'</label>\n    <input name="password" type="password" placeholder="',i={hash:{},data:e},j+=l((g=c._||b._,g?g.call(b,"Password",i):k.call(b,"_","Password",i)))+'" id="login-password">\n    <div class="js-error-for-passwd form__field-error is-hidden"></div>\n</div>\n<div class="js-captcha-form-row l-block-3 is-hidden">\n    <div class="js-captcha-field"></div>\n    <div class="js-error-for-captcha form__field-error is-hidden"></div>\n</div>\n<div class="l-block-3">\n    <input type="submit" class="btn btn--epic btn--block" value="',i={hash:{},data:e},j+=l((g=c._||b._,g?g.call(b,"Log in",i):k.call(b,"_","Log in",i)))+'"/>\n</div>\n<div class="l-block-3 form__row">\n    <input id="remember_me" name="remember_me" type="checkbox" checked="true">\n    <label for="remember_me" class="text-body-small">',i={hash:{},data:e},j+=l((g=c._||b._,g?g.call(b,"Remember me",i):k.call(b,"_","Remember me",i)))+'</label>\n    <a class="js-authentication-reset-password authentication__forgot-password layout-stackable__aside text-body-small js-d-track-link" data-event-action="ForgotPwd" data-event-category="login" data-source="login_footer" href="/resetpassword">',i={hash:{},data:e},j+=l((g=c._||b._,g?g.call(b,"Forgot password?",i):k.call(b,"_","Forgot password?",i)))+"</a>\n</div>\n"}),this.Handlebars.templates.authentication_signup=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h,i="",j=c.helperMissing,k=this.escapeExpression,l="function";return i+='<div class="l-block-3">\n	<label class="is-hidden-accessible" for="signup-email">',h={hash:{},data:e},i+=k((f=c._||b._,f?f.call(b,"Email address",h):j.call(b,"_","Email address",h)))+'</label>\n    <input name="email" type="email" value="" placeholder="',h={hash:{},data:e},i+=k((f=c._||b._,f?f.call(b,"Email",h):j.call(b,"_","Email",h)))+'" id="signup-email">\n    <div class="js-error-for-email form__field-error is-hidden"></div>\n</div>\n<div class="l-block-3">\n	<label class="is-hidden-accessible" for="signup-password">',h={hash:{},data:e},i+=k((f=c._||b._,f?f.call(b,"Password",h):j.call(b,"_","Password",h)))+'</label>\n    <input name="password" type="password" placeholder="',h={hash:{},data:e},i+=k((f=c._||b._,f?f.call(b,"Password",h):j.call(b,"_","Password",h)))+'" id="signup-password">\n    <div class="js-error-for-passwd form__field-error is-hidden"></div>\n</div>\n<div class="js-captcha-form-row l-block-3 is-hidden">\n    <div class="js-captcha-field"></div>\n    <div class="js-error-for-captcha form__field-error is-hidden"></div>\n</div>\n<div class="l-block-3">\n    <input type="submit" class="btn btn--epic btn--block" value="',h={hash:{},data:e},i+=k((f=c._||b._,f?f.call(b,"Sign up",h):j.call(b,"_","Sign up",h)))+'"/>\n</div>\n<p class="l-block-2 has-centered-inline-content text-body-small">\n    ',(g=c.signUpConditionsHtml)?g=g.call(b,{hash:{},data:e}):(g=b.signUpConditionsHtml,g=typeof g===l?g.apply(b):g),(g||0===g)&&(i+=g),i+="\n</p>"}),this.Handlebars.templates.authentication_notification=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+='<div class="notification notification--alert">\n    ',(f=c.message)?f=f.call(b,{hash:{},data:e}):(f=b.message,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+="\n</div>\n"}),this.Handlebars.templates.authentication_activation_sent=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<div class='l-pad-vert-3 has-centered-inline-content'>\n    <i class='ico-mail ico--color-brand-teal activation-sent'></i>\n</div>\n"}),define("templates/build/authentication",function(){}),function(a){a("eb/apps/authentication/layout",["require","marionette","eb/backbone/mixins","eb/apps/authentication/notification_view","hb!./activation_layout.handlebars","templates/build/authentication"],function(a){"use strict";var b=a("marionette"),c=a("eb/backbone/mixins"),d=a("eb/apps/authentication/notification_view"),e=a("hb!./activation_layout.handlebars");return a("templates/build/authentication"),b.Layout.extend({requiredOptions:["heading","byLine","sandbox"],events:{"click .js-switch-to-signup":"handleSwitchToSignUpClick","click .js-switch-to-login":"handleSwitchToLogInClick"},regions:{content:".js-current-component",notification:".js-notification"},initialize:function(){_.bindAll(this,"handleSwitchToSignUpClick","handleSwitchToLogInClick")},getTemplate:function(){return this.options.activation_layout?e:window.Handlebars.templates.authentication_layout},showNotification:function(a,b){this.notification.close();var c=new d({message:a,events:b});c.$el.hide().fadeIn().show(),this.notification.show(c)},hideNotification:function(){this.notification.currentView?this.notification.currentView.$el.fadeOut().promise().done(this.notification.close.bind(this.notification)):this.notification.close()},serializeData:function(){return{heading:this.heading,byLine:this.byLine,email:this.options.email,fp:this.options.fp}},handleSwitchToSignUpClick:function(a){a.preventDefault(),this.sandbox.execute("authentication:navigate:signup")},handleSwitchToLogInClick:function(a){a.preventDefault(),this.sandbox.execute("authentication:navigate:login")}}).mixin([c.enforceDependencies])})}(window.define,window.gettext),function(a,b,c,d,e){"use strict";b.ComponentFactory=function(){},d.extend(b.ComponentFactory.prototype,{bindMethods:function(a,b){d.each(a,function(a,c,e){"function"==typeof a&&(e[c]=d.bind(a,b))})},createComponent:function(a){var b=d.extend({},e.Events),c=d.clone(this.commands)||{},f=d.clone(this.requests)||{},g=d.clone(this.componentMethods)||{},h=d.clone(this.sandbox)||{};return this.preCreate.call(b,a),b.sandbox=h,b.commands=new e.Wreqr.Commands,b.reqres=new e.Wreqr.RequestResponse,this.bindMethods(c,b),this.bindMethods(f,b),this.bindMethods(g,b),b=d.extend(b,g),b.commands.setHandlers(c),b.reqres.setHandlers(f),b.sandbox.execute=d.bind(b.commands.execute,b.commands),b.sandbox.request=d.bind(b.reqres.request,b.reqres),b.start=d.bind(this.start,b),b.stop=d.bind(this.stop,b),this.postCreate.call(b,a),b},create:function(a){var b=this.createComponent(a);return this.initialize.call(b,a),b},preCreate:function(){},postCreate:function(){},initialize:function(){},start:function(){},stop:function(){}}),b.ComponentFactory.extend=e.Model.extend,b.ComponentFactory.create=function(a){return(new this).create(a)},"function"==typeof define&&define("eb/_backbone/component_factory",["require","backbone_wreqr","backbone_advice"],function(a){a("backbone_wreqr");var c=a("backbone_advice");return c.addMixin(b.ComponentFactory),b.ComponentFactory})}(jQuery,EB,window,window._,window.Backbone),function(a){a("eb/apps/authentication/errors",["require"],function(){"use strict";return{SERVER_ERROR:gettext("Whoops! Someone must have pulled a plug somewhere... try again."),REQUIRED_FIELD_ERROR:gettext("Missing field"),INVALID_EMAIL_ERROR:gettext("Please enter a valid email address"),MINIMUM_LENGTH_4_PASSWORD_ERROR:gettext("Password must be at least 4 characters"),CAPTCHA_INCORRECT_SOLUTION:gettext("The CAPTCHA solution was incorrect.")}})}(window.define),function(a,b,c){function d(a){var b={},d=/^jQuery\d+$/;return c.each(a.attributes,function(a,c){c.specified&&!d.test(c.name)&&(b[c.name]=c.value)}),b}function e(a,b){var d=this,e=c(d);if(d.value==e.attr("placeholder")&&e.hasClass("placeholder"))if(e.data("placeholder-password")){if(e=e.hide().next().show().attr("id",e.removeAttr("id").data("placeholder-id")),a===!0)return e[0].value=b;e.focus()}else d.value="",e.removeClass("placeholder"),d==g()&&d.select()}function f(){var a,b=this,f=c(b),g=this.id;if(""==b.value){if("password"==b.type){if(!f.data("placeholder-textinput")){try{a=f.clone().attr({type:"text"})}catch(h){a=c("<input>").attr(c.extend(d(this),{type:"text"}))}a.removeAttr("name").data({"placeholder-password":f,"placeholder-id":g}).bind("focus.placeholder",e),f.data({"placeholder-textinput":a,"placeholder-id":g}).before(a)}f=f.removeAttr("id").hide().prev().attr("id",g).show()}f.addClass("placeholder"),f[0].value=f.attr("placeholder")}else f.removeClass("placeholder")}function g(){try{return b.activeElement}catch(a){}}var h,i,j="[object OperaMini]"==Object.prototype.toString.call(a.operamini),k="placeholder"in b.createElement("input")&&!j,l="placeholder"in b.createElement("textarea")&&!j,m=c.fn,n=c.valHooks,o=c.propHooks;k&&l?(i=m.placeholder=function(){return this},i.input=i.textarea=!0):(i=m.placeholder=function(){var a=this;return a.filter((k?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":e,"blur.placeholder":f}).data("placeholder-enabled",!0).trigger("blur.placeholder"),a},i.input=k,i.textarea=l,h={get:function(a){var b=c(a),d=b.data("placeholder-password");return d?d[0].value:b.data("placeholder-enabled")&&b.hasClass("placeholder")?"":a.value},set:function(a,b){var d=c(a),h=d.data("placeholder-password");return h?h[0].value=b:d.data("placeholder-enabled")?(""==b?(a.value=b,a!=g()&&f.call(a)):d.hasClass("placeholder")?e.call(a,!0,b)||(a.value=b):a.value=b,d):a.value=b}},k||(n.input=h,o.value=h),l||(n.textarea=h,o.value=h),c(function(){c(b).delegate("form","submit.placeholder",function(){var a=c(".placeholder",this).each(e);setTimeout(function(){a.each(f)},10)})}),c(a).bind("beforeunload.placeholder",function(){c(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),define("jquery-placeholder",function(){});var RecaptchaTemplates={};RecaptchaTemplates.VertHtml='<table id="recaptcha_table" class="recaptchatable" > <tr> <td colspan="6" class=\'recaptcha_r1_c1\'></td> </tr> <tr> <td class=\'recaptcha_r2_c1\'></td> <td colspan="4" class=\'recaptcha_image_cell\'><div id="recaptcha_image"></div></td> <td class=\'recaptcha_r2_c2\'></td> </tr> <tr> <td rowspan="6" class=\'recaptcha_r3_c1\'></td> <td colspan="4" class=\'recaptcha_r3_c2\'></td> <td rowspan="6" class=\'recaptcha_r3_c3\'></td> </tr> <tr> <td rowspan="3" class=\'recaptcha_r4_c1\' height="49"> <div class="recaptcha_input_area"> <label for="recaptcha_response_field" class="recaptcha_input_area_text"><span id="recaptcha_instructions_image" class="recaptcha_only_if_image recaptcha_only_if_no_incorrect_sol"></span><span id="recaptcha_instructions_audio" class="recaptcha_only_if_no_incorrect_sol recaptcha_only_if_audio"></span><span id="recaptcha_instructions_error" class="recaptcha_only_if_incorrect_sol"></span></label><br/> <input name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td rowspan="4" class=\'recaptcha_r4_c2\'></td> <td><a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="17" /></a></td> <td rowspan="4" class=\'recaptcha_r4_c4\'></td> </tr> <tr> <td><a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="16" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="16" alt=""/></a></td> </tr> <tr> <td><a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a></td> </tr> <tr> <td class=\'recaptcha_r7_c1\'></td> <td class=\'recaptcha_r8_c1\'></td> </tr> </table> ',RecaptchaTemplates.CleanCss=".recaptchatable td img{display:block}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px;padding:7px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto;text-align:left!important}.recaptchatable #recaptcha_image{margin:auto;border:1px solid #dfdfdf!important}.recaptchatable a img{border:0}.recaptchatable a,.recaptchatable a:hover{outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{border:1px solid #dfdfdf!important;margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{font-size:11pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1em;border:1px solid #dfdfdf!important}.recaptcha_error_text{color:red}",RecaptchaTemplates.CleanHtml='<table id="recaptcha_table" class="recaptchatable"> <tr height="73"> <td class=\'recaptcha_image_cell\' width="302"><center><div id="recaptcha_image"></div></center></td> <td style="padding: 10px 7px 7px 7px;"> <a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="18" alt="" /></a> <a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="15" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="15" alt=""/></a> <a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a> </td> <td style="padding: 18px 7px 18px 7px;"> <img id=\'recaptcha_logo\' alt="" width="71" height="36" /> </td> </tr> <tr> <td style="padding-left: 7px;"> <div class="recaptcha_input_area" style="padding-top: 2px; padding-bottom: 7px;"> <input style="border: 1px solid #3c3c3c; width: 302px;" name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td></td> <td style="padding: 4px 7px 12px 7px;"> <img id="recaptcha_tagline" width="71" height="17" /> </td> </tr> </table> ',RecaptchaTemplates.ContextHtml='<table id="recaptcha_table" class="recaptchatable"> <tr> <td colspan="6" class=\'recaptcha_r1_c1\'></td> </tr> <tr> <td class=\'recaptcha_r2_c1\'></td> <td colspan="4" class=\'recaptcha_image_cell\'><div id="recaptcha_image"></div></td> <td class=\'recaptcha_r2_c2\'></td> </tr> <tr> <td rowspan="6" class=\'recaptcha_r3_c1\'></td> <td colspan="4" class=\'recaptcha_r3_c2\'></td> <td rowspan="6" class=\'recaptcha_r3_c3\'></td> </tr> <tr> <td rowspan="3" class=\'recaptcha_r4_c1\' height="49"> <div class="recaptcha_input_area"> <label for="recaptcha_response_field" class="recaptcha_input_area_text"><span id="recaptcha_instructions_context" class="recaptcha_only_if_image recaptcha_only_if_no_incorrect_sol"></span><span id="recaptcha_instructions_audio" class="recaptcha_only_if_no_incorrect_sol recaptcha_only_if_audio"></span><span id="recaptcha_instructions_error" class="recaptcha_only_if_incorrect_sol"></span></label><br/> <input name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td rowspan="4" class=\'recaptcha_r4_c2\'></td> <td><a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="17" /></a></td> <td rowspan="4" class=\'recaptcha_r4_c4\'></td> </tr> <tr> <td><a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="16" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="16" alt=""/></a></td> </tr> <tr> <td><a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a></td> </tr> <tr> <td class=\'recaptcha_r7_c1\'></td> <td class=\'recaptcha_r8_c1\'></td> </tr> </table> ',RecaptchaTemplates.VertCss=".recaptchatable td img{display:block}.recaptchatable .recaptcha_r1_c1{background:url(IMGROOT/sprite.png) 0 -63px no-repeat;width:318px;height:9px}.recaptchatable .recaptcha_r2_c1{background:url(IMGROOT/sprite.png) -18px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r2_c2{background:url(IMGROOT/sprite.png) -27px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r3_c1{background:url(IMGROOT/sprite.png) 0 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r3_c2{background:url(IMGROOT/sprite.png) -18px -57px no-repeat;width:300px;height:6px}.recaptchatable .recaptcha_r3_c3{background:url(IMGROOT/sprite.png) -9px 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r4_c1{background:url(IMGROOT/sprite.png) -43px 0 no-repeat;width:171px;height:49px}.recaptchatable .recaptcha_r4_c2{background:url(IMGROOT/sprite.png) -36px 0 no-repeat;width:7px;height:57px}.recaptchatable .recaptcha_r4_c4{background:url(IMGROOT/sprite.png) -214px 0 no-repeat;width:97px;height:57px}.recaptchatable .recaptcha_r7_c1{background:url(IMGROOT/sprite.png) -43px -49px no-repeat;width:171px;height:8px}.recaptchatable .recaptcha_r8_c1{background:url(IMGROOT/sprite.png) -43px -49px no-repeat;width:25px;height:8px}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px}#recaptcha_area,#recaptcha_table{width:318px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;padding:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;font-family:helvetica,sans-serif;font-size:8pt;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto;text-align:left!important}.recaptchatable #recaptcha_image{margin:auto}.recaptchatable img{border:0!important;margin:0!important;padding:0!important}.recaptchatable a,.recaptchatable a:hover{outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;width:146px!important;height:45px!important;margin-left:20px!important;margin-right:5px!important;margin-top:4px!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important;background:none!important;height:auto!important;width:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{width:145px!important;position:absolute!important;bottom:7px!important;padding:0!important;margin:0!important;font-size:10pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1em}#recaptcha_instructions_error{color:red!important}";var RecaptchaStr_en={visual_challenge:"Get a visual challenge",audio_challenge:"Get an audio challenge",refresh_btn:"Get a new challenge",instructions_visual:"Type the two words:",instructions_context:"Type the words in the boxes:",instructions_audio:"Type what you hear:",help_btn:"Help",play_again:"Play sound again",cant_hear_this:"Download sound as MP3",incorrect_try_again:"Incorrect. Try again."},RecaptchaStr_de={visual_challenge:"Visuelle Aufgabe generieren",audio_challenge:"Audio-Aufgabe generieren",refresh_btn:"Neue Aufgabe generieren",instructions_visual:"Gib die 2 Wörter ein:",instructions_context:"",instructions_audio:"Gib die 8 Ziffern ein:",help_btn:"Hilfe",incorrect_try_again:"Falsch. Nochmals versuchen!"},RecaptchaStr_es={visual_challenge:"Obtén un reto visual",audio_challenge:"Obtén un reto audible",refresh_btn:"Obtén un nuevo reto",instructions_visual:"Escribe las 2 palabras:",instructions_context:"",instructions_audio:"Escribe los 8 números:",help_btn:"Ayuda",incorrect_try_again:"Incorrecto. Otro intento."},RecaptchaStr_fr={visual_challenge:"Défi visuel",audio_challenge:"Défi audio",refresh_btn:"Nouveau défi",instructions_visual:"Entrez les deux mots:",instructions_context:"",instructions_audio:"Entrez les huit chiffres:",help_btn:"Aide",incorrect_try_again:"Incorrect."},RecaptchaStr_nl={visual_challenge:"Test me via een afbeelding",audio_challenge:"Test me via een geluidsfragment",refresh_btn:"Nieuwe uitdaging",instructions_visual:"Typ de twee woorden:",instructions_context:"",instructions_audio:"Typ de acht cijfers:",help_btn:"Help",incorrect_try_again:"Foute invoer."},RecaptchaStr_pt={visual_challenge:"Obter um desafio visual",audio_challenge:"Obter um desafio sonoro",refresh_btn:"Obter um novo desafio",instructions_visual:"Escreva as 2 palavras:",instructions_context:"",instructions_audio:"Escreva os 8 numeros:",help_btn:"Ajuda",incorrect_try_again:"Incorrecto. Tenta outra vez."},RecaptchaStr_ru={visual_challenge:"Загрузить визуальную задачу",audio_challenge:"Загрузить звуковую задачу",refresh_btn:"Загрузить новую задачу",instructions_visual:"Введите два слова:",instructions_context:"",instructions_audio:"Введите восемь чисел:",help_btn:"Помощь",incorrect_try_again:"Неправильно."},RecaptchaStr_tr={visual_challenge:"Görsel deneme",audio_challenge:"İşitsel deneme",refresh_btn:"Yeni deneme",instructions_visual:"İki kelimeyi yazın:",instructions_context:"",instructions_audio:"Sekiz numarayı yazın:",help_btn:"Yardım (İngilizce)",incorrect_try_again:"Yanlış. Bir daha deneyin."},RecaptchaStr_it={visual_challenge:"Modalità visiva",audio_challenge:"Modalità auditiva",refresh_btn:"Chiedi due nuove parole",instructions_visual:"Scrivi le due parole:",instructions_context:"",instructions_audio:"Trascrivi ciò che senti:",help_btn:"Aiuto",incorrect_try_again:"Scorretto. Riprova."},RecaptchaLangMap={en:RecaptchaStr_en,de:RecaptchaStr_de,es:RecaptchaStr_es,fr:RecaptchaStr_fr,nl:RecaptchaStr_nl,pt:RecaptchaStr_pt,ru:RecaptchaStr_ru,tr:RecaptchaStr_tr,it:RecaptchaStr_it},RecaptchaStr=RecaptchaStr_en,RecaptchaOptions,RecaptchaDefaultOptions={tabindex:0,theme:"red",callback:null,lang:null,custom_theme_widget:null,custom_translations:null,includeContext:!1},Recaptcha={widget:null,timer_id:-1,style_set:!1,theme:null,type:"image",ajax_verify_cb:null,$:function(a){return"string"==typeof a?document.getElementById(a):a
},create:function(a,b,c){Recaptcha.destroy(),b&&(Recaptcha.widget=Recaptcha.$(b)),Recaptcha._init_options(c),Recaptcha._call_challenge(a)},destroy:function(){var a=Recaptcha.$("recaptcha_challenge_field");a&&a.parentNode.removeChild(a),-1!=Recaptcha.timer_id&&clearInterval(Recaptcha.timer_id),Recaptcha.timer_id=-1,(a=Recaptcha.$("recaptcha_image"))&&(a.innerHTML=""),Recaptcha.widget&&("custom"!=Recaptcha.theme?Recaptcha.widget.innerHTML="":Recaptcha.widget.style.display="none",Recaptcha.widget=null)},focus_response_field:function(){var a=Recaptcha.$,a=a("recaptcha_response_field");a.focus()},get_challenge:function(){return"undefined"==typeof RecaptchaState?null:RecaptchaState.challenge},get_response:function(){var a=Recaptcha.$,a=a("recaptcha_response_field");return a?a.value:null},ajax_verify:function(a){Recaptcha.ajax_verify_cb=a,a=Recaptcha._get_api_server()+"/ajaxverify?c="+encodeURIComponent(Recaptcha.get_challenge())+"&response="+encodeURIComponent(Recaptcha.get_response()),Recaptcha._add_script(a)},_ajax_verify_callback:function(a){Recaptcha.ajax_verify_cb(a)},_get_api_server:function(){var a,b=window.location.protocol;return a="undefined"!=typeof _RecaptchaOverrideApiServer?_RecaptchaOverrideApiServer:"www.google.com/recaptcha/api",b+"//"+a},_call_challenge:function(a){a=Recaptcha._get_api_server()+"/challenge?k="+a+"&ajax=1&cachestop="+Math.random(),RecaptchaOptions.lang&&(a+="&lang="+RecaptchaOptions.lang),"undefined"!=typeof RecaptchaOptions.extra_challenge_params&&(a+="&"+RecaptchaOptions.extra_challenge_params),RecaptchaOptions.includeContext&&(a+="&includeContext=1"),Recaptcha._add_script(a)},_add_script:function(a){var b=document.createElement("script");b.type="text/javascript",b.src=a,Recaptcha._get_script_area().appendChild(b)},_get_script_area:function(){var a=document.getElementsByTagName("head");return a=!a||a.length<1?document.body:a[0]},_hash_merge:function(a){var b,c={};for(b in a)for(var d in a[b])c[d]=a[b][d];return"context"==c.theme&&(c.includeContext=!0),c},_init_options:function(a){RecaptchaOptions=Recaptcha._hash_merge([RecaptchaDefaultOptions,a||{}])},challenge_callback:function(){var a=Recaptcha.widget;if(Recaptcha._reset_timer(),RecaptchaStr=Recaptcha._hash_merge([RecaptchaStr_en,RecaptchaLangMap[RecaptchaOptions.lang]||{},RecaptchaOptions.custom_translations||{}]),window.addEventListener&&window.addEventListener("unload",function(){Recaptcha.destroy()},!1),Recaptcha._is_ie()&&window.attachEvent&&window.attachEvent("onbeforeunload",function(){}),navigator.userAgent.indexOf("KHTML")>0){a=document.createElement("iframe"),a.src="about:blank",a.style.height="0px",a.style.width="0px",a.style.visibility="hidden",a.style.border="none";var b=document.createTextNode("This frame prevents back/forward cache problems in Safari.");a.appendChild(b),document.body.appendChild(a)}Recaptcha._finish_widget()},_add_css:function(a){var b=document.createElement("style");b.type="text/css",b.styleSheet?-1!=navigator.appVersion.indexOf("MSIE 5")?document.write("<style type='text/css'>"+a+"</style>"):b.styleSheet.cssText=a:-1!=navigator.appVersion.indexOf("MSIE 5")?document.write("<style type='text/css'>"+a+"</style>"):(a=document.createTextNode(a),b.appendChild(a)),Recaptcha._get_script_area().appendChild(b)},_set_style:function(a){Recaptcha.style_set||(Recaptcha.style_set=!0,Recaptcha._add_css(a+"\n\n.recaptcha_is_showing_audio .recaptcha_only_if_image,.recaptcha_isnot_showing_audio .recaptcha_only_if_audio,.recaptcha_had_incorrect_sol .recaptcha_only_if_no_incorrect_sol,.recaptcha_nothad_incorrect_sol .recaptcha_only_if_incorrect_sol{display:none !important}"))},_init_builtin_theme:function(){var a,b,c=Recaptcha.$,d=RecaptchaStr,e=RecaptchaState,e=e.server;"/"==e[e.length-1]&&(e=e.substring(0,e.length-1));var f=e+"/img/"+Recaptcha.theme;"clean"==Recaptcha.theme?(e=RecaptchaTemplates.CleanCss,a=RecaptchaTemplates.CleanHtml,b="png"):("context"==Recaptcha.theme?(e=RecaptchaTemplates.VertCss,a=RecaptchaTemplates.ContextHtml):(e=RecaptchaTemplates.VertCss,a=RecaptchaTemplates.VertHtml),b="gif"),e=e.replace(/IMGROOT/g,f),Recaptcha._set_style(e),Recaptcha.widget.innerHTML="<div id='recaptcha_area'>"+a+"</div>",c("recaptcha_reload").src=f+"/refresh."+b,c("recaptcha_switch_audio").src=f+"/audio."+b,c("recaptcha_switch_img").src=f+"/text."+b,c("recaptcha_whatsthis").src=f+"/help."+b,"clean"==Recaptcha.theme&&(c("recaptcha_logo").src=f+"/logo."+b,c("recaptcha_tagline").src=f+"/tagline."+b),c("recaptcha_reload").alt=d.refresh_btn,c("recaptcha_switch_audio").alt=d.audio_challenge,c("recaptcha_switch_img").alt=d.visual_challenge,c("recaptcha_whatsthis").alt=d.help_btn,c("recaptcha_reload_btn").href="javascript:Recaptcha.reload ();",c("recaptcha_reload_btn").title=d.refresh_btn,c("recaptcha_switch_audio_btn").href="javascript:Recaptcha.switch_type('audio');",c("recaptcha_switch_audio_btn").title=d.audio_challenge,c("recaptcha_switch_img_btn").href="javascript:Recaptcha.switch_type('image');",c("recaptcha_switch_img_btn").title=d.visual_challenge,c("recaptcha_whatsthis_btn").href=Recaptcha._get_help_link(),c("recaptcha_whatsthis_btn").target="_blank",c("recaptcha_whatsthis_btn").title=d.help_btn,c("recaptcha_whatsthis_btn").onclick=function(){return Recaptcha.showhelp(),!1},c("recaptcha_table").className="recaptchatable recaptcha_theme_"+Recaptcha.theme,c("recaptcha_instructions_image")&&c("recaptcha_instructions_image").appendChild(document.createTextNode(d.instructions_visual)),c("recaptcha_instructions_context")&&c("recaptcha_instructions_context").appendChild(document.createTextNode(d.instructions_context)),c("recaptcha_instructions_audio")&&c("recaptcha_instructions_audio").appendChild(document.createTextNode(d.instructions_audio)),c("recaptcha_instructions_error")&&c("recaptcha_instructions_error").appendChild(document.createTextNode(d.incorrect_try_again))},_finish_widget:function(){var a=Recaptcha.$,b=RecaptchaStr,b=RecaptchaState,c=RecaptchaOptions,d=c.theme;switch(d){case"red":case"white":case"blackglass":case"clean":case"custom":case"context":break;default:d="red"}Recaptcha.theme||(Recaptcha.theme=d),"custom"!=Recaptcha.theme?Recaptcha._init_builtin_theme():Recaptcha._set_style(""),d=document.createElement("span"),d.id="recaptcha_challenge_field_holder",d.style.display="none",a("recaptcha_response_field").parentNode.insertBefore(d,a("recaptcha_response_field")),a("recaptcha_response_field").setAttribute("autocomplete","off"),a("recaptcha_image").style.width="300px",a("recaptcha_image").style.height="57px",Recaptcha.should_focus=!1,Recaptcha._set_challenge(b.challenge,"image"),c.tabindex&&(a("recaptcha_response_field").tabIndex=c.tabindex,"custom"!=Recaptcha.theme)&&(a("recaptcha_whatsthis_btn").tabIndex=c.tabindex,a("recaptcha_switch_img_btn").tabIndex=c.tabindex,a("recaptcha_switch_audio_btn").tabIndex=c.tabindex,a("recaptcha_reload_btn").tabIndex=c.tabindex),Recaptcha.widget&&(Recaptcha.widget.style.display=""),c.callback&&c.callback()},switch_type:function(a){var b=Recaptcha;b.type=a,b.reload("audio"==b.type?"a":"v")},reload:function(a){var b=Recaptcha,c=b.$,c=RecaptchaState;"undefined"==typeof a&&(a="r"),c=c.server+"reload?c="+c.challenge+"&k="+c.site+"&reason="+a+"&type="+b.type,RecaptchaOptions.lang&&(c+="&lang="+RecaptchaOptions.lang),RecaptchaOptions.includeContext&&(c+="&includeContext=1"),"undefined"!=typeof RecaptchaOptions.extra_challenge_params&&(c+="&"+RecaptchaOptions.extra_challenge_params),"audio"==b.type&&(c+=RecaptchaOptions.audio_beta_12_08?"&audio_beta_12_08=1":"&new_audio_default=1"),b.should_focus="t"!=a,b._add_script(c)},finish_reload:function(a,b){RecaptchaState.is_incorrect=!1,Recaptcha._set_challenge(a,b)},_set_challenge:function(a,b){var c=Recaptcha,d=RecaptchaState,e=c.$;if(d.challenge=a,c.type=b,e("recaptcha_challenge_field_holder").innerHTML="<input type='hidden' name='recaptcha_challenge_field' id='recaptcha_challenge_field' value='"+d.challenge+"'/>","audio"==b)e("recaptcha_image").innerHTML=Recaptcha.getAudioCaptchaHtml();else if("image"==b){var f=d.server+"image?c="+d.challenge;e("recaptcha_image").innerHTML="<img style='display:block;' height='57' width='300' src='"+f+"'/>"}Recaptcha._css_toggle("recaptcha_had_incorrect_sol","recaptcha_nothad_incorrect_sol",d.is_incorrect),Recaptcha._css_toggle("recaptcha_is_showing_audio","recaptcha_isnot_showing_audio","audio"==b),c._clear_input(),c.should_focus&&c.focus_response_field(),c._reset_timer()},_reset_timer:function(){var a=RecaptchaState;clearInterval(Recaptcha.timer_id),Recaptcha.timer_id=setInterval("Recaptcha.reload('t');",1e3*(a.timeout-300))},showhelp:function(){window.open(Recaptcha._get_help_link(),"recaptcha_popup","width=460,height=580,location=no,menubar=no,status=no,toolbar=no,scrollbars=yes,resizable=yes")},_clear_input:function(){var a=Recaptcha.$("recaptcha_response_field");a.value=""},_displayerror:function(a){var b=Recaptcha.$;b("recaptcha_image").innerHTML="",b("recaptcha_image").appendChild(document.createTextNode(a))},reloaderror:function(a){Recaptcha._displayerror(a)},_is_ie:function(){return navigator.userAgent.indexOf("MSIE")>0&&!window.opera},_css_toggle:function(a,b,c){var d=Recaptcha.widget;d||(d=document.body);var e=d.className,e=e.replace(RegExp("(^|\\s+)"+a+"(\\s+|$)")," "),e=e.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ");e+=" "+(c?a:b),d.className=e},_get_help_link:function(){var a=RecaptchaState,a="http://www.google.com/recaptcha/help?c="+a.challenge;return RecaptchaOptions.lang&&(a+="&lang="+RecaptchaOptions.lang),a},playAgain:function(){var a=Recaptcha.$;a("recaptcha_image").innerHTML=Recaptcha.getAudioCaptchaHtml()},getAudioCaptchaHtml:function(){var a=Recaptcha,b=RecaptchaState,c=Recaptcha.$,c=b.server+"image?c="+b.challenge;return 0==c.indexOf("https://")&&(c="http://"+c.substring(8)),b=b.server+"/img/audiocaptcha.swf?v2",a=a._is_ie()?'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="audiocaptcha" width="0" height="0" codebase="https://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"><param name="movie" value="'+b+'" /><param name="quality" value="high" /><param name="bgcolor" value="#869ca7" /><param name="allowScriptAccess" value="always" /></object><br/>':'<embed src="'+b+'" quality="high" bgcolor="#869ca7" width="0" height="0" name="audiocaptcha" align="middle" play="true" loop="false" quality="high" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer"></embed> ',c=(Recaptcha.checkFlashVer()?'<br/><a class="recaptcha_audio_cant_hear_link" href="#" onclick="Recaptcha.playAgain(); return false;">'+RecaptchaStr.play_again+"</a>":"")+'<br/><a class="recaptcha_audio_cant_hear_link" target="_blank" href="'+c+'">'+RecaptchaStr.cant_hear_this+"</a>",a+c},gethttpwavurl:function(){var a=RecaptchaState;return"audio"==Recaptcha.type?(a=a.server+"image?c="+a.challenge,0==a.indexOf("https://")&&(a="http://"+a.substring(8)),a):""},checkFlashVer:function(){var a=-1!=navigator.appVersion.indexOf("MSIE")?!0:!1,b=-1!=navigator.appVersion.toLowerCase().indexOf("win")?!0:!1,c=-1!=navigator.userAgent.indexOf("Opera")?!0:!1,d=-1;if(null!=navigator.plugins&&navigator.plugins.length>0)(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",a=navigator.plugins["Shockwave Flash"+a].description,a=a.split(" "),a=a[2].split("."),d=a[0]);else if(a&&b&&!c)try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),f=e.GetVariable("$version"),d=f.split(" ")[1].split(",")[0]}catch(g){}return d>=9},getlang:function(){return RecaptchaOptions.lang}};define("recaptcha",function(a){return function(){var b;return b||a.Recaptcha}}(this)),function(a,b,c){"use strict";a("eb/apps/authentication/authentication_form_mixin",["require","eb/backbone/mixins","eb/apps/authentication/errors","recaptcha","eb/apps/authentication/analytics"],function(a){var b=a("eb/backbone/mixins"),d=a("eb/apps/authentication/errors"),e=a("recaptcha"),f=a("eb/apps/authentication/analytics");return function(){this.mixin([b.rejectIfServerValidationErrors,b.rejectWithServerErrors]),this.after("initialize",function(){c.bindAll(this,"handleSubmit","getClientSideErrors","handleSubmitSuccess","startSubmitting","stopSubmitting","reEnableForm","disableForm","displayNotification"),this.isSubmitting=!1,this.errors=this.options.errors||this.errors||{}}),this.clobber({processServerValidationErrors:function(a){return this.transformServiceErrorCodes(a.errors)},handleFormLevelError:function(a){this.displayFormError="function"==typeof a?a.bind(this):function(){this.displayNotification({message:a})}.bind(this),this.updateNotifications()}}),this.after("onRender",function(){var a=!0;"object"==typeof document&&(a="placeholder"in document.createElement("input")),a||this.$("[placeholder]").placeholder()}),this.after("showFieldValidationError",function(a){"captcha"===a&&(this.$(".js-captcha-form-row").removeClass("is-hidden"),e.create(this.recaptchaPublicKey,this.$(".js-captcha-field")[0],{theme:"white",callback:e.focus_response_field}))}),this.after("hideFieldValidationError",function(a){if("captcha"===a){{this.$(".js-captcha-form-row").addClass("is-hidden")}this.$(".js-captcha-field").empty()}}),this.setDefaults({getServiceErrorCodeMapping:function(){return{}},updateNotifications:function(){this.displayFormError&&this.displayFormError()},getClientSideErrors:function(){return{}},handleSubmitSuccess:function(a){f.trackSubmitSuccess(),this.redirectToURL(a.redirect_url)},displayNotification:function(a){this.options.sandbox.execute("authentication:notification:show",a.message,a.events)},hideNotification:function(){this.options.sandbox.execute("authentication:notification:hide")},redirectToURL:function(a){window.location.href=a},disableForm:function(){this.$("input, button").attr("disabled",!0),this.$("button").addClass("btn--large--loader")},reEnableForm:function(){this.$("input, button").attr("disabled",!1),this.$("button").removeClass("btn--large--loader")},stopSubmitting:function(){this.reEnableForm(),this.isSubmitting=!1},startSubmitting:function(){this.displayFormError=null,this.disableForm(),this.isSubmitting=!0},getFormData:function(){var a={};return this.addCaptchaFieldsToRequestData(a),a},_isPartiallyRegisteredUser:function(){return this.user_exists&&!this.is_activated?!0:!1},handleSubmit:function(a){if(a.preventDefault(),this.isSubmitting)return!1;var b=this.getClientSideErrors(),d=c.isEmpty(b);if(d){if(this._isPartiallyRegisteredUser())return this.sendActivationEmail(),!1;this.startSubmitting(),this.doSubmit(this.getFormData()).pipe(this.rejectIfServerValidationErrors,this.rejectWithServerErrors).done(this.handleSubmitSuccess).fail(this.stopSubmitting).fail(this.displayValidationErrors)}else this.displayValidationErrors(b);return!1},transformServiceErrorCodes:function(a){var b={},d=this.getServiceErrorCodeMapping();return c.extend(d,this.getCaptchaErrorCodeMapping()),d.__all__=d.__all__||{},Object.keys(a).forEach(function(e){if(d[e]){var f=c.compact(c.map(a[e],function(a){return d[e][a]})),g=d[e].FALLBACK_ERROR;f.length>0?c.extend(b,c.first(f)):g&&("function"==typeof g.__all__&&(g.__all__=c.partial(g.__all__,c.first(a[e]))),c.extend(b,g))}else b[e]=c.first(a[e])}),b},addCaptchaFieldsToRequestData:function(a){this.errors.captcha&&(a.recaptcha_challenge_field=e.get_challenge(),a.recaptcha_response_field=e.get_response())},getCaptchaErrorCodeMapping:function(){return{captcha:{REQUIRED:{captcha:d.REQUIRED_FIELD_ERROR},INCORRECT_SOLUTION:{captcha:d.CAPTCHA_INCORRECT_SOLUTION},FALLBACK_ERROR:{__all__:d.SERVER_ERROR}}}}})}})}(window.define,window.jQuery,window._),function(a,b,c){a("eb/apps/authentication/user_password_backend_mixin",["require","jquery-placeholder","eb/backbone/mixins","eb/apps/authentication/errors","eb/apps/authentication/authentication_form_mixin","eb/analytics","mediatorjs"],function(a){"use strict";a("jquery-placeholder");var b=(a("eb/backbone/mixins"),a("eb/apps/authentication/errors"),a("eb/apps/authentication/authentication_form_mixin")),d=(a("eb/analytics"),a("mediatorjs"));return function(){this.mixin(b),this.after("initialize",function(){c.bindAll(this,"handleActivationSent","handleResetPasswordClick","rejectIfActivationEmailNotSent","sendActivationEmail","handleEmailChange","handleUserExistenceResult"),this.emailsAttempted=0,this.listenTo(this.model,"change:email",this.handleEmailChange)}),this.addToObj({events:{'click [type="submit"]':"handleSubmit","click .js-authentication-reset-password":"handleResetPasswordClick"}}),this.before("stickit",function(){if(this.options.isPreRendered){var a=this.$('[name="email"]'),b=this.$('[name="password"]'),c=this.$('[name="remember_me"]');this.model.set("email",a.val()),this.model.set("passwd",b.val()),c.length&&this.model.set("remember_me",c[0].checked)}}),this.after("onRender",function(){this.model.get("email")&&!this.$('[name="email"]').is(":focus")&&(this.handleEmailChange(),this.onSet(this.model.get("email"),{observe:"email"}))}),this.setDefaults({doSubmit:function(){throw Error("`doSubmit` not implemented")},_generateResetPasswordConversionType:function(a){var b=a?[a]:[];return b.push("reset_password_click"),b.join("_")},handleResetPasswordClick:function(a){$(a.target).data("source");this.model.get("email")&&(a.preventDefault(),document.location.href="/resetpassword?email="+this.model.get("email"))},handleEmailChange:function(){this.displayFormError=null;var a,b=d.get("AuthAppConfig");b&&void 0!==b.userAttributes&&(a=this.model.set("forward",b.userAttributes.forward));var c=this.model.get("email");c&&this.model.isValid("email")&&(this.model.checkUserExists().done(this.handleUserExistenceResult),this.emailsAttempted=this.emailsAttempted+1)},handleUserExistenceResult:function(a){this.user_exists=a.user_exists,this.is_activated=a.is_activated,this.updateNotifications()},sendActivationEmail:function(){return this.model.activate({activationDestination:window.location.pathname+window.location.search+window.location.hash,useSSLDestination:!0,preserveTLD:!0}).pipe(this.rejectIfActivationEmailNotSent,this.rejectWithServerErrors).done(this.handleActivationSent)},handleActivationSent:function(){this.options.sandbox.execute("authentication:navigate:activation_sent",this.model.get("email"),this.options.formViewType)},rejectIfActivationEmailNotSent:function(a){return a.activation_email_sent?a:this.rejectWithServerErrors()}})}})}(window.define,window.jQuery,window._),function(a,b,c,d){a("eb/apps/authentication/get_tickets/get_tickets",["require","backbone_stickit","backbone_validation","templates/build/authentication","eb/apps/authentication/errors","eb/backbone/mixins","marionette","eb/models/user_model","eb/apps/authentication/user_password_backend_mixin"],function(a){"use strict";a("backbone_stickit"),a("backbone_validation"),a("templates/build/authentication");var b=a("eb/apps/authentication/errors"),e=a("eb/backbone/mixins"),f=a("marionette"),g=(a("eb/models/user_model"),a("eb/apps/authentication/user_password_backend_mixin"));return f.ItemView.extend({requiredOptions:["sandbox","recaptchaPublicKey"],bindings:{'[name="email"]':"email"},ui:{emailField:'[name="email"]',submitButton:'[type="submit"]'},getTemplate:function(){return window.Handlebars.templates.authentication_get_tickets},getClientSideErrors:function(){var a=this.model.validate(void 0,{forceUpdate:!1});return a&&a.email?{email:a.email}:void 0},initialize:function(){c.bindAll(this,"checkUserExistsDoneFilter","doSubmit"),this.user_exists=!0,this.is_activated=!0},displayNoUserExistsNotification:function(){this.displayNotification({message:d('Looks like you don\'t have an account yet. Let\'s change that! <a class="js-notification-click" href="/signup/">Sign up for free.</a>'),events:{"click .js-notification-click":this.handleSwitchToSignUpClick},conversionType:"get_tickets_notification_no_user_exists"})},handleSubmitSuccess:function(){this.sandbox.execute("authentication:navigate:get_tickets_login")},handleEmailChange:function(){this.displayFormError=null},checkUserExistsDoneFilter:function(a){return a.user_exists?a.is_activated?(a.success=!0,a):this.sendActivationEmail():$.Deferred().resolve({errors:{email:["UNKNOWN"]},success:!1})},doSubmit:function(a){return c.defaults(a,this.getFormData()),this.model.checkUserExists().pipe(this.checkUserExistsDoneFilter)},getServiceErrorCodeMapping:function(){return{email:{UNKNOWN:{__all__:this.displayNoUserExistsNotification},REQUIRED:{email:b.REQUIRED_FIELD_ERROR}}}}}).mixin([e.withStickitForMarionette,e.withInputValidation,g,e.enforceDependencies])})}(window.define,window.jQuery,window._,window.gettext),function(a,b,c,d){"use strict";a("eb/apps/authentication/user_password/login",["require","backbone_stickit","backbone_validation","templates/build/authentication","eb/apps/authentication/errors","eb/backbone/mixins","marionette","eb/apps/authentication/user_password_backend_mixin","eb/apps/authentication/analytics"],function(a){a("backbone_stickit"),a("backbone_validation"),a("templates/build/authentication");var e=a("eb/apps/authentication/errors"),f=a("eb/backbone/mixins"),g=a("marionette"),h=a("eb/apps/authentication/user_password_backend_mixin"),i=a("eb/apps/authentication/analytics");return g.ItemView.extend({requiredOptions:["sandbox","recaptchaPublicKey"],bindings:{'[name="email"]':"email",'[name="password"]':"passwd",'[name="remember_me"]':"remember_me"},events:{'change [name="remember_me"]':"handleRememberMeToggle"},template:window.Handlebars.templates.authentication_login,getClientSideErrors:function(){return this.model.validate(void 0,{forceUpdate:!1})},initialize:function(){c.bindAll(this,"doSubmit","handleSwitchToSignUpClick","handleRememberMeToggle"),this.user_exists=!0,this.is_activated=!0},serializeData:function(){return{isEmailDisabled:this.options.isEmailDisabled}},updateNotifications:function(){this.user_exists?this.errors.__all__&&this.displayFormError?this.displayFormError():this.hideNotification():this.displayNoUserExistsNotification()},displayPasswordInvalidError:function(){this.displayNotification({message:d('Hmmm, we don\'t recognize that password. Please try again, or <a class="js-authentication-reset-password" data-source="login_notification_invalid_password" href="/resetpassword">reset your password.</a>'),events:{"click .js-authentication-reset-password":this.handleResetPasswordClick},conversionType:"login_notification_invalid_password"})},displaySuspensionError:function(){this.displayNotification({message:d("Your account has been suspended."),events:{},conversionType:"login_notification_suspension"})},handleSwitchToSignUpClick:function(a){return a.preventDefault(),this.options.sandbox.execute("authentication:navigate:signup"),!1},handleRememberMeToggle:function(a){var b=a.currentTarget,c=$(b).prop("checked");i.trackRememberMeToggle(c)},displayNoUserExistsNotification:function(){this.displayNotification({message:d('Looks like you don\'t have an account yet. Let\'s change that! <a class="js-notification-click" href="/signup/">Sign up for free.</a>'),events:{"click .js-notification-click":this.handleSwitchToSignUpClick},conversionType:"login_notification_no_user_exists"})},displayForceResetPasswordError:function(){this.displayNotification({message:d('Your password has expired. Please <a class="js-authentication-reset-password" data-source="login_notification_force_reset" href="/resetpassword">reset your password.</a>'),events:{"click .js-authentication-reset-password":this.handleResetPasswordClick},conversionType:"login_notification_force_password_reset"})},getFormData:function(){var a={email:this.model.get("email"),password:this.model.get("passwd"),referrer:this.model.get("referrer"),forward:this.model.get("forward"),remember_me:this.model.get("remember_me"),auth_backend:"user_password"};return a},doSubmit:function(a){return c.defaults(a,this.getFormData()),b.ajax({url:"/ajax/login/",type:"POST",data:a}).promise()},getServiceErrorCodeMapping:function(){return{__all__:{LOCKED_ACCOUNT:{__all__:this.displayPasswordInvalidError},SUSPENDED_ACCOUNT:{__all__:this.displaySuspensionError},CREDENTIALS_MUST_CHANGE:{__all__:this.displayForceResetPasswordError}},password:{INVALID:{__all__:this.displayPasswordInvalidError},REQUIRED:{passwd:e.REQUIRED_FIELD_ERROR}},email:{UNKNOWN:{__all__:this.displayNoUserExistsNotification},REQUIRED:{email:e.REQUIRED_FIELD_ERROR}}}}}).mixin([f.withStickitForMarionette,f.withInputValidation,h,f.enforceDependencies])})}(window.define,window.jQuery,window._,window.gettext),function(a,b,c,d){"use strict";a("eb/apps/authentication/user_password/signup",["require","eb/apps/authentication/errors","eb/backbone/mixins","marionette","eb/apps/authentication/user_password_backend_mixin","dorsal","backbone_stickit","backbone_validation","templates/build/authentication"],function(a){var e=a("eb/apps/authentication/errors"),f=a("eb/backbone/mixins"),g=a("marionette"),h=a("eb/apps/authentication/user_password_backend_mixin"),i=a("dorsal");return a("backbone_stickit"),a("backbone_validation"),a("templates/build/authentication"),g.ItemView.extend({requiredOptions:["sandbox","locale","recaptchaPublicKey"],bindings:{'[name="email"]':"email",'[name="password"]':"passwd"},template:window.Handlebars.templates.authentication_signup,getClientSideErrors:function(){return this.model.validate(void 0,{forceUpdate:!1})},initialize:function(){c.bindAll(this,"doSubmit","displayExistingAccountNotification","handleSwitchToLogInClick"),this.user_exists=!1,this.is_activated=!0,this.signUpPage=this.options.signUpPage,this.userType=this.options.userType,this.userTypeSig=this.options.userTypeSig},onRender:function(){this.options.fp&&i.wire($(".js-fp").get(0),"fp")},updateNotifications:function(){this.user_exists?this.is_activated&&this.displayExistingAccountNotification():this.displayFormError?this.displayFormError():this.hideNotification()},handleSwitchToLogInClick:function(a){return a.preventDefault(),this.options.sandbox.execute("authentication:navigate:login"),!1},displayExistingAccountNotification:function(){this.displayNotification({message:d("Looks like this email is already associated with an Eventbrite account.")+' <a class="js-notification-click" href="/login/">'+d("Log in.")+"</a>",events:{"click .js-notification-click":this.handleSwitchToLogInClick},conversionType:"signup_notification_existing_account"})},getSignUpConditionsHtml:function(){return"en_US"===this.locale?'By signing up, I agree to Eventbrite\'s <a href="/tos" target="_blank" class="js-d-track-event" data-event-action="Tos" data-event-category="signup">terms of service</a>, <a href="/privacypolicy" target="_blank" class="js-d-track-event" data-event-action="PrivacyPolicy" data-event-category="signup">privacy policy</a>, and <a href="/cookies" target="_blank" class="js-d-track-event" data-event-action="CookiePolicy" data-event-category="signup">cookie policy</a>.':d('By signing up, I agree to Eventbrite\'s <a href="/tos" target="_blank" class="js-d-track-event" data-event-action="Tos" data-event-category="signup">terms of service</a>, <a href="/privacypolicy" target="_blank" class="js-d-track-event" data-event-action="PrivacyPolicy" data-event-category="signup">privacy policy</a>, and <a href="/cookies" target="_blank" class="js-d-track-event" data-event-action="CookiePolicy" data-event-category="signup">cookie policy</a> and consent to receiving marketing communications from Eventbrite.')},serializeData:function(){return{signUpConditionsHtml:this.getSignUpConditionsHtml()}},doSubmit:function(a){return c.extend(a,{email:this.model.get("email"),password:this.model.get("passwd"),referrer:this.model.get("referrer"),forward:this.model.get("forward"),user_type:this.userType,user_type_sig:this.userTypeSig,signup_page:this.signUpPage,emails_attempted:this.emailsAttempted,auth_backend:"user_password",meta_http_referer:this.options.meta_http_referer}),b.ajax({url:"/ajax/signup_action/",type:"POST",data:a}).promise()},getServiceErrorCodeMapping:function(){return{__all__:{SIGNUP_GATED:{__all__:e.SERVER_ERROR}},password:{MINIMUM_LENGTH_4:{passwd:e.MINIMUM_LENGTH_4_PASSWORD_ERROR},REQUIRED:{passwd:e.REQUIRED_FIELD_ERROR}},email:{INVALID:{email:e.INVALID_EMAIL_ERROR},ALREADY_REGISTERED:{__all__:this.displayExistingAccountNotification},REQUIRED:{email:e.REQUIRED_FIELD_ERROR}},user_type:{FALLBACK_ERROR:{__all__:this.displayUserTypeErrorAndClear}}}},displayUserTypeErrorAndClear:function(){this.userType=void 0,this.userTypeSig=void 0,this.displayNotification({message:e.SERVER_ERROR,conversionType:"signup_notification_user_type_error"})}}).mixin([f.withStickitForMarionette,f.withInputValidation,h,f.enforceDependencies])})}(window.define,window.jQuery,window._,window.gettext),define("eb/apps/authentication/claim_tickets/claim_tickets_signup",["require","backbone_stickit","backbone_validation","templates/build/authentication","eb/apps/authentication/errors","eb/backbone/mixins","eb/apps/authentication/user_password_backend_mixin","eb/apps/authentication/user_password/signup"],function(a){"use strict";a("backbone_stickit"),a("backbone_validation"),a("templates/build/authentication");var b=a("eb/apps/authentication/errors"),c=a("eb/backbone/mixins"),d=a("eb/apps/authentication/user_password_backend_mixin"),e=a("eb/apps/authentication/user_password/signup");return e.extend({requiredOptions:["sandbox","locale"],bindings:{'[name="email"]':"email",'[name="password"]':"passwd",'[name="token"]':"token"},updateNotifications:function(){this.displayFormError?this.displayFormError():this.hideNotification()},handleSubmit:function(a){if(a.preventDefault(),this.isSubmitting)return!1;var b=this.getClientSideErrors(),c=_.isEmpty(b);return c?(this.startSubmitting(),this.doSubmit(this.getFormData()).then(this.rejectIfServerValidationErrors,this.rejectWithServerErrors).done(this.handleSubmitSuccess).fail(this.stopSubmitting).fail(this.displayValidationErrors)):this.displayValidationErrors(b),!1},doSubmit:function(a){return _.extend(a,{email:this.model.get("email"),passwd:this.model.get("passwd"),token:this.options.token,signup_page:this.signUpPage,auth_backend:"user_password"}),jQuery.ajax({url:"/ajax/claim_tickets_signup_action/",type:"POST",data:a}).done(function(){window.location.href="/mytickets"})},getServiceErrorCodeMapping:function(){return{__all__:{SIGNUP_GATED:{__all__:b.SERVER_ERROR}},password:{MINIMUM_LENGTH_4:{password:b.MINIMUM_LENGTH_4_PASSWORD_ERROR},REQUIRED:{password:b.REQUIRED_FIELD_ERROR}},email:{INVALID:{email:b.INVALID_EMAIL_ERROR},REQUIRED:{email:b.REQUIRED_FIELD_ERROR}}}}}).mixin([c.withStickitForMarionette,c.withInputValidation,d,c.enforceDependencies])}),define("hb!templates/src/eb/authentication/authentication_claim_tickets_login.handlebars",["handlebars.runtime"],function(a){return a["default"].template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h,i="",j=c.helperMissing,k=this.escapeExpression,l="function";return i+='<div class="l-block-3">\n    <label class="is-hidden-accessible" for="login-email">',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Email address",h):j.call(b,"_","Email address",h)))+'</label>\n    <input\n        name="email"\n        type="email"\n        value="',(g=c.email)?g=g.call(b,{hash:{},data:e}):(g=b&&b.email,g=typeof g===l?g.call(b,{hash:{},data:e}):g),i+=k(g)+'"\n        placeholder="',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Email",h):j.call(b,"_","Email",h)))+'"\n        disabled="disabled"\n        id="login-email"\n    />\n    <div class="js-error-for-email form__field-error is-hidden"></div>\n</div>\n<div class="l-block-3">\n    <label class="is-hidden-accessible" for="login-password">',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Password",h):j.call(b,"_","Password",h)))+'</label>\n    <input name="password" type="password" placeholder="',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Password",h):j.call(b,"_","Password",h)))+'" id="login-password">\n    <div class="js-error-for-passwd form__field-error is-hidden"></div>\n</div>\n<div class="js-captcha-form-row l-block-3 is-hidden">\n    <div class="js-captcha-field"></div>\n    <div class="js-error-for-captcha form__field-error is-hidden"></div>\n</div>\n<div>\n    <input type="hidden" name="token" value="',(g=c.token)?g=g.call(b,{hash:{},data:e}):(g=b&&b.token,g=typeof g===l?g.call(b,{hash:{},data:e}):g),i+=k(g)+'"/>\n</div>\n<div class="l-block-3">\n    <input type="submit" class="btn btn--block" value="',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Continue",h):j.call(b,"_","Continue",h)))+'"/>\n</div>\n<div class="l-block-3 form__row">\n    <input id="remember_me" name="remember_me" type="checkbox" checked="true">\n    <label for="remember_me" class="text-body-small">',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Remember me",h):j.call(b,"_","Remember me",h)))+'</label>\n    <a class="js-authentication-reset-password authentication__forgot-password layout-stackable__aside text-body-small js-d-track-link" data-event-action="ForgotPwd" data-event-category="login" data-source="login_footer" href="/resetpassword">',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Forgot password?",h):j.call(b,"_","Forgot password?",h)))+"</a>\n</div>\n"
})}),define("hb!templates/src/eb/authentication/authentication_claim_tickets_signup.handlebars",["handlebars.runtime"],function(a){return a["default"].template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h,i="",j=c.helperMissing,k=this.escapeExpression,l="function";return i+='<div class="l-block-3">\n    <label class="is-hidden-accessible" for="signup-email">',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Email address",h):j.call(b,"_","Email address",h)))+'</label>\n    <input name="email" type="email" value="" placeholder="',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Email",h):j.call(b,"_","Email",h)))+'" id="signup-email">\n    <div class="js-error-for-email form__field-error is-hidden"></div>\n</div>\n<div class="l-block-3">\n    <label class="is-hidden-accessible" for="signup-password">',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Set password",h):j.call(b,"_","Set password",h)))+'</label>\n    <input name="password" type="password" placeholder="',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Set password",h):j.call(b,"_","Set password",h)))+'" id="signup-password">\n    <div class="js-error-for-passwd form__field-error is-hidden"></div>\n</div>\n<div class="js-captcha-form-row l-block-3 is-hidden">\n    <div class="js-captcha-field"></div>\n    <div class="js-error-for-captcha form__field-error is-hidden"></div>\n</div>\n<div>\n    <input name="token" type="hidden" value="',(g=c.token)?g=g.call(b,{hash:{},data:e}):(g=b&&b.token,g=typeof g===l?g.call(b,{hash:{},data:e}):g),i+=k(g)+'"/>\n</div>\n<div class="l-block-3">\n    <input type="submit" class="btn btn--block" value="',h={hash:{},data:e},i+=k((f=c._||b&&b._,f?f.call(b,"Continue",h):j.call(b,"_","Continue",h)))+'"/>\n</div>\n<p class="l-block-2 has-centered-inline-content text-body-small">\n    ',(g=c.signUpConditionsHtml)?g=g.call(b,{hash:{},data:e}):(g=b&&b.signUpConditionsHtml,g=typeof g===l?g.call(b,{hash:{},data:e}):g),(g||0===g)&&(i+=g),i+="\n</p>\n"})}),define("eb/apps/authentication/component",["require","eb/apps/authentication/pre_render_patches","eb/apps/authentication/layout","eb/backbone/mixins","eb/_backbone/component_factory","eb/apps/authentication/get_tickets/get_tickets","eb/apps/authentication/user_password/login","marionette","eb/apps/authentication/user_password/signup","eb/apps/authentication/claim_tickets/claim_tickets_signup","eb/models/user_model","eb/apps/authentication/analytics","hb!templates/src/eb/authentication/authentication_claim_tickets_login.handlebars","hb!templates/src/eb/authentication/authentication_claim_tickets_signup.handlebars","gettext"],function(a){"use strict";var b=a("eb/apps/authentication/pre_render_patches"),c=a("eb/apps/authentication/layout"),d=a("eb/backbone/mixins"),e=a("eb/_backbone/component_factory"),f=a("eb/apps/authentication/get_tickets/get_tickets"),g=a("eb/apps/authentication/user_password/login"),h=a("marionette"),i=a("eb/apps/authentication/user_password/signup"),j=a("eb/apps/authentication/claim_tickets/claim_tickets_signup"),k=a("eb/models/user_model"),l=a("eb/apps/authentication/analytics"),m=a("hb!templates/src/eb/authentication/authentication_claim_tickets_login.handlebars"),n=a("hb!templates/src/eb/authentication/authentication_claim_tickets_signup.handlebars"),o=a("gettext");return e.extend({initialize:function(a){this.options=a,this.region=new h.Region({el:this.el}),this.isPreRendered=this.options.isPreRendered},start:function(){var a={signup:"authentication:navigate:signup",login:"authentication:navigate:login",get_tickets:"authentication:navigate:get_tickets",claim_tickets_login:"authentication:navigate:claim_tickets_login",claim_tickets_signup:"authentication:navigate:claim_tickets_signup"};this.initializeUserModel(),this.sandbox.execute(a[this.initialAuthAction])},componentMethods:{requiredOptions:["initialAuthAction","recaptchaPublicKey","locale","el","userAttributes","isPreRendered"],initializeUserModel:function(){this.model=new k(this.userAttributes)},displayInitialErrors:function(a){var b;_.isEmpty(this.options.initialErrors)||(b=a.processServerValidationErrors({errors:this.options.initialErrors}),a.displayValidationErrors(b),this.options.initialErrors=null)},initialPageTitles:function(){return{login:window.gettext("Eventbrite - Log in to your Eventbrite account"),signup:window.gettext("Eventbrite - Sign up for an Eventbrite account")}},updatePageTitle:function(){var a;this.options.dynamicPageTitle===!0&&(a=this.initialPageTitles(),$("title").text(a[this.options.initialAuthAction]))},renderView:function(a){this.isPreRendered?(this.layout=new c({heading:a.heading,byLine:a.byLine,sandbox:this.sandbox,activation_layout:a.activation_layout,email:a.email,fp:a.fp,el:$(this.el).find(".js-authentication-layout")}),a.view.setElement($(this.el).find(".js-current-component")),this.layout.render=b.renderLayoutWithExistingEl.bind(this.layout),a.view.render=b.renderItemViewWithExistingEl.bind(a.view),this.region.showWithExistingEl=b.showWithExistingEl.bind(this.region),this.layout.content.showWithExistingEl=b.showWithExistingEl.bind(this.layout.content),this.region.showWithExistingEl(this.layout),this.layout.content.showWithExistingEl(a.view)):(this.layout=new c({heading:a.heading,byLine:a.byLine,sandbox:this.sandbox,activation_layout:a.activation_layout,email:a.email,fp:a.fp}),this.region.reset(),this.region.show(this.layout),this.layout.content.show(a.view)),this.displayInitialErrors(a.view),this.isPreRendered=!1}},commands:{"authentication:navigate:login":function(){var a=new g({model:this.model,sandbox:this.sandbox,recaptchaPublicKey:this.options.recaptchaPublicKey,isPreRendered:this.isPreRendered,formViewType:"login"});this.renderView({view:a,heading:window.gettext("Log in"),byLine:'<a class="js-switch-to-signup mfp-prevent-close js-d-track-event" data-event-action="SignupAttempt" data-event-category="login" data-event-label="switch" href="/signup/">'+window.gettext("Or, sign up.")+"</a>"}),this.options.initialAuthAction="login",l.trackJanusCheckpoint("login_form_viewed"),this.updatePageTitle()},"authentication:navigate:signup":function(){var a=_.pick(this.options,"recaptchaPublicKey","locale","signUpPage","userType","userTypeSig","meta_http_referer","fp"),b=new i(_.extend(a,{model:this.model,sandbox:this.sandbox,isPreRendered:this.isPreRendered,formViewType:"signup"}));this.renderView({view:b,heading:window.gettext("Sign up"),fp:a.fp,byLine:window.gettext("Already have an account?")+' <a class="js-switch-to-login mfp-prevent-close js-d-track-event" data-event-action="LoginAttempt" data-event-category="signup" data-event-label="switch" href="/login/">'+window.gettext("Log in.")+"</a>"}),this.options.initialAuthAction="signup",l.trackJanusCheckpoint("signup_form_viewed"),this.updatePageTitle()},"authentication:navigate:get_tickets":function(){var a=new f({model:this.model,sandbox:this.sandbox,recaptchaPublicKey:this.options.recaptchaPublicKey,locale:this.options.locale,isPreRendered:this.isPreRendered,formViewType:"get_tickets"});this.renderView({view:a,heading:window.gettext("Access your account"),byLine:"",formByLine:window.gettext("Enter the email you used to register for the event")}),this.options.initialAuthAction="get_tickets",l.trackJanusCheckpoint("gettickets_form_viewed")},"authentication:navigate:get_tickets_login":function(){var a=new g({model:this.model,sandbox:this.sandbox,recaptchaPublicKey:this.options.recaptchaPublicKey,isPreRendered:this.isPreRendered,isEmailDisabled:!0});this.renderView({view:a,heading:window.gettext("Access your account"),byLine:""})},"authentication:navigate:activation_sent":function(a,b){var c,d,e;e=new(h.ItemView.extend({getTemplate:function(){return window.Handlebars.templates.authentication_activation_sent}})),c=o("Welcome back!"),d=o("To access your account, please confirm your email address by clicking the link in the email we just sent."),"signup"===b?(c=window.gettext("Check your email"),l.trackJanusCheckpoint("signup_no_password_account")):l.trackJanusCheckpoint("login_no_password_account"),this.renderView({view:e,heading:c,byLine:d,email:a,activation_layout:!0})},"authentication:navigate:claim_tickets_login":function(){var a=new g({model:this.model,sandbox:this.sandbox,recaptchaPublicKey:this.options.recaptchaPublicKey,isPreRendered:this.isPreRendered,token:this.options.token,template:m});this.renderView({view:a,heading:window.gettext("Access your account"),byLine:""})},"authentication:navigate:claim_tickets_signup":function(){var a=new j({model:this.model,sandbox:this.sandbox,recaptchaPublicKey:this.options.recaptchaPublicKey,locale:this.options.locale,signUpPage:this.options.signUpPage,token:this.options.token,isPreRendered:this.isPreRendered,formViewType:"claim_tickets_signup",template:n});this.renderView({view:a,heading:window.gettext("Access your account"),byLine:""})},"authentication:notification:show":function(a,b){this.layout.showNotification(a,b)},"authentication:notification:hide":function(){this.layout.hideNotification()}},requests:{}}).mixin(d.enforceDependencies)}),function(a){"function"==typeof define?define("vendor/es5-sham",a):"function"==typeof YUI?YUI.add("es5-sham",a):a()}(function(){function a(a){try{return a.sentinel=0,0===Object.getOwnPropertyDescriptor(a,"sentinel").value}catch(b){}}function b(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}var c,d,e,f,g,h=Function.prototype.call,i=Object.prototype,j=h.bind(i.hasOwnProperty);if((g=j(i,"__defineGetter__"))&&(c=h.bind(i.__defineGetter__),d=h.bind(i.__defineSetter__),e=h.bind(i.__lookupGetter__),f=h.bind(i.__lookupSetter__)),Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__||(a.constructor?a.constructor.prototype:i)}),Object.defineProperty){var k=a({}),l="undefined"==typeof document||a(document.createElement("div"));if(!l||!k)var m=Object.getOwnPropertyDescriptor}if(!Object.getOwnPropertyDescriptor||m){var n="Object.getOwnPropertyDescriptor called on a non-object: ";Object.getOwnPropertyDescriptor=function(a,b){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(n+a);if(m)try{return m.call(Object,a,b)}catch(c){}if(j(a,b)){var d={enumerable:!0,configurable:!0};if(g){var h=a.__proto__;a.__proto__=i;var k=e(a,b),l=f(a,b);if(a.__proto__=h,k||l)return k&&(d.get=k),l&&(d.set=l),d}return d.value=a[b],d.writable=!0,d}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)}),!Object.create){var o,p=null===Object.prototype.__proto__;o=p||"undefined"==typeof document?function(){return{__proto__:null}}:function(){function a(){}var b=document.createElement("iframe"),c=document.body||document.documentElement;b.style.display="none",c.appendChild(b),b.src="javascript:";var d=b.contentWindow.Object.prototype;return c.removeChild(b),b=null,delete d.constructor,delete d.hasOwnProperty,delete d.propertyIsEnumerable,delete d.isPrototypeOf,delete d.toLocaleString,delete d.toString,delete d.valueOf,d.__proto__=null,a.prototype=d,o=function(){return new a},new a},Object.create=function(a,b){function c(){}var d;if(null===a)d=o();else{if("object"!=typeof a&&"function"!=typeof a)throw new TypeError("Object prototype may only be an Object or null");c.prototype=a,d=new c,d.__proto__=a}return void 0!==b&&Object.defineProperties(d,b),d}}if(Object.defineProperty){var q=b({}),r="undefined"==typeof document||b(document.createElement("div"));if(!q||!r)var s=Object.defineProperty,t=Object.defineProperties}if(!Object.defineProperty||s){var u="Property description must be an object: ",v="Object.defineProperty called on non-object: ",w="getters & setters can not be defined on this javascript engine";Object.defineProperty=function(a,b,h){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError(v+a);if("object"!=typeof h&&"function"!=typeof h||null===h)throw new TypeError(u+h);if(s)try{return s.call(Object,a,b,h)}catch(k){}if(j(h,"value"))if(g&&(e(a,b)||f(a,b))){var l=a.__proto__;a.__proto__=i,delete a[b],a[b]=h.value,a.__proto__=l}else a[b]=h.value;else{if(!g)throw new TypeError(w);j(h,"get")&&c(a,b,h.get),j(h,"set")&&d(a,b,h.set)}return a}}(!Object.defineProperties||t)&&(Object.defineProperties=function(a,b){if(t)try{return t.call(Object,a,b)}catch(c){}for(var d in b)j(b,d)&&"__proto__"!=d&&Object.defineProperty(a,d,b[d]);return a}),Object.seal||(Object.seal=function(a){return a}),Object.freeze||(Object.freeze=function(a){return a});try{Object.freeze(function(){})}catch(x){Object.freeze=function(a){return function(b){return"function"==typeof b?b:a(b)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(a){return a}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)!==a)throw new TypeError;for(var b="";j(a,b);)b+="?";a[b]=!0;var c=j(a,b);return delete a[b],c})}),define("eb/apps/authentication/auth_modal_view",["require","jquery","backbone","mediatorjs","eb-styleguide/js/ui_components/modal/modal_view","eb/ui_components/loading_view","logger","eb/apps/authentication/analytics","jquery.ba-bbq.1.2.1"],function(a){"use strict";{var b=a("jquery"),c=a("backbone"),d=a("mediatorjs"),e=a("eb-styleguide/js/ui_components/modal/modal_view"),f=a("eb/ui_components/loading_view"),g=a("logger");a("eb/apps/authentication/analytics")}a("jquery.ba-bbq.1.2.1");var h=c.View.extend({initialize:function(){_.bindAll(this,"create","openModal","openModalCallback","showSpinner","switchForm","loadAuthApp","showAuthModal","handleAuthClick"),d.get("AuthAppConfig").modalAuthRendered=!1,b(document).on("auth:showModal",b.proxy(function(a){this.showAuthModal({action:a.initialAuthAction,forward:a.forward,referrer:a.referrer})},this))},events:{"click .js-modal-auth":"handleAuthClick"},create:function(){this.Modal=new e,this.openModal(),this.showSpinner(),this.loadAuthApp()},openModal:function(){this.Modal.open({items:{src:"#auth-modal"},closeOnBgClick:"object"==typeof Touch?!1:!0,callbacks:{open:this.openModalCallback}})},openModalCallback:function(){this.options.container.find("input.placeholder").val("")},showSpinner:function(){this.LoadingView=new f,this.options.container.html(this.LoadingView.render().el)},switchForm:function(a){"signup"===a&&this.options.container.find(".js-switch-to-signup").trigger("click"),"login"===a&&this.options.container.find(".js-switch-to-login").trigger("click"),d.get("AuthAppConfig").initialAuthAction=a},loadAuthApp:function(){a(["eb/apps/authentication/app"],function(){d.get("AuthAppConfig").modalAuthRendered=!0})},showAuthModal:function(a){var b=d.get("AuthAppConfig");b.initialAuthAction=a.action,b.userAttributes.forward=a.forward,b.userAttributes.referrer=a.referrer||window.location.pathname+"?show_onboarding=1",b.userType=a.userType,b.userTypeSig=a.userTypeSig,b.modalAuthRendered?(this.switchForm(b.initialAuthAction),this.openModal()):this.create()},_getAuthModalOptions:function(a){var c=a.currentTarget.getAttribute("data-modal-auth-action"),d={action:c,forward:a.currentTarget.getAttribute("data-modal-auth-forward")||""};if(c&&"signup"===c&&a.currentTarget.href&&!d.forward){var e=b.deparam.querystring(a.currentTarget.href),f=e.user_type||!1,h=e.user_type_sig||!1;if(f&&h)d.userType=f,d.userTypeSig=h;else{var i="Missing user_type and/or user_type_sig at signup modal, referring url: "+a.currentTarget.href;g.warn(i)}}return d},handleAuthClick:function(a){var b=this._getAuthModalOptions(a);a.preventDefault(),this.showAuthModal(b)}});return h}),define("require/apps/global_nav/analytics",["require","eb/analytics"],function(a){"use strict";var b=a("eb/analytics"),c={helpAttempt:function(a,c){c.hasClass("gh-help")&&"click"!==a.type&&b.trackEvent({action:"helpAttempt",category:"header",label:"Help menu was viewed"})}};return c}),/**
* hoverIntent is similar to jQuery's built-in "hover" function except that
* instead of firing the onMouseOver event immediately, hoverIntent checks
* to see if the user's mouse has slowed down (beneath the sensitivity
* threshold) before firing the onMouseOver event.
* 
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* hoverIntent is currently available for use in all personal or commercial 
* projects under both MIT and GPL licenses. This means that you can choose 
* the license that best suits your project, and use it accordingly.
* 
* // basic usage (just like .hover) receives onMouseOver and onMouseOut functions
* $("ul li").hoverIntent( showNav , hideNav );
* 
* // advanced usage receives configuration object only
* $("ul li").hoverIntent({
*	sensitivity: 7, // number = sensitivity threshold (must be 1 or higher)
*	interval: 100,   // number = milliseconds of polling interval
*	over: showNav,  // function = onMouseOver callback (required)
*	timeout: 0,   // number = milliseconds delay before onMouseOut function call
*	out: hideNav    // function = onMouseOut callback (required)
* });
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
function(a){a.fn.hoverIntent=function(b,c){var d={sensitivity:7,interval:100,timeout:0};d=a.extend(d,c?{over:b,out:c}:b);var e,f,g,h,i=function(a){e=a.pageX,f=a.pageY},j=function(b,c){return c.hoverIntent_t=clearTimeout(c.hoverIntent_t),Math.abs(g-e)+Math.abs(h-f)<d.sensitivity?(a(c).unbind("mousemove",i),c.hoverIntent_s=1,d.over.apply(c,[b])):(g=e,h=f,c.hoverIntent_t=setTimeout(function(){j(b,c)},d.interval),void 0)},k=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,d.out.apply(b,[a])},l=function(b){var c=jQuery.extend({},b),e=this;e.hoverIntent_t&&(e.hoverIntent_t=clearTimeout(e.hoverIntent_t)),"mouseenter"==b.type?(g=c.pageX,h=c.pageY,a(e).bind("mousemove",i),1!=e.hoverIntent_s&&(e.hoverIntent_t=setTimeout(function(){j(c,e)},d.interval))):(a(e).unbind("mousemove",i),1==e.hoverIntent_s&&(e.hoverIntent_t=setTimeout(function(){k(c,e)},d.timeout)))};return this.bind("mouseenter",l).bind("mouseleave",l)}}(jQuery),define("jquery.hoverintent",function(){}),define("require/apps/global_nav/global_nav",["require","underscore","jquery","mediatorjs","vendor/fastclick-1.0.1","eb/apps/authentication/auth_modal_view","require/apps/global_nav/analytics","jquery.hoverintent"],function(a){"use strict";var b=a("underscore"),c=a("jquery"),d=a("mediatorjs"),e=a("vendor/fastclick-1.0.1"),f=a("eb/apps/authentication/auth_modal_view"),g=a("require/apps/global_nav/analytics");return a("jquery.hoverintent"),{init:function(){var a,d,f;for(window._EB_GLOBAL_HEADER_INITED=!0,b.bindAll(this,"initializeAuthModal","showDropDown","hideDropdown","hideAllDropDowns","toggleDropDown","globalReset","showMask","hideMask","_getElements","_isDropDownElement","preventClick","bindHoverIntent","unbindHoverIntent","autocompleteRendered"),this.options={actionItemLock:!0,hoverIntentOptions:{over:this.showDropDown,out:this.hideDropdown,timeout:300}},this.selectors={actionContainer:".js-gh-dd",actionItem:".js-gh-action",actionActive:"active",menuItem:".js-gh-dd-menu",menuShowClass:"js-gh-dd-menu--show",backgroundMask:"show-menu-mask",menuLockClass:"locked"},this.touchSupport="object"==typeof Touch,a=c(this.selectors.actionContainer),d=this.toggleDropDown,f=0;f<a.length;f++)e.attach(a[f]);this.touchSupport||(d=this.options.actionItemLock?this.toggleDropDown:this.preventClick,this.bindHoverIntent(c(this.selectors.actionContainer))),c(".global-mask").on("click touchstart",c.proxy(function(a){a.preventDefault(),this.globalReset(a)},this)),c(this.selectors.actionItem).on("click",d),c(".js-search-query-area").bind("autocomplete:renderedView",this.autocompleteRendered),c("body").on("click",this.globalReset),this.initializeAuthModal()},initializeAuthModal:function(){var a;"undefined"!=typeof d.get("AuthAppConfig")&&d.get("AuthAppConfig").enableAuthModal&&(a=new f({el:c(document),container:c("#auth-modal #authentication-container")}),a.render())},showDropDown:function(a){var b;this.hideAllDropDowns(),b=this._getElements(a),g.helpAttempt(a,b.actionItem),b.actionItem.addClass(this.selectors.actionActive),b.menuItem.addClass(this.selectors.menuShowClass),this.showMask()},hideDropdown:function(a){var b=this._getElements(a);b.actionItem.removeClass(this.selectors.actionActive),b.menuItem.removeClass(this.selectors.menuShowClass),this.hideMask()},hideAllDropDowns:function(){var a=c(this.selectors.actionItem);a.removeClass(this.selectors.actionActive),c(this.selectors.menuItem).removeClass(this.selectors.menuShowClass),this.hideMask(),this.options.actionItemLock&&!this.touchSupport&&this.bindHoverIntent(c(this.selectors.actionContainer)),a.removeClass(this.selectors.menuLockClass)},toggleDropDown:function(a){var b,d;a.preventDefault(),b=this._getElements(a),b.actionItem.hasClass(this.selectors.menuLockClass)?this.hideAllDropDowns():(this.showDropDown(a),b.actionItem.addClass(this.selectors.menuLockClass),this.options.actionItemLock&&!this.touchSupport&&(d=c(a.currentTarget).closest(this.selectors.actionContainer),this.unbindHoverIntent(d)))},globalReset:function(a){var b=a.target?a.target:a.toElement;this._isDropDownElement(b)||this.hideAllDropDowns()},showMask:function(){c("body").addClass(this.selectors.backgroundMask)},hideMask:function(){c("body").removeClass(this.selectors.backgroundMask)},_getElements:function(a){var b=c(a.currentTarget),d=b.children(this.selectors.actionItem),e=b.children(this.selectors.menuItem);return d.length||(d=b,e=b.next(this.selectors.menuItem)),{actionItem:d,menuItem:e}},_isDropDownElement:function(a){return c(a).closest(".js-gh-dd-menu, .js-gh-action").length?!0:!1},preventClick:function(a){a.preventDefault()},bindHoverIntent:function(a){a.hoverIntent(this.options.hoverIntentOptions)},unbindHoverIntent:function(a){a.unbind("mouseenter").unbind("mouseleave"),a.removeProp("hoverIntent_t"),a.removeProp("hoverIntent_s")},autocompleteRendered:function(a,b){var d=c(".js-global-header"),e=c("body");b.active?(d.addClass("search-autocomplete-is-active"),e.addClass("show-search-mask")):(d.removeClass("search-autocomplete-is-active"),e.removeClass("show-search-mask"))}}}),define("require/entities/search_autocomplete_collection",["require","underscore","eventbrite","gettext"],function(a){"use strict";var b=a("underscore"),c=a("eventbrite"),d=a("gettext");return c.Backbone.Collection.extend({url:"/directory/autocomplete/",initialize:function(a){b.bindAll(this,"_parseAutocompleteItem","_addAutocompleteItemToCollection","getAutocompleteData"),this.loc=a.loc,this.term=a.term},parse:function(a){this.autocompleteData=[],a.version&&(this.currType="Top Event",a.top_match&&(this.currCategory=d("Worldwide Events"),b.each(a.top_match,this._addAutocompleteItemToCollection)),this.currCategory=this.loc.split(",")[0]+" "+d("Events"),this.currType="Event",b.each(a.events,this._addAutocompleteItemToCollection),this.currCategory=d("Organizers"),this.currType="Organizer",b.each(a.organizers,this._addAutocompleteItemToCollection),this.currCategory=d("Categories"),this.currType="Category",b.each(a.categories,this._addAutocompleteItemToCollection),this.currCategory=d("Popular Queries"),this.currType="Popular Query",b.each(a.popular_queries,this._addAutocompleteItemToCollection))},_addAutocompleteItemToCollection:function(a,b){var c=this._parseAutocompleteItem(a,b);c.label&&this.autocompleteData.push(c)},_parseAutocompleteItem:function(a,b){var c=a.events_name||a.name,d=a.events_id||a.id,e={label:c,value:c,url:a.url||a.resource_uri,source:"autocomp",sourceID:a.source_id,id:d,rank:b,type:this.currType,category:this.currCategory};return e},getAutocompleteData:function(){return this.autocompleteData}})}),define("require/utils/autocomplete_mixin",["require","jquery","jquery_autocomplete"],function(a){"use strict";var b=a("jquery");return a("jquery_autocomplete"),function(a){a._highlightText=function(a,c){var d,e;return a=b("<div>").text(a).html(),d=b.ui.autocomplete.escapeRegex(c).split("\\ "),e=new RegExp("("+d.join("|")+")","ig"),a.replace(e,'<span class="text-body--significant">$1</span>')},a._renderItem=function(a,c){return b("<li></li>").data("item.autocomplete",c).append(b("<a></a>").html(c.label)).appendTo(a)},a._populateAutocomplete=function(){b(this).autocomplete("search")}}}),define("require/components/search_autocomplete/search_input_view",["require","underscore","jquery","backbone","eventbrite","eb/analytics","require/entities/search_autocomplete_collection","require/utils/autocomplete_mixin","gettext","eb/util","jquery_autocomplete"],function(a){"use strict";var b=a("underscore"),c=a("jquery"),d=a("backbone"),e=a("eventbrite"),f=a("eb/analytics"),g=a("require/entities/search_autocomplete_collection"),h=a("require/utils/autocomplete_mixin"),i=a("gettext");return a("eb/util"),a("jquery_autocomplete"),d.View.extend({events:{"focus .js-search-query-input":"handleSearchQueryFocus","blur .js-search-query-input":"handleSearchQueryBlur","click .js-header-search-icon":"handleHeaderSearchIconClick","keyup .js-search-query-input":"handleQueryKeydown","paste .js-search-query-input":"handleQueryPaste","click .js-search-submit":"handleFormSubmit"},initialize:function(a){b.bindAll(this,"handleSearchQueryFocus","handleSearchQueryBlur","getSuggestions","handleSelectEvent","renderAutocompleteMenu","hideAutocomplete","handleQueryKeydown","triggerQueryInputFocus","setSearchInitStatus"),this.sandbox=a.sandbox,new h(this),this.$searchQueryArea=this.$(".js-search-query-area"),this.$searchQueryInput=this.$(".js-search-query-input"),this.$searchQueryIcon=this.$(".js-search-query-icon"),this.$searchQueryInput.length&&(this.suggestions=new g({loc:this.sandbox.request("autocomplete:location")}),this.suggestions.fetch=b.debounce(this.suggestions.fetch,300),this.sandbox.searchQuery=this.$searchQueryInput.val(),this.initializeEventsAutocomplete(),this.setSearchInitStatus())},setSearchInitStatus:function(){this.searchStarted=!1,this.resultsDisplayed=!1},initializeEventsAutocomplete:function(){this.$searchQueryInput.autocomplete({appendTo:this.$el,minLength:0,select:this.handleSelectEvent,source:this.getSuggestions,position:{my:"left top",at:"left bottom",of:this.$el},delay:100}).focus(this._populateAutocomplete).data("autocomplete")._renderMenu=this.renderAutocompleteMenu},renderDefaultView:function(){this.$searchQueryArea.addClass("show-large"),this.$el.removeClass("is-active sill sill--with-borders"),this.$searchQueryArea.trigger("autocomplete:renderedView",{active:!1}),this.$searchQueryInput[0].blur()},renderQueryInputView:function(){this.$searchQueryArea.removeClass("show-large"),this.$el.addClass("is-active sill sill--with-borders"),this.$searchQueryArea.trigger("autocomplete:renderedView",{active:!0})},renderAutocompleteMenu:function(a,b){var d=this,f="";a.removeClass("ui-menu ui-widget ui-widget-content ui-corner-all"),a.addClass("list sill sill--with-borders search-query-autocomplete"),c.each(b,function(b,c){c.category!==f&&c.category&&(a.append(e.util.h('<p class="list--divider">{{a}}</p>',c.category)),f=c.category),a.append(d._renderItem(a,c))}),this.trackResultsDisplayed(b)},hideAutocomplete:function(){this.$searchQueryInput.trigger("blur"),this.$searchQueryInput.autocomplete("disable")},handleHeaderSearchIconClick:function(a){a.preventDefault(),this.sandbox.execute(this.sandbox.request("autocomplete:isInteracting")?"autocomplete:interaction:stop":"autocomplete:interaction:start")},trackSearchStart:function(){this.searchStarted||(f.analyticsAction("SearchStartAction",{},{}),this.searchStarted=!0)},trackResultsDisplayed:function(){this.searchStarted&&!this.resultsDisplayed&&(f.analyticsAction("AutocompleteResultViewAction",{},{}),this.resultsDisplayed=!0)},trackSearchStop:function(){this.resultsDisplayed&&f.analyticsAction("SearchAbandonedAction",{search_terms:this.$searchQueryInput.val(),search_location:this.sandbox.request("autocomplete:location")},{}),this.setSearchInitStatus()},handleSearchQueryFocus:function(){this.sandbox.execute("autocomplete:interaction:start"),this.$searchQueryArea.addClass("has-focus"),this.$searchQueryIcon.addClass("is-focus"),this.$searchQueryInput.autocomplete("enable")},handleSearchQueryBlur:function(){this.$searchQueryArea.removeClass("has-focus"),this.$searchQueryIcon.removeClass("is-focus")},handleQueryKeydown:function(){this.handleQueryInput(),this.trackSearchStart()},handleQueryPaste:function(){this.$searchQueryInput.trigger("keydown")},handleQueryInput:function(){this.sandbox.searchQuery=this.$searchQueryInput.val()},handleSelectEvent:function(a,b){a.preventDefault(),this.sandbox.execute("autocomplete:query:suggestionSelected",b.item)},handleFormSubmit:function(){f.analyticsAction("SearchEventsClickAction",{source:"globalheader"},{}),f.trackEventFromLink({category:"header",action:"RunSearch",label:this.sandbox.searchQuery}),this.setSearchInitStatus()},triggerQueryInputFocus:function(){this.$searchQueryInput.trigger("focus")},getSuggestions:function(a,b){var c={q:this.$searchQueryInput.val(),loc:this.sandbox.request("autocomplete:location")},d=this;this.suggestions.term=this.$searchQueryInput.val(),this.suggestions.loc=this.sandbox.request("autocomplete:location"),this.suggestions.term.length<2?b([{type:"Category",category:i("Categories"),label:i("Arts"),source:"autocomp",url:"/d/local/arts--events/",value:"Arts"},{type:"Category",category:i("Categories"),label:i("Business"),source:"autocomp",url:"/d/local/business--events/",value:"Business"},{type:"Category",category:i("Categories"),label:i("Charity & Causes"),source:"autocomp",url:"/d/local/charity-and-causes--events/",value:"Charity & Causes"},{type:"Category",category:i("Categories"),label:i("Community"),source:"autocomp",url:"/d/local/community--events/",value:"Community"},{type:"Category",category:i("Categories"),label:i("Film & Media"),source:"autocomp",url:"/d/local/film-and-media--events/",value:"Film & Media"},{type:"Category",category:i("Categories"),label:i("Food & Drink"),source:"autocomp",url:"/d/local/food-and-drink--events/",value:"Food & Drink"},{type:"Category",category:i("Categories"),label:i("Music"),source:"autocomp",url:"/d/local/music--events/",value:"Music"},{type:"Category",category:i("Categories"),label:i("All Categories"),source:"autocomp",url:"/d/local/events/",value:"All Categories"}]):this.suggestions.fetch({reset:!0,data:c,success:function(){b(d.suggestions.getAutocompleteData())}})}})}),require(["mediatorjs"],function(a){"use strict";var b=a.get("googleMapConfig");"undefined"==typeof b.channel&&(b.channel="channel_not_defined"),require.config({paths:{gmaps:"https://maps.google.com/maps/api/js?sensor=true&client=gme-eventbrite&libraries=places&language="+b.language+"&channel="+b.channel}})}),define("require/apps/global_nav/google_map_config",function(){}),define("require/components/search_autocomplete/search_location_view",["require","jquery","underscore","backbone","gettext","mediatorjs","require/utils/autocomplete_mixin","require/core/bootstrap","jquery_autocomplete","jquery_cookie"],function(a){"use strict";var b=a("jquery"),c=a("underscore"),d=a("backbone"),e=a("gettext"),f=a("mediatorjs"),g=a("require/utils/autocomplete_mixin");return a("require/core/bootstrap"),a("jquery_autocomplete"),a("jquery_cookie"),d.View.extend({events:{"focus .js-search-location-input":"handleLocationInputFocus","blur .js-search-location-input":"handleLocationInputBlur","keydown .js-search-location-input":"handleLocationInput","click .js-search-location-icon":"handleLocationIconClick"},initialize:function(a){c.bindAll(this,"renderDefaultView","renderDisplayView","renderAutocompleteMenu","initializeGoogleLocationAutocomplete","serializeData","getSuggestions","autoSelectLocation","normalizeGeoObject","handleAutocompletePlaceChange","handleLocationIconClick","onGetSessionSuccess","setUserLocation","loadGoogleMaps"),this.sandbox=a.sandbox,f.get("googleMapConfig").loaded=!1,new g(this)},loadGoogleMaps:function(){var b=this;f.get("googleMapConfig").loaded?b.initializeGoogleLocationAutocomplete():(f.get("googleMapConfig").channel="frontend.autocomplete",a(["require/apps/global_nav/google_map_config"],function(){a(["async!gmaps"],function(){f.get("googleMapConfig").loaded=!0,b.initializeGoogleLocationAutocomplete()})}))},initializeGoogleLocationAutocomplete:function(){"undefined"!=typeof google&&"undefined"!=typeof google.maps.places&&"undefined"!=typeof google.maps.places.AutocompleteService?(this.$searchLocationInput.off("click",this.initializeGoogleLocationAutocomplete),this.googleLocationAutocomplete=new google.maps.places.AutocompleteService,this.$searchLocationInput.autocomplete({appendTo:this.$el,minLength:2,select:this.handleAutocompletePlaceChange,source:this.getSuggestions,position:{my:"left top",at:"left bottom",of:this.$el},delay:100}).data("autocomplete")._renderMenu=this.renderAutocompleteMenu):this.$searchLocationInput.on("focus",this.initializeGoogleLocationAutocomplete)},serializeData:function(){return{searchLocation:this.sandbox.searchLocation}},render:function(){this.$searchLocationInput=this.$(".js-search-location-input"),this.$searchLocationIcon=this.$(".js-search-location-icon"),this.$searchLocationInput.length&&(this.sandbox.searchLocation=this.$searchLocationInput.val(),f.get("googleMapConfig").loaded&&this.initializeGoogleLocationAutocomplete(),this.renderDefaultView())},renderDefaultView:function(){this.$el.addClass("is-hidden")},renderDisplayView:function(){this.$el.removeClass("is-hidden")},handleLocationInputFocus:function(){this.loadGoogleMaps(),this.$searchLocationIcon.addClass("is-focus"),this.sandbox.defaultSearchLocation="",this.sandbox.defaultSearchLocationNormalized="",this.$searchLocationInput.val("").trigger("keyup"),this.sandbox.execute("autocomplete:navigate:location")},handleLocationInputBlur:function(){this.$searchLocationIcon.removeClass("is-focus"),this.autoSelectLocation(),this.$searchLocationInput.val()||this.$searchLocationInput.val(e(this.sandbox.request("autocomplete:location")))},handleLocationIconClick:function(){this.userLocation?this.setUserLocation():b.ajax({type:"GET",url:"/ajax/user_location",success:this.onGetSessionSuccess})},onGetSessionSuccess:function(a){this.userLocation=a.location_text},setUserLocation:function(){this.sandbox.searchLocation=this.userLocation,this.$searchLocationInput.val(this.userLocation),this.handleLocationChanged()},handleLocationInput:function(a){return this.sandbox.searchLocation=this.$searchLocationInput.val(),13===a.which?(this.handleLocationChanged(),!1):void(9!==a.which&&(this.sandbox.defaultSearchLocation="",this.sandbox.defaultSearchLocationNormalized=""))},handleLocationChanged:function(){this.autoSelectLocation(),b.cookie("loc",this.sandbox.searchLocation,{path:"/",expires:180}),this.sandbox.execute("autocomplete:location:changed")},getSuggestions:function(a,b){this.sandbox.searchLocation=a.term,0===this.sandbox.searchLocation.length?this.sandbox.searchLocation=e("Worldwide"):this.googleLocationAutocomplete.getPlacePredictions({input:this.sandbox.searchLocation,types:["(regions)"]},function(a){b(a)})},normalizeGeoObject:function(a){var b,c,d=[];for(b=0;b<a.terms.length;b++)c=a.terms[b]&&a.terms[b].value,(2>b||b===a.terms.length-1)&&c&&d.push(c);return d.join(", ")},renderAutocompleteMenu:function(a,c){var d=this;a.removeClass("ui-menu ui-widget ui-widget-content ui-corner-all"),a.addClass("list sill sill--with-borders"),this.sandbox.defaultSearchLocation="",this.sandbox.defaultSearchLocationNormalized="",c&&c[0].description&&(this.sandbox.defaultSearchLocation=c[0].description||"",this.sandbox.defaultSearchLocationNormalized=this.normalizeGeoObject(c[0])),b.each(c,function(b,c){c.label=d._highlightText(c.description,d.sandbox.searchLocation),c.value=d.normalizeGeoObject(c),a.append(d._renderItem(a,c))})},handleAutocompletePlaceChange:function(a,b){return a.stopPropagation(),this.sandbox.searchLocation=this.normalizeGeoObject(b.item),this.$searchLocationInput.val(b.item.description),this.handleLocationChanged(),!1},autoSelectLocation:function(){return this.sandbox.defaultSearchLocationNormalized&&(this.$searchLocationInput.val(this.sandbox.defaultSearchLocation),this.sandbox.searchLocation=this.sandbox.defaultSearchLocationNormalized),this.sandbox.searchLocation}})}),define("require/components/search_autocomplete/component",["require","jquery","backbone","mediatorjs","eb/_backbone/component_factory","require/components/search_autocomplete/search_input_view","require/components/search_autocomplete/search_location_view","eb/analytics","gettext"],function(a){"use strict";var b=a("jquery"),c=a("backbone"),d=a("mediatorjs"),e=a("eb/_backbone/component_factory"),f=a("require/components/search_autocomplete/search_input_view"),g=a("require/components/search_autocomplete/search_location_view"),h=a("eb/analytics"),i=a("gettext");return i||(i=function(a){return a}),jQuery.fn.extend({propAttr:b.fn.prop||b.fn.attr}),e.extend({initialize:function(a){this.initializeSearch(a),this.initializeViews(a)},componentMethods:{initializeSearch:function(){this.isSearchPage=!1,this.isInteracting=!1,this.sandbox.searchQuery="",this.sandbox.searchLocation=""},initializeViews:function(a){this.searchInputView=new f({el:a.el,sandbox:this.sandbox}),this.searchInputView.render(),this.searchLocationView=new g({el:".js-header-location-autocomplete",sandbox:this.sandbox}),this.searchLocationView.render(),d.set("locationView",this.searchLocationView)},eventHandler:function(a){this.searchInputView.$el.find(a.target).length<1&&(b(a.target).hasClass("ui-page")||this.sandbox.execute("autocomplete:interaction:stop"))}},commands:{"autocomplete:interaction:start":function(){b(".js-header-search-autocomplete").removeClass("is-init"),this.isInteracting||(b("body").on("click focusin touchstart",this.eventHandler),this.isInteracting=!0,this.sandbox.execute("autocomplete:navigate:query")),this.searchLocationView.renderDisplayView()},"autocomplete:interaction:stop":function(){b(".js-header-search-autocomplete").addClass("is-init"),this.searchInputView.renderDefaultView(),this.searchLocationView.renderDefaultView(),this.searchInputView.hideAutocomplete(),b("body").off("click focusin touchstart",this.eventHandler),this.isInteracting=!1,this.searchInputView.trackSearchStop()},"autocomplete:navigate:query":function(){this.searchInputView.renderQueryInputView(),this.searchInputView.triggerQueryInputFocus()},"autocomplete:navigate:location":function(){this.searchInputView.hideAutocomplete(),this.searchInputView.renderQueryInputView()},"autocomplete:query:suggestionSelected":function(a){var b;h.trackInternalNavigationAction("AutocompleteResultClickAction",{public_event_id:a.id,autocomp_suggestion:a.value,autocomp_type:a.type,rank:a.rank,source_id:a.sourceID,search_terms:this.searchInputView.$searchQueryInput.val(),search_location:this.sandbox.request("autocomplete:location")},{}),("Event"===a.type||"Top Event"===a.type)&&h.trackEventFromLink({action:"ViewEventAutocomplete",category:"header",label:a.id}),b={"Search Query":this.sandbox.searchQuery,"Map Filtered":"Worldwide"!==this.sandbox.request("autocomplete:location"),Location:this.sandbox.searchLocation,Rank:a.rank,"Number of Results":this.searchInputView.$el.find("li").length},b["Result Type"]=a.category.split(" ").pop(),window.location=a.url},"autocomplete:location:changed":function(){c.trigger("headerLocationChange"),h.trackEventFromLink({action:"LocChange",category:"header",label:this.sandbox.searchLocation}),this.sandbox.execute("autocomplete:navigate:query")}},requests:{"autocomplete:location":function(){return this.sandbox.searchLocation=this.sandbox.searchLocation.replace(/^[ ]+|[ ]+$/g,""),this.sandbox.searchLocation===i("Worldwide")?"Worldwide":this.sandbox.searchLocation===i("Current Location")||""===this.sandbox.searchLocation||void 0===this.sandbox.searchLocation?"Current Location":this.sandbox.searchLocation},"autocomplete:query":function(){return this.sandbox.searchQuery},"autocomplete:isInteracting":function(){return this.isInteracting}}})}),define("require/components/analytics/track_event",["require","underscore","jquery","dorsal","eb/analytics","require/components/janus/component"],function(a){"use strict";function b(a,b){var c,d=h(a.currentTarget),e=d.data(),f={category:e.eventCategory,action:e.eventAction,label:e.eventLabel};e.ebEventId&&(f.dimensions=[j.DIMENSIONS.EVENT_ID(e.ebEventId)]),c=g.isMatch(b,{useCookie:!0})?"trackEventFromLink":"trackEvent",j[c](f)}function c(a,b){var c=h(a.currentTarget),d=c.data("experiment-name");b?k.exposeOnPageChange(d):k.exposeViaAjax(d)}function d(a,b){var c=h(a.currentTarget),d=c.data("checkpoint-name");b?k.logCheckpointOnPageChange(d):k.logCheckpointViaAjax(d)}function e(a){return function(c){b(c,a)}}function f(a){return{create:function(b){var c=h(b.el),d=e(a);return c.on("click",d),{$el:c,callback:d}},destroy:function(a){a.instance.$el.off("click",a.instance.callback)}}}var g=a("underscore"),h=a("jquery"),i=a("dorsal"),j=a("eb/analytics"),k=a("require/components/janus/component");i.registerPlugin("track-event",f()),i.registerPlugin("track-link",f({useCookie:!0})),i.registerPlugin("track-event-links",{create:function(a){var b=h(a.el);b.on("click",".js-xd-janus-exposure-event",function(a){c(a,!1)}).on("click",".js-xd-janus-exposure-link",function(a){c(a,!0)}).on("click",".js-xd-janus-checkpoint-event",function(a){d(a,!1)}).on("click",".js-xd-janus-checkpoint-link",function(a){d(a,!0)})}})}),require(["eb/require_base_config","require/apps/global_nav/global_nav","require/components/search_autocomplete/component","eb-styleguide/js/ui_components/component_library","jquery","require/components/analytics/track_event"],function(a,b,c,d,e){"use strict";b.init(),e(function(){d.wireAll()}),window.searchAutocomplete=c.create({el:".js-header-search-autocomplete"})}),define("require/apps/global_nav/app",function(){});