//fgnass.github.com/spin.js#v1.3
/**
 * Copyright (c) 2011-2013 Felix Gnass
 * Licensed under the MIT license
 */
function BisexYear(a,b){return a%4==0&&2==b?!0:!1}function nbDaysPerMonth(a,b){var c=gMonth_days[a];return BisexYear(b,a)&&c++,c}function getMonthName(a,b){switch(b){case"FR":return gMonth_names_fr[a];case"US":return gMonth_names_us[a]}}function PadDigits(a,b){a=a.toString();var c="";if(b>a.length)for(i=0;i<b-a.length;i++)c+="0";return c+a.toString()}function CountCar(a,b,c){var d=a.split(b),e=d.length-1;return e>c?!0:!1}function IsNumeric(a){var b,c="0123456789.-",d=!0;if(0==a.length)return!1;for(i=0;i<a.length&&1==d;i++)b=a.charAt(i),-1==c.indexOf(b)&&(d=!1);return d}function checkInteger(a){return newVal=parseInt(a.value),isNaN(newVal)?(alert(gettext("Please enter an integer value.")),a.value=0,a.focus()):a.value=newVal,!1}function CheckNumeric(a,b,c,d,e){var f=document.getElementById(a).value;f=f.replace(",",""),document.getElementById(a).value=f;var g=0;"F"==b?(reg=new RegExp("[^0-9.]","i"),g=1):reg=new RegExp("[^0-9]","i");var h=CountCar(f,".",g),i=GLOBAL_MAX_INTEGER;if(c&&(i=c),reg.test(f)||h)document.getElementById(a).style.color="#"+GLOBAL_RED,alert(h&&"I"==b?gettext("Please enter integer numbers here."):gettext("Please enter numbers here.")),document.getElementById(a).value=f.substring(0,f.length-1);else{var j=parseInt(f);j>i&&i>0?(alert(gettext("Numbers must be less or equal to ")+i+"."),document.getElementById(a).value=i,document.getElementById(a).focus()):(document.getElementById(a).style.color="#"+GLOBAL_BLACK,arguments.length>=3&&d&&d(e))}}function CheckNumeric_Localization(a,b,c,d,e){var f=document.getElementById(a).value;f=f.replace(",",""),document.getElementById(a).value=f;var g=0;"F"==b?(reg=new RegExp("[^0-9.]","i"),g=1):reg=new RegExp("[^0-9]","i");var h=CountCar(f,".",g),i=GLOBAL_MAX_INTEGER;if(c&&(i=c),reg.test(f)||h)document.getElementById(a).style.color="#"+GLOBAL_RED,h&&"I"==b?display_error_msg("alert","numericinteger","register"):display_error_msg("alert","numeric","register"),document.getElementById(a).value=f.substring(0,f.length-1);else{var j=parseInt(f);j>i&&i>0?(display_error_msg("alert","numericlength","register",i),document.getElementById(a).value=i,document.getElementById(a).focus()):(document.getElementById(a).style.color="#"+GLOBAL_BLACK,arguments.length>=3&&d&&d(e))}}function ShowCalendar(a,b){var c=new Array;c[0]="2000.01",c[1]=GLOBAL_LIMIT_DATE+".01";var d="click";GLOBAL_MODE_DATE=a;var e=a;Date.parse(b)||(b=new Date),Calendar.setup({inputField:a,button:e,eventName:d,ifFormat:"%m/%d/%Y",align:"Bl",range:c,date:new Date(b),cache:!0,electric:!1})}function AddToCalendar(a,b,c,d){var e=b+"/calendar.ics?eid="+c+"&calendar="+a,f=$("body").attr("data-event-id")||"defaultEventId";if(d)e+="&date="+d;else if(document.mgform&&document.mgform.selecteddate){if(document.mgform.selecteddate.selectedIndex<1)return void alert(gettext("Please select the date you would like to attend."));e+="&date="+document.mgform.selecteddate[document.mgform.selecteddate.selectedIndex].value}"outlook"==a||"ical"==a?document.location.href=e:window.open(e,"calendar","toolbar=yes, menubar=yes, location=yes, status=yes, scrollbars=yes,resizable=yes, width=800, height=600, left=0, top=0"),EB.Analytics.trackEvent({action:"AddToCal",category:"listing",label:a,dimensions:[EB.Analytics.DIMENSIONS.EXPERIMENT_ID("OldListing"),EB.Analytics.DIMENSIONS.EVENT_ID(f)]})}function CheckLimitDate(a){var b=a.getFullYear(),c=new Date(a);if(b>GLOBAL_LIMIT_DATE)var d=new Date(GLOBAL_DEFAULT_LIMIT_DATE);else var d=c;return d}function Show(a,b){document.getElementById(a)&&"none"==document.getElementById(a).style.display&&(document.getElementById(a).style.display="undefined"!=typeof b&&""!=b?b:"block")}function Hide(a){document.getElementById(a)&&"none"!=document.getElementById(a).style.display&&(document.getElementById(a).style.display="none")}function ShowInline(a){document.getElementById(a)&&"none"==document.getElementById(a).style.display&&(document.getElementById(a).style.display="inline")}function HideInline(a){document.getElementById(a)&&"none"!=document.getElementById(a).style.display&&(document.getElementById(a).style.display="none")}function Toggle(a){document.getElementById(a)&&("none"==document.getElementById(a).style.display?Show(a):Hide(a))}function ToggleDiv(a,b){document.getElementById(a)&&("none"==document.getElementById(a).style.display?"undefined"!=typeof b&&""!=b?Show(a,b):Show(a):Hide(a))}function checkEmail(a){if(window.RegExp){var b="^[0-9a-zA-Z]+([.-]?[0-9a-zA-Z#!$&*'(),;=:+/^`~_-]+)*@[0-9a-zA-Z]+[0-9a-zA-Z.-]*[.]{1}([a-zA-Z]{2,14})$",c=new RegExp(b);return c.test(a)?!0:!1}return a.indexOf("@")>=0?!0:!1}function CheckEmailExtended(a){if(document.getElementById(a)){if(email=document.getElementById(a).value,!checkEmail(email))return alert(gettext("This is not a valid email address.")),document.getElementById(a).focus(),!1;if(AtPos=email.indexOf("@"),StopPos=email.lastIndexOf("."),Message="",""==email||-1==AtPos||-1==StopPos||StopPos<AtPos||StopPos-AtPos==1)return alert(gettext("This is not a valid email address.")),document.getElementById(a).focus(),!1}return!0}function saveOrgUrl(){var a=jQuery("#orgshortname").attr("value");if(!CheckShortname(a)&&a)alert(gettext('Your "Personalized Organizer URL" can only include lowercase letters and numbers.'));else{var b=server+"/setorganizerurl",c="shortname="+a+"&org_id="+jQuery("#org_id").attr("value");jQuery.ajax({url:b,data:c,success:updateOrgShortname,error:throwFailure})}}function throwFailure(a){alert(a)}function updateOrgShortname(a){var b,c=a;b=c?"http://"+c+".eventbrite.com":server+"/org/"+oid,style&&(b+="?s="+style),jQuery("#organizer_url").html('<a href="'+b+'">'+b+"</a>"),ToggleDiv("organizer_personalizedurl")}function CheckShortname(a){if(""==a)return!1;var b="[^a-z0-9-]",c=new RegExp(b);return c.test(a)?!1:!0}function SetCookie(a,b,c){var d=new Date,e=new Date;(null==c||0==c)&&(c=1),e.setTime(d.getTime()+864e5*c),document.cookie=a+"="+encodeURIComponent(b)+";expires="+e.toGMTString()}function ReadCookie(a){var b=""+document.cookie,c=b.indexOf(a);if(-1==c||""==a)return"";var d=b.indexOf(";",c);return-1==d&&(d=b.length),unescape(b.substring(c+a.length+1,d))}function EraseCookie(a){SetCookie(a,"",-1)}function TestCookies(){return SetCookie("test","1",1),"1"==ReadCookie("test")?(EraseCookie("test"),!0):!1}function ShowDiv(a){document.getElementById(a)&&"none"==document.getElementById(a).style.display&&(document.getElementById(a).style.display="block")}function HideDiv(a){document.getElementById(a)&&"none"!=document.getElementById(a).style.display&&(document.getElementById(a).style.display="none")}function ShowDivFromCheckbox(a,b){a.checked?(Show(b),document.getElementById(b).focus()):("channelsDiv"==b&&($("channels").options[0].selected=!0,$("channels_2").options[0].selected=!0,$("tags").value=""),Hide(b))}function common_replace_car(a,b,c){var d=a;if(document.getElementById(a)&&(d=document.getElementById(a).value),b)var e=b;else var e='"';if(c)var f=c;else var f="'";for(var g=d.split(""),h=0;h<g.length;h++)wcar=g[h],wcar=wcar.replace(e,f),g[h]=wcar;return d=g.join("")}function CopyText(a,b){var c=document.getElementById(a),d=document.getElementById(b);""!=c&&""!=d&&(d.value=c.value)}function ControlDate(a){var b=document.getElementById(a);alert(b)}function ValidCheckBox(a){if(document.getElementById(a)){var b=document.getElementById(a),c=b.length,d="";for(i=0;i<c;i++)b[i].checked&&(d=d+b[i].value+" ");return""==d?(alert(gettext("No boxes checked.")),!1):!0}}function cGA(a){"undefined"!=typeof pageTracker&&pageTracker._trackPageview(a)}function isInt(a){return 0==a.toString().search(/^-?[0-9]+$/)}function paddingSTR(a,b,c,d){if("undefined"==typeof b)var b=0;if("undefined"==typeof c)var c=" ";if("undefined"==typeof d)var d=STR_PAD_RIGHT;if(b+1>=a.length)switch(d){case STR_PAD_LEFT:a=Array(b+1-a.length).join(c)+a;break;case STR_PAD_BOTH:var e=Math.ceil((padlen=b-a.length)/2),f=padlen-e;a=Array(f+1).join(c)+a+Array(e+1).join(c);break;default:a+=Array(b+1-a.length).join(c)}return a}function checkHTML(a){var b=c,c=document.getElementById(a).value;try{b=HTMLtoXML(c),b.length>254&&(b=c)}catch(d){b=c}return document.getElementById(a).value=b,!0}function splitTrim(a,b){if(a.indexOf(b)>=0){for(var c=a.split(b),d=0;d<c.length;d++)c[d]=c[d].trim();a=c.join(b)}return a}function UpperName(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()}function Capitalize(a,b){var c=new Array;if(a.indexOf(b)>=0){var d=a.split(b);for(i=0;i<d.length;i++)c.push(UpperName(d[i]));return c.join(b)}return a}function extendedCapitalize(a){return upperZone=a.trim(),-1==upperZone.indexOf(",")&&(upperZone=upperZone.indexOf(" ")>=0?Capitalize(upperZone," "):upperZone.indexOf("-")>=0?Capitalize(upperZone,"-"):UpperName(upperZone)),upperZone}function stripHTML(a){return a.replace(/<&#91;^>&#93;*>/g,"")}function limiteTextarea(c,d){if(c.value.length<d){for(a=c.value.split("\n"),b=0,x=0;x<a.length;x++)a[x].length>=c.cols&&(b+=Math.floor(a[x].length/c.cols));b+=a.length,c.rows=b}else document.getElementById(c.name).value=c.value.substring(0,d)}function BuildDateJS(a,b,c,d){if(document.getElementById(a)){var e=document.getElementById(a).value,f=document.getElementById(d).value,g=document.getElementById(b).value,h=document.getElementById(c).value;if("PM"==f){var i=parseInt(g,10);12>i&&(i+=12),g=i}else{var i=parseInt(g,10);12==i&&(i=0,g=i)}var j="";j=" "+g+":"+h+":00";var k=new Date(e+j);return k}}function ComputeNewDate(a,b,c,d,e){""==c&&(c="0"),""==d&&(d="0"),""==e&&(e="0");var f=parseInt(c),g=parseInt(d),h=parseInt(e),i=1e3*(f*GLOBAL_DAY_SECOND+g*GLOBAL_HOUR_SECOND+h*GLOBAL_MN_SECOND),j=new Date(b);j.setTime(""==a||"SUB"==a?j.getTime()-i:j.getTime()+i);var k=j.getHours(),l=j.getMinutes(),m="AM",n=parseInt(k),o=parseInt(l);return n>12&&(n-=12,m="PM"),{date:j.format("MM/DD/YYYY"),hour:PadDigits(n,2),minute:PadDigits(o,2),ampm:m}}function unescapeHTMLFixed(a){newVal=new String(a);var b=document.createElement("div");return b.innerHTML=newVal.replace(/<\/?[^>]+>/gi,""),newVal=b.childNodes[0].nodeValue,newVal=newVal.replace(/&quot;/gi,'"'),newVal=newVal.replace(/&#39;/gi,"'"),newVal}function isValidURL(a){var b=/^(([\w]+:)?\/\/)?(([\d\w]|%[a-fA-f\d]{2,2})+(:([\d\w]|%[a-fA-f\d]{2,2})+)?@)?([\d\w][-\d\w]{0,253}[\d\w]\.)+[\w]{2,64}(:[\d]+)?(\/([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)*(\?(&?([-+_~.\d\w]|%[a-fA-f\d]{2,2})=?)*)?(#([-+_~.\d\w]|%[a-fA-f\d]{2,2})*)?$/;return b.test(a)?!0:!1}function displayErrorMessage(a){jQuery("#ticket_error_message").html(jQuery(a).show()).show(),jQuery("#ticket_error_message_container").show()}function displayCustomErrorMessage(a){jQuery("#ticket_error_message").html(a).show(),jQuery("#ticket_error_message_container").show()}function checkQuantity(a){var b=1;legalChars=" 0123456789	\r\n",nonZeroChars="123456789";for(var c=0;c<a.length;c++){var d=a.charAt(c);if(-1==legalChars.indexOf(d))return 0;nonZeroChars.indexOf(d)>-1&&(b=2)}return b}function checkAmount(a){var b=1;legalChars=" 0123456789.	\r\n",nonZeroChars="123456789";for(var c=0;c<a.length;c++){var d=a.charAt(c);if(-1==legalChars.indexOf(d))return 0;nonZeroChars.indexOf(d)>-1&&(b=2)}return b}function checkContactForm(){return document.contactForm.from_name.value?document.contactForm.from_email.value?checkEmail(document.contactForm.from_email.value)?document.contactForm.message.value?!0:(display_error_msg("alert","message","event"),document.contactForm.message.focus(),!1):(document.contactForm.from_email.focus(),display_error_msg("alert","valid_email","event"),!1):(display_error_msg("alert","email","event"),document.contactForm.from_email.focus(),!1):(display_error_msg("alert","name","event"),document.contactForm.from_name.focus(),!1)}function validateform(){var a=!1,b=!1,c=!1;if(window.gIsSeriesParent)return display_error_msg("alert","selectadate","register"),!1;if(document.mgform)for(var d=0;d<document.mgform.length;d++){var e=document.mgform.elements[d];"quant_"==e.name.substring(0,6)&&(quantStatus=checkQuantity(e.value),2==quantStatus&&(b=!0),0==quantStatus&&(a=!0)),"amt_"==e.name.substring(0,4)&&(quantStatus=checkAmount(e.value),2==quantStatus&&(b=!0),0==quantStatus&&(a=!0))}return c=1==b&&0==a,0==c?(display_error_msg("alert","quantity","event"),c):document.mgform.selecteddate&&document.mgform.selecteddate.selectedIndex<1?(display_error_msg("alert","date","event"),!1):jQuery(".js-select-series-date")&&""===jQuery(".js-select-series-date").val()?(display_error_msg("alert","date","event"),!1):!0}function Show(a,b){var c=document.getElementById(a);c.style.display="none"==c.style.display?"undefined"!=typeof b&&""!=b?b:"block":"none"}function clickSelectTickets(a){var b=jQuery(a).closest("tr");b.nextUntil(":not(.public_promo)").slideDown("fast")}function clickToggleTicketStub(a){var b=jQuery(a);b.hasClass("expanded")?(b.find(".price_data").fadeIn(),b.find(".ico-arrow-down").removeClass("ico-arrow-down").addClass("ico-arrow-right"),b.nextUntil(":not(.public_promo)").slideUp("fast"),b.removeClass("expanded")):(b.find(".price_data").fadeOut(),b.find(".ico-arrow-right").removeClass("ico-arrow-right").addClass("ico-arrow-down"),b.nextUntil(":not(.public_promo)").slideDown("fast"),b.addClass("expanded"))}function checkLength(a){var b=a.value.length;return b>maximumLength?(display_error_msg("alert","limit_message","event",maximumLength,b),!1):!0}function checkInvitationForm(){if(!document.invitationForm.from_name.value)return display_error_msg("alert","name","event"),!1;if(!document.invitationForm.from_email.value)return display_error_msg("alert","your_email","event"),!1;if(!document.invitationForm.to_email.value)return display_error_msg("alert","valid_email_to","event"),!1;if(!document.invitationForm.subject.value)return display_error_msg("alert","subject","event"),!1;if(!document.invitationForm.message.value)return display_error_msg("alert","message_email","event"),!1;if(!checkLength(document.invitationForm.message))return!1;if(!document.invitationForm.recaptcha_response_field.value)return display_error_msg("alert","code","event"),!1;var a=document.invitationForm.to_email.value;a=a.replace(/\s/g,","),a=a.replace(/(,+)/g,","),document.invitationForm.to_email.value=a,emails=a.split(",");for(var b=0;b<emails.length;b++)if(emails[b]&&!checkEmail(emails[b]))return display_error_msg("alert","invalid_email","event",emails[b]),!1;return emails.length>10?(display_error_msg("alert","invitation","event"),!1):!0}function setColor(a){for(var b=document.customizeForm.radioSelect,c=0;c<b.length;c++)if(b[c].checked){if("backgroundcolor"==b[c].value&&(document.getElementById("backgroundcolor").style.background=a,document.getElementById("regpage").style.background=a,document.getElementById("titleDiv").style.background=a,document.customizeForm.background_color.value=a),"boxbackgroundcolor"==b[c].value&&(changeRoundedBackground("order","bottom",a),changeRoundedBackground("details","top",a),changeRoundedBackground("details","bottom",a),changeRoundedBackground("attendees","top",a),changeRoundedBackground("attendees","bottom",a),changeRoundedBackground("date","bottom",a),changeRoundedBackground("host","bottom",a),changeBackground("roundcontent",a),document.getElementById("boxbackgroundcolor").style.background=a,document.customizeForm.box_background_color.value=a),"boxheaderbackgroundcolor"==b[c].value&&(changeRoundedBackground("order","top",a),changeRoundedBackground("date","top",a),changeRoundedBackground("host","top",a),changeBackground("roundheader",a),changeBackground("roundcontent2",a),document.getElementById("boxheaderbackgroundcolor").style.background=a,document.customizeForm.box_header_background_color.value=a),"boxbordercolor"==b[c].value&&(changeRoundedBorder("order",a),changeRoundedBorder("details",a),changeRoundedBorder("attendees",a),changeRoundedBorder("date",a),changeRoundedBorder("host",a),changeBorder("roundheader",a),changeBorder("roundcontent",a),changeBorder("roundcontent2",a),document.getElementById("regpage").style.borderColor=a,document.getElementById("boxbordercolor").style.background=a,document.customizeForm.box_border_color.value=a),"textcolor"==b[c].value&&(document.getElementById("regpage").style.color=a,document.getElementById("titleDiv").style.color=a,document.getElementById("textcolor").style.background=a,document.customizeForm.text_color.value=a),"linkcolor"==b[c].value){for(var d=document.getElementById("regpage").getElementsByTagName("a"),e=0;e<d.length;e++)d[e].style.color=a;document.getElementById("linkcolor").style.background=a,document.customizeForm.link_color.value=a}"titletextcolor"==b[c].value&&(changeClassColor("title","div",a),document.getElementById("titletextcolor").style.background=a,document.customizeForm.title_text_color.value=a),"boxtextcolor"==b[c].value&&(changeColor("roundcontent",a),changeClassColor("tickets","td",a),changeClassColor("maindetails","td",a),document.getElementById("boxtextcolor").style.background=a,document.customizeForm.box_text_color.value=a),"boxheadertextcolor"==b[c].value&&(changeColor("roundheader",a),changeClassColor("tickets2","td",a),document.getElementById("boxheadertextcolor").style.background=a,document.customizeForm.box_header_text_color.value=a)}}function setColorFromText(a,b){var c=/^#[a-fA-F0-9]{6}$/i;return c.test(b)?void setColor(b):(display_error_msg("alert","event_color","event",b),a.value="",void a.focus())}function setRadio(a){a=a.replace(/_/g,"");for(var b=document.customizeForm.radioSelect,c=0;c<b.length;c++)if(b[c].value==a){b[c].checked=!0;break}}function changeBackground(a,b){for(var c=document.getElementsByName(a),d=0;d<c.length;d++)c[d].style.background=b}function changeRoundedBackground(a,b,c){if(document.getElementById(a))for(var d=document.getElementById(a).getElementsByTagName("B"),e=0;e<d.length;e++)d[e].parentNode.className.indexOf(b)>0&&(d[e].style.background=c)}function changeBorder(a,b){for(var c=document.getElementsByName(a),d=0;d<c.length;d++)c[d].style.borderColor=b}function changeRoundedBorder(a,b){if(document.getElementById(a))for(var c=document.getElementById(a).getElementsByTagName("B"),d=0;d<c.length;d++)c[d].style.borderColor=b}function changeColor(a,b){for(var c=document.getElementsByName(a),d=0;d<c.length;d++)c[d].style.color=b}function changeClassColor(a,b,c){for(var d=document.getElementsByTagName(b),e=0;e<d.length;e++)(d[e].className==a||d[e].id==a)&&(d[e].style.color=c)}function Redeem(){if(!document.discountForm.discount.value)return display_error_msg("alert","discount","event"),document.discountForm.discount.focus(),!1;var a=document.location.href.split("?")[0];return a+="?discount="+document.discountForm.discount.value,document.location.href=a,!0}function ShowRSVP(a){Hide("RSVPYes"),Hide("RSVPNo"),Hide("RSVPUndecided"),Hide("RSVPInfo"),Show("RSVP"+a.id),"No"!=a.id&&"Undecided"!=a.id||""!=document.mgform.invite.value||Show("RSVPInfo")}function ProcessRSVP(a,b){var c=baseUrl+"/inviteaction",d="?eid="+eid+"&r="+Math.random()+"&i="+b;d+="&rsvp="+a,jQuery("#full_name").length&&(d+="&name="+encodeURIComponent(jQuery("#full_name").attr("value"))),jQuery("#email").length&&(d+="&email="+encodeURIComponent(jQuery("#email").attr("value"))),d+="&message="+encodeURIComponent(jQuery("#rsvp_message_"+a.toLowerCase()).attr("value")),window.frames.RSVPFrame.location.href=c+d,ShowRSVPConfirmation()}function ShowRSVPConfirmation(){jQuery("#RSVPDiv").html("Thank you for your reply.")}function updateCheckout(){if(!window.gIsSeriesParent){hasQuantity=0,isFree=0,isPaid=0,hasPaid=0;var a="",b=0,c=0,d=0;if(document.mgform){for(var e=document.getElementById("ticketCurrency").value,f=0;f<document.mgform.length;f++){var g=document.mgform.elements[f];if("quant_"==g.name.substring(0,6)&&(1==gShownRemainingTickets&&(0==gFlagWaitlistTicket||gFlagWaitlistTicket>0&&dicTicketId[g.name]!=gFlagWaitlistTicket)&&affectCell(g.name,dicRemainingTicket[g.name]),g[g.selectedIndex].value>0)){hasQuantity=1,ticketQuantity=0;var h=document.mgform.elements[f-1],i=dicMaxTicket[g.name],c=g[g.selectedIndex].value;gTotalRemainingTickets>0&&(b+=parseInt(c),b>gTotalRemainingTickets&&(display_error_msg("alert","quantity_remaining","event"),countOverRequest=gTotalRemainingTickets-d,countOverRequest<=i&&(g.selectedIndex=countOverRequest)),d=b,1==gShownRemainingTickets&&gNbrTicketsType>1&&(0==gFlagWaitlistTicket||gFlagWaitlistTicket>0&&dicTicketId[g.name]!=gFlagWaitlistTicket)&&(remainingCurrentTicket=i-c,affectCell(g.name,remainingCurrentTicket+" "+gSmartling_label_ticket+"s"))),a=h.value.replace(e,""),a.trim()>"0.00"?(isFree=0,isPaid=1,hasPaid=1):isPaid||(isFree=1)}"amt_"==g.name.substring(0,4)&&(a=g.value.replace(e,""),a.trim()>"0.00"&&(hasQuantity=1,isFree=0,isPaid=1,hasPaid=1)),"cost_"==g.name.substring(0,5)&&(a=g.value.replace(e,""),a.trim()>"0.00"&&(hasPaid=1))}if(gTotalRemainingTickets>0){for(var f=0;f<document.mgform.length;f++){var g=document.mgform.elements[f];"quant_"==g.name.substring(0,6)&&(g.disabled=!1)}if(b>=gTotalRemainingTickets)for(var f=0;f<document.mgform.length;f++){var g=document.mgform.elements[f];"quant_"==g.name.substring(0,6)&&(0==g[g.selectedIndex].value&&(g.disabled=!0),1==gShownRemainingTickets&&gNbrTicketsType>1&&(0==gFlagWaitlistTicket||gFlagWaitlistTicket>0&&dicTicketId[g.name]!=gFlagWaitlistTicket)&&affectCell(g.name,"0 "+gSmartling_label_ticket))}}}return hasQuantity&&!isPaid||isFree||!hasPaid?(jQuery("#freeButton").length&&jQuery("#freeButton").css("display","block"),jQuery("#paidButton").length&&jQuery("#paidButton").css("display","none")):(jQuery("#freeButton").length&&jQuery("#freeButton").css("display","none"),jQuery("#paidButton").length&&jQuery("#paidButton").css("display","block")),!0}}function eventbriteCheckout(){document.mgform.payment_type.value="eventbrite",validateform()&&submitCheckoutForm()}function authnetCheckout(){document.mgform.payment_type.value="authnet",validateform()&&submitCheckoutForm()}function monerisCheckout(){document.mgform.payment_type.value="moneris",validateform()&&submitCheckoutForm()}function paypalCheckout(){document.mgform.payment_type.value="paypal",ajax_running||(document.mgform.action="/event/order-start/",validateform()&&(ajax_running=!0,jQuery.post(document.mgform.action,jQuery(document.mgform).serialize()).done(function(a){a.success?a.data.paypal.success?window.top.location=a.data.paypal.redirect_url:a.data.paypal.error&&(displayCustomErrorMessage(a.data.paypal.error),ajax_running=!1):(a.errors?displayCustomErrorMessage(a.errors.join("<br />")):displayErrorMessage("#error_register_3"),ajax_running=!1)}).fail(function(){displayErrorMessage("#error_register_3"),ajax_running=!1})))}function googleCheckout(){document.mgform.payment_type.value="google",validateform()&&submitCheckoutForm()}function offlineCheckout(){document.mgform.payment_type.value="offline",validateform()&&submitCheckoutForm()}function freeCheckout(){document.mgform.payment_type.value="free",validateform()&&submitCheckoutForm()}function Checkout(){document.mgform.payment_type.value="",validateform()&&submitCheckoutForm()}function showLoginRequiredLightbox(a){jQuery("#login_required_lightbox").dialog({modal:!0,dialogClass:"login_required_lightbox",width:400,open:function(){jQuery(this).find(".ui-dialog-footer a").first().blur(),a&&jQuery(this).siblings().children("a.ui-dialog-titlebar-close").remove()}})}function layawayCheckout(){document.mgform.payment_type.value="eventbrite",validateform()&&(window.uid?submitCheckoutForm():showLoginRequiredLightbox())}function isExternalWidget(){return-1!==document.location.href.indexOf("tickets-external")}function getTrackingCategory(){var a="listing";return isExternalWidget()&&(a="listing-external"),a}function trackDiscountCodeApply(){var a=getTrackingCategory(),b=jQuery("body").attr("data-event-id")||"defaultEventId",c=jQuery("#discount_code").val()||"defaultDiscountCode";EB.Analytics&&EB.Analytics.trackEvent({action:"PromoCode",category:a,label:c,dimensions:[EB.Analytics.DIMENSIONS.EXPERIMENT_ID("OldListing"),EB.Analytics.DIMENSIONS.EVENT_ID(b)]})}function trackRegisterButton(){var a=getTrackingCategory(),b=jQuery("body").attr("data-event-id")||"defaultEventId",c=jQuery(".js-checkout-button").text()||"defaultRegister";EB.Analytics&&EB.Analytics.trackEvent({action:"Checkout",category:a,label:c,dimensions:[EB.Analytics.DIMENSIONS.EXPERIMENT_ID("OldListing"),EB.Analytics.DIMENSIONS.EVENT_ID(b)]})}function parseFormData(){var a,b=$(document.mgform).serializeArray(),c=[],d=/quant_(\d+)_/;return _.each(b,function(b){a=d.exec(b.name),a&&c.push({ticket_class_id:a[1],quantity:parseInt(b.value,10)})}),c}function submitCheckoutForm(){var a,b,c;return c=!(!window.EB||!window.EB.VHit),c&&(document.mgform.varnish_hit_event_id.value=document.mgform.eid.value),trackRegisterButton(),EB.featureFlags.purchaseAnywhere&&!EB.featureFlags.pickASeat?void require(["eb/require_app_config","mediatorjs","require/apps/register/component_async","require/entities/v3/attendee_rolled_collection"],function(a,b,c,d){var e=new Marionette.Application,f=jQuery("body").attr("data-event-id"),g=jQuery('[name="affiliate"]').val(),h=jQuery('[name="referrer"]').val(),i=new d([],{eventId:f,affiliate:g,referrerId:h?1007*parseInt(h,10):null});b.set("eventId",f),b.set("fbOptions",{appId:a.FBAppID,fbVersion:a.FBVersion,uid:a.EBUserID}),b.set("contactOrganizerOptions",{captchaKey:a.captchaKey}),b.set("waitlistQueueServer",a.waitlistQueueServer),b.set("registrationOptions",{guestEmailConfirmationFieldEnabled:EB.featureFlags.guestEmailConfirmationFieldEnabled===!0,setOptionalPasswordEnabled:EB.featureFlags.setOptionalPasswordEnabled===!0,surveyEnabled:EB.featureFlags.buyerSurveyEnabled===!0,attendeeSurveyEnabled:EB.featureFlags.attendeeSurveyEnabled===!0,paymentOptionsEnabled:EB.featureFlags.orderPaymentOptions===!0,teamToken:document.mgform.team_token&&document.mgform.team_token.value,recipient_invite_token:b.get("recipient_invite_token"),isMobile:!1}),e.module("register",c),e.start(),i.set(parseFormData()),e.register.start({attendeeCollection:i})}):EB.featureFlags.orderNowLock?void(window.allowCheckoutFormSubmit&&(window.allowCheckoutFormSubmit=!1,a=jQuery(".js-checkout-button").parent().filter(":visible"),b=EB.UIComponents.Loader.createSectionLoader(a,jQuery.Deferred().promise()),b.overlay.css({top:"-20px",padding:"20px 0"}),-1!==navigator.appVersion.indexOf("MSIE 7.")&&(b.overlay.hide(),b.spinner.el.style.top="9px"),document.mgform.submit())):void document.mgform.submit()}function applyDiscount(a){if(""==document.getElementById("discount_code").value){var b=display_error_msg("confirm","discount","event");1==b?document.getElementById("discount_code").focus():(document.getElementById("discountDiv").style.display="none",document.getElementById("discountDiv1").style.display="block")}else{if("/preview"==window.location.pathname)document.mgform.action="/preview?eid="+document.mgform.eid.value;else{var c=jQuery.deparam.querystring();document.mgform._nomo.value&&(c.nomo=1),document.mgform.team_token&&document.mgform.team_token.value&&(c.team_token=document.mgform.team_token.value),"external_body"==a?(document.mgform.target="_self",document.mgform.action="tickets-external?"+jQuery.param(c)):document.mgform.action=EB.getUrl()+"?"+jQuery.param(c)}trackDiscountCodeApply(),submitCheckoutForm()}}function InitCustomizeVar(a){global_sel=global_prfefix_sel+a,global_send_sel=global_prefix_send_sel+a,global_text=a+global_prefix_text,global_html=a+global_prefix_html,global_HeaderFooter=global_prefix_HeaderFooter+a}function ApplyModifHeader(a){""!=a&&(InitCustomizeVar(a),CopyText(global_text,global_HeaderFooter),HideDiv("edit_box_"+a),ShowDiv("preview_"+a),document.getElementById(global_send_sel).checked=document.getElementById(global_sel).checked,document.getElementById(global_html).innerHTML=1==document.getElementById(global_sel).checked?document.getElementById(global_text).value:"")}function EditHeaderFooter(a){InitCustomizeVar(a),HideDiv("preview_"+a),ShowDiv("edit_box_"+a),CopyText(global_HeaderFooter,global_text),document.getElementById(global_sel).checked=document.getElementById(global_send_sel).checked}function PreparePreview(a){InitCustomizeVar(a),document.getElementById(global_html).innerHTML=1==document.getElementById(global_send_sel).checked?document.getElementById(global_HeaderFooter).value:""}function updateTracking(a){a||jQuery.post("/eventclick",{eid:eid})}function IsNumeric(a){var b,c="0123456789.",d=!0;for(i=0;i<a.length&&1==d;i++)if(b=a.charAt(i),-1==c.indexOf(b))return!1;return d}function affectCell(a,b){document.getElementById("remaining_"+a).innerHTML=b}function checkCreditCard(a,b){var c=new Array;c[0]={name:"Visa",length:"13,16",prefixes:"4",checkdigit:!0},c[1]={name:"MasterCard",length:"16",prefixes:"51,52,53,54,55",checkdigit:!0},c[2]={name:"DinersClub",length:"14,16",prefixes:"36,54,55",checkdigit:!0},c[3]={name:"CarteBlanche",length:"14",prefixes:"300,301,302,303,304,305",checkdigit:!0},c[4]={name:"AmEx",length:"15",prefixes:"34,37",checkdigit:!0},c[5]={name:"Discover",length:"16",prefixes:"6011,622,64,65",checkdigit:!0},c[6]={name:"JCB",length:"16",prefixes:"35",checkdigit:!0},c[7]={name:"enRoute",length:"15",prefixes:"2014,2149",checkdigit:!0},c[8]={name:"Solo",length:"16,18,19",prefixes:"6334, 6767",checkdigit:!0},c[9]={name:"Switch",length:"16,18,19",prefixes:"4903,4905,4911,4936,564182,633110,6333,6759",checkdigit:!0},c[10]={name:"Maestro",length:"12,13,14,15,16,18,19",prefixes:"5018,5020,5038,6304,6759,6761",checkdigit:!0},c[11]={name:"VisaElectron",length:"16",prefixes:"417500,4917,4913,4508,4844",checkdigit:!0};for(var d=-1,e=0;e<c.length;e++)if(ccTypeToName[b].toLowerCase()==c[e].name.toLowerCase()){d=e;break}if(-1==d)return ccTypeError="creditcardunknown",!1;if(0==a.length)return ccTypeError="creditcardmissingnumber",!1;a=a.replace(/\s/g,"");var f=a,g=/^[0-9]{13,19}$/;if(!g.exec(f))return ccTypeError="creditcardinvalidnumber",!1;if(c[d].checkdigit){var h,i=0,j=1;for(e=f.length-1;e>=0;e--)h=Number(f.charAt(e))*j,h>9&&(i+=1,h-=10),i+=h,j=1==j?2:1;if(i%10!=0)return ccTypeError="creditcardinvalidtype",!1}var k=!1,l=!1,m=new Array,n=new Array;for(m=c[d].prefixes.split(","),e=0;e<m.length;e++){var o=new RegExp("^"+m[e]);o.test(f)&&(l=!0)}if(!l)return ccTypeError="creditcardinvalidtype",!1;for(n=c[d].length.split(","),j=0;j<n.length;j++)f.length==n[j]&&(k=!0);return k?!0:(ccTypeError="creditcardinvaliddigits",!1)}!function(a,b){a.Spinner=b(),"function"==typeof define&&define.amd&&define("spin",function(){return a.Spinner})}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return l[e]||(m.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",m.cssRules.length),l[e]=1),e}function d(a,b){var c,d,e=a.style;if(void 0!==e[b])return b;for(b=b.charAt(0).toUpperCase()+b.slice(1),d=0;d<k.length;d++)if(c=k[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a=a.offsetParent;)b.x+=a.offsetLeft,b.y+=a.offsetTop;return b}function h(a){return"undefined"==typeof this?new h(a):void(this.opts=f(a||{},h.defaults,n))}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}m.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:j+" "+j,coordorigin:-i+" "+-i}),{width:j,height:j})}function g(a,g,h){b(l,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~g}),b(e(c("roundrect",{arcsize:d.corners}),{width:i,height:d.width,left:d.radius,top:-d.width>>1,filter:h}),c("fill",{color:d.color,opacity:d.opacity}),c("stroke",{opacity:0}))))
}var h,i=d.length+d.width,j=2*i,k=2*-(d.width+d.length)+"px",l=e(f(),{position:"absolute",top:k,left:k});if(d.shadow)for(h=1;h<=d.lines;h++)g(h,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(h=1;h<=d.lines;h++)g(h);return b(a,l)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k=["webkit","Moz","ms","O"],l={},m=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}(),n={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c,d,f=this,h=f.opts,i=f.el=e(a(0,{className:h.className}),{position:h.position,width:0,zIndex:h.zIndex}),k=h.radius+h.length+h.width;if(b&&(b.insertBefore(i,b.firstChild||null),d=g(b),c=g(i),e(i,{left:("auto"==h.left?d.x-c.x+(b.offsetWidth>>1):parseInt(h.left,10)+k)+"px",top:("auto"==h.top?d.y-c.y+(b.offsetHeight>>1):parseInt(h.top,10)+k)+"px"})),i.setAttribute("role","progressbar"),f.lines(i,f.opts),!j){var l,m=0,n=(h.lines-1)*(1-h.direction)/2,o=h.fps,p=o/h.speed,q=(1-h.opacity)/(p*h.trail/100),r=p/h.lines;!function s(){m++;for(var a=0;a<h.lines;a++)l=Math.max(1-(m+(h.lines-a)*r)%p*q,h.opacity),f.opacity(i,a*h.direction+n,l,h);f.timeout=f.el&&setTimeout(s,~~(1e3/o))}()}return f},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function g(b,c){return e(a(),{position:"absolute",width:f.length+f.width+"px",height:f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*i+f.rotate)+"deg) translate("+f.radius+"px,0)",borderRadius:(f.corners*f.width>>1)+"px"})}for(var h,i=0,k=(f.lines-1)*(1-f.direction)/2;i<f.lines;i++)h=e(a(),{position:"absolute",top:1+~(f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,k+i*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(h,e(g("#000","0 0 4px #000"),{top:"2px"})),b(d,b(h,g(f.color,"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}});var o=e(a("group"),{behavior:"url(#default#VML)"});return!d(o,"transform")&&o.adj?i():j=d(o,"animation"),h}),/* ===========================================================
 * bootstrap-tooltip.js v2.3.1
 * http://twitter.github.com/bootstrap/javascript.html#tooltips
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ===========================================================
 * Copyright 2012 Twitter, Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * ========================================================== */
!function(a){"use strict";var b=function(a,b){this.init("tooltip",a,b)};b.prototype={constructor:b,init:function(b,c,d){var e,f,g,h,i;for(this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.enabled=!0,g=this.options.trigger.split(" "),i=g.length;i--;)h=g[i],"click"==h?this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this)):"manual"!=h&&(e="hover"==h?"mouseenter":"focus",f="hover"==h?"mouseleave":"blur",this.$element.on(e+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,a.proxy(this.leave,this)));this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(b){return b=a.extend({},a.fn[this.type].defaults,this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},enter:function(b){var c,d=a.fn[this.type].defaults,e={};return this._options&&a.each(this._options,function(a,b){d[a]!=b&&(e[a]=b)},this),c=a(b.currentTarget)[this.type](e).data(this.type),c.options.delay&&c.options.delay.show?(clearTimeout(this.timeout),c.hoverState="in",void(this.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show))):c.show()},leave:function(b){var c=a(b.currentTarget)[this.type](this._options).data(this.type);return this.timeout&&clearTimeout(this.timeout),c.options.delay&&c.options.delay.hide?(c.hoverState="out",void(this.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide))):c.hide()},show:function(){var b,c,d,e,f,g,h=a.Event("show");if(this.hasContent()&&this.enabled){if(this.$element.trigger(h),h.isDefaultPrevented())return;switch(b=this.tip(),this.setContent(),this.options.animation&&b.addClass("fade"),f="function"==typeof this.options.placement?this.options.placement.call(this,b[0],this.$element[0]):this.options.placement,b.detach().css({top:0,left:0,display:"block"}),this.options.container?b.appendTo(this.options.container):b.insertAfter(this.$element),c=this.getPosition(),d=b[0].offsetWidth,e=b[0].offsetHeight,f){case"bottom":g={top:c.top+c.height,left:c.left+c.width/2-d/2};break;case"top":g={top:c.top-e,left:c.left+c.width/2-d/2};break;case"left":g={top:c.top+c.height/2-e/2,left:c.left-d};break;case"right":g={top:c.top+c.height/2-e/2,left:c.left+c.width}}this.applyPlacement(g,f),this.$element.trigger("shown")}},applyPlacement:function(a,b){var c,d,e,f,g=this.tip(),h=g[0].offsetWidth,i=g[0].offsetHeight;g.offset(a).addClass(b).addClass("in"),c=g[0].offsetWidth,d=g[0].offsetHeight,"top"==b&&d!=i&&(a.top=a.top+i-d,f=!0),"bottom"==b||"top"==b?(e=0,a.left<0&&(e=-2*a.left,a.left=0,g.offset(a),c=g[0].offsetWidth,d=g[0].offsetHeight),this.replaceArrow(e-h+c,c,"left")):this.replaceArrow(d-i,d,"top"),f&&g.offset(a)},replaceArrow:function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},setContent:function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},hide:function(){function b(){var b=setTimeout(function(){c.off(a.support.transition.end).detach()},500);c.one(a.support.transition.end,function(){clearTimeout(b),c.detach()})}var c=this.tip(),d=a.Event("hide");return this.$element.trigger(d),d.isDefaultPrevented()?void 0:(c.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?b():c.detach(),this.$element.trigger("hidden"),this)},fixTitle:function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},hasContent:function(){return this.getTitle()},getPosition:function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},getTitle:function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},tip:function(){return this.$tip=this.$tip||a(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(b){var c=b?a(b.currentTarget)[this.type](this._options).data(this.type):this;c.tip().hasClass("in")?c.hide():c.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("tooltip"),f="object"==typeof c&&c;e||d.data("tooltip",e=new b(this,f)),"string"==typeof c&&e[c]()})},a.fn.tooltip.Constructor=b,a.fn.tooltip.defaults={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(window.jQuery),/*!
 * jQuery BBQ: Back Button & Query Library - v1.2.1 - 2/17/2010
 * http://benalman.com/projects/jquery-bbq-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
// 
// Basic AJAX     - http://benalman.com/code/projects/jquery-bbq/examples/fragment-basic/
// Advanced AJAX  - http://benalman.com/code/projects/jquery-bbq/examples/fragment-advanced/
// jQuery UI Tabs - http://benalman.com/code/projects/jquery-bbq/examples/fragment-jquery-ui-tabs/
// Deparam        - http://benalman.com/code/projects/jquery-bbq/examples/deparam/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4,
//                   Chrome 4-5, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-bbq/unit/
// 
// About: Release History
// 
// 1.2.1 - (2/17/2010) Actually fixed the stale window.location Safari bug from
//         <jQuery hashchange event> in BBQ, which was the main reason for the
//         previous release!
// 1.2   - (2/16/2010) Integrated <jQuery hashchange event> v1.2, which fixes a
//         Safari bug, the event can now be bound before DOM ready, and IE6/7
//         page should no longer scroll when the event is first bound. Also
//         added the <jQuery.param.fragment.noEscape> method, and reworked the
//         <hashchange event (BBQ)> internal "add" method to be compatible with
//         changes made to the jQuery 1.4.2 special events API.
// 1.1.1 - (1/22/2010) Integrated <jQuery hashchange event> v1.1, which fixes an
//         obscure IE8 EmulateIE7 meta tag compatibility mode bug.
// 1.1   - (1/9/2010) Broke out the jQuery BBQ event.special <hashchange event>
//         functionality into a separate plugin for users who want just the
//         basic event & back button support, without all the extra awesomeness
//         that BBQ provides. This plugin will be included as part of jQuery BBQ,
//         but also be available separately. See <jQuery hashchange event>
//         plugin for more information. Also added the <jQuery.bbq.removeState>
//         method and added additional <jQuery.deparam> examples.
// 1.0.3 - (12/2/2009) Fixed an issue in IE 6 where location.search and
//         location.hash would report incorrectly if the hash contained the ?
//         character. Also <jQuery.param.querystring> and <jQuery.param.fragment>
//         will no longer parse params out of a URL that doesn't contain ? or #,
//         respectively.
// 1.0.2 - (10/10/2009) Fixed an issue in IE 6/7 where the hidden IFRAME caused
//         a "This page contains both secure and nonsecure items." warning when
//         used on an https:// page.
// 1.0.1 - (10/7/2009) Fixed an issue in IE 8. Since both "IE7" and "IE8
//         Compatibility View" modes erroneously report that the browser
//         supports the native window.onhashchange event, a slightly more
//         robust test needed to be added.
// 1.0   - (10/2/2009) Initial release
function(a,b){"$:nomunge";function c(a){return"string"==typeof a}function d(a){var b=r.call(arguments,1);return function(){return a.apply(this,b.concat(r.call(arguments)))}}function e(a){return a.replace(/^[^#]*#?(.*)$/,"$1")}function f(a){return a.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")}function g(d,e,f,g,h){var i,k,m,n,o;return g!==j?(m=f.match(d?/^([^#]*)\#?(.*)$/:/^([^#?]*)\??([^#]*)(#?.*)/),o=m[3]||"",2===h&&c(g)?k=g.replace(d?E:D,""):(n=l(m[2]),g=c(g)?l[d?y:x](g):g,k=2===h?g:1===h?a.extend({},g,n):a.extend({},n,g),k=t(k),d&&(k=k.replace(q,s))),i=m[1]+(d?"#":k||!m[1]?"?":"")+k+o):i=e(f!==j?f:b[A][B]),i}function h(a,b,d){return b===j||"boolean"==typeof b?(d=b,b=t[a?y:x]()):b=c(b)?b.replace(a?E:D,""):b,l(b,d)}function i(b,d,e,f){return c(e)||"object"==typeof e||(f=e,e=d,d=j),this.each(function(){var c=a(this),g=d||p()[(this.nodeName||"").toLowerCase()]||"",h=g&&c.attr(g)||"";c.attr(g,t[b](h,e,f))})}var j,k,l,m,n,o,p,q,r=Array.prototype.slice,s=decodeURIComponent,t=a.param,u=a.bbq=a.bbq||{},v=a.event.special,w="hashchange",x="querystring",y="fragment",z="elemUrlAttr",A="location",B="href",C="src",D=/^.*\?|#.*$/g,E=/^.*\#/,F={};t[x]=d(g,0,f),t[y]=k=d(g,1,e),k.noEscape=function(b){b=b||"";var c=a.map(b.split(""),encodeURIComponent);q=new RegExp(c.join("|"),"g")},k.noEscape(",/"),a.deparam=l=function(b,c){var d={},e={"true":!0,"false":!1,"null":null};return a.each(b.replace(/\+/g," ").split("&"),function(b,f){var g,h=f.split("="),i=s(h[0]),k=d,l=0,m=i.split("]["),n=m.length-1;if(/\[/.test(m[0])&&/\]$/.test(m[n])?(m[n]=m[n].replace(/\]$/,""),m=m.shift().split("[").concat(m),n=m.length-1):n=0,2===h.length)if(g=s(h[1]),c&&(g=g&&!isNaN(g)?+g:"undefined"===g?j:e[g]!==j?e[g]:g),n)for(;n>=l;l++)i=""===m[l]?k.length:m[l],k=k[i]=n>l?k[i]||(m[l+1]&&isNaN(m[l+1])?{}:[]):g;else a.isArray(d[i])?d[i].push(g):d[i]=d[i]!==j?[d[i],g]:g;else i&&(d[i]=c?j:"")}),d},l[x]=d(h,0),l[y]=m=d(h,1),a[z]||(a[z]=function(b){return a.extend(F,b)})({a:B,base:B,iframe:C,img:C,input:C,form:"action",link:B,script:C}),p=a[z],a.fn[x]=d(i,x),a.fn[y]=d(i,y),u.pushState=n=function(a,d){c(a)&&/^#/.test(a)&&d===j&&(d=2);var e=a!==j,f=k(b[A][B],e?a:{},e?d:2);b[A][B]=f+(/#/.test(f)?"":"#")},u.getState=o=function(a,b){return a===j||"boolean"==typeof a?m(a):m(b)[a]},u.removeState=function(b){var c={};b!==j&&(c=o(),a.each(a.isArray(b)?b:arguments,function(a,b){delete c[b]})),n(c,2)},v[w]=a.extend(v[w],{add:function(b){function c(a){var b=a[y]=k();a.getState=function(a,c){return a===j||"boolean"==typeof a?l(b,a):l(b,c)[a]},d.apply(this,arguments)}var d;return a.isFunction(b)?(d=b,c):(d=b.handler,void(b.handler=c))}})}(jQuery,this),/*!
 * jQuery hashchange event - v1.2 - 2/11/2010
 * http://benalman.com/projects/jquery-hashchange-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
// About: License
// 
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
// 
// About: Examples
// 
// This working example, complete with fully commented code, illustrate one way
// in which this plugin can be used.
// 
// hashchange event - http://benalman.com/code/projects/jquery-hashchange/examples/hashchange/
// 
// About: Support and Testing
// 
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
// 
// jQuery Versions - 1.3.2, 1.4.1, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.7, Safari 3-4, Chrome, Opera 9.6-10.1.
// Unit Tests      - http://benalman.com/code/projects/jquery-hashchange/unit/
// 
// About: Known issues
// 
// While this jQuery hashchange event implementation is quite stable and robust,
// there are a few unfortunate browser bugs surrounding expected hashchange
// event-based behaviors, independent of any JavaScript window.onhashchange
// abstraction. See the following examples for more information:
// 
// Chrome: Back Button - http://benalman.com/code/projects/jquery-hashchange/examples/bug-chrome-back-button/
// Firefox: Remote XMLHttpRequest - http://benalman.com/code/projects/jquery-hashchange/examples/bug-firefox-remote-xhr/
// WebKit: Back Button in an Iframe - http://benalman.com/code/projects/jquery-hashchange/examples/bug-webkit-hash-iframe/
// Safari: Back Button from a different domain - http://benalman.com/code/projects/jquery-hashchange/examples/bug-safari-back-from-diff-domain/
// 
// About: Release History
// 
// 1.2   - (2/11/2010) Fixed a bug where coming back to a page using this plugin
//         from a page on another domain would cause an error in Safari 4. Also,
//         IE6/7 Iframe is now inserted after the body (this actually works),
//         which prevents the page from scrolling when the event is first bound.
//         Event can also now be bound before DOM ready, but it won't be usable
//         before then in IE6/7.
// 1.1   - (1/21/2010) Incorporated document.documentMode test to fix IE8 bug
//         where browser version is incorrectly reported as 8.0, despite
//         inclusion of the X-UA-Compatible IE=EmulateIE7 meta tag.
// 1.0   - (1/9/2010) Initial Release. Broke out the jQuery BBQ event.special
//         window.onhashchange functionality into a separate plugin for users
//         who want just the basic event & back button support, without all the
//         extra awesomeness that BBQ provides. This plugin will be included as
//         part of jQuery BBQ, but also be available separately.
function(a,b,c){"$:nomunge";function d(a){return a=a||b[g][i],a.replace(/^[^#]*#?(.*)$/,"$1")}var e,f=a.event.special,g="location",h="hashchange",i="href",j=a.browser,k=document.documentMode,l=j.msie&&(k===c||8>k),m="on"+h in b&&!l;a[h+"Delay"]=100,f[h]=a.extend(f[h],{setup:function(){return m?!1:void a(e.start)},teardown:function(){return m?!1:void a(e.stop)}}),e=function(){function c(){j=k=function(a){return a},l&&(f=a('<iframe src="javascript:0"/>').hide().insertAfter("body")[0].contentWindow,k=function(){return d(f.document[g][i])},(j=function(a,b){if(a!==b){var c=f.document;c.open().close(),c[g].hash="#"+a}})(d()))}var e,f,j,k,m={};return m.start=function(){if(!e){var f=d();j||c(),function l(){var c=d(),m=k(f);c!==f?(j(f=c,m),a(b).trigger(h)):m!==f&&(b[g][i]=b[g][i].replace(/#.*/,"")+"#"+m),e=setTimeout(l,a[h+"Delay"])}()}},m.stop=function(){f||(e&&clearTimeout(e),e=0)},m}()}(jQuery,this),/******************************************************************************************************

	jQuery.ThreeDots

	Author Jeremy Horn
	Version 1.0.10 (Developed in Aptana Studio 1.5.1)
	Date: 1/25/2010

	Copyright (c) 2010 Jeremy Horn- jeremydhorn(at)gmail(dot)c0m | http://tpgblog.com
	Dual licensed under MIT and GPL.

	For more detailed documentation, including the latest updates and links to more usage and 
	examples, go to:
	
			http://tpgblog.com/ThreeDots/

	KNOWN BUGS
		None

	DESCRIPTION

		Sometimes the text ...
			... is too long ...
			... won't fit within the number of rows you have available.
		
		Sometimes all you need is ... ThreeDots!
		
		ThreeDots is a customizable jQuery plugin for the smart truncation of text.  It shortens 
		provided text to fit specified dimensions and appends the desired ellipsis style
		if/when truncation occurs.  		
		
		For example ---
		
			This:
				There was once a brown fox
				that liked to eat chocolate
				pudding.
			
			When restricted to 2 lines by ThreeDots, can become:
				There was once a brown fox
				that liked to eat ...
				
			Or:
				There was once a brown fox
				that liked to (click for more)

			... and most any other permutation you desire.


	BY DEFAULT
		The three dots ellipsis ("...") is used, as shown in the prior example, and limits
		text to a maximum of 2 lines.  These and many other characteristics are fully customizable,
		and fully itemized and explained below.


	IMPLEMENTATION

		HTML:		<div class='text_here'><span class='ellipsis_text'>TEXT</span></div>
		JS:			$('.text_here').ThreeDots(); // USE DEFAULTS
					$('.text_here2').ThreeDots({ { max_rows:3 });
		

	COMPATIBILITY

		Tested in FF3.5, IE7, Chrome
		With jQuery 1.3.x, 1.4

	METHODS

		ThreeDots()
		
		When intialized the ThreeDots plugin creates and assigns the full set of provided text 
		to each container element as a publically accessible attribute, 'threedots'.  Method 
		implementation supports chaining and returns jQuery object.

		Note that to implement, the text that you wish to ellipsize must be wrapped in a span
		assigned either the default class 'ellipsis_text' or other custom class of your 
		preference -- customizable via the options/settings.
		
		If the text becomes truncated to fit within the constrained space defined by the 
		container element that holds the 'ellipsis_text' span then an additional span is
		appended within the container object, and after the 'ellipsis_text' span.
		
		Note, that the span class of 'threedots_ellipsis' can also be customized via the 
		options/settings and have it's own CSS/jQuery styles/actions/etc. applied to it as
		desired.
		
		If any of the specified settings are invalid or the 'ellipsis_text' span is missing
		nothing will happen.

		IMPORTANT:	The horizontal constrains placed upon each row are controled by the 
					container object.  The container object is the object specified in the 
					primary selector.
					
						e.g. $('container_object').ThreeDots();
					
					So, remember to set container_object's WIDTH.
						
		ThreeDots.update()
			Refreshes the contents of the text within the target object inline with the
			options provided. Note, that the current implementation of options/settings
			are destructive.  This means that whenever OPTIONS are specified they are
			merged with the DEFAULT options and applied to the current object(s), and 
			destroy/override any previously specified options/settings.
			
				example:
					var obj = $('.text_here').ThreeDots();  // uses DEFAULT: max_rows = 2
					obj.update({max_rows:3});				// update the text with max_rows = 3

	CUSTOMIZATION

		ThreeDots(OPTIONS)
		e.g. $('.text_here').ThreeDots({ max_rows: 4 });
					
		
		valid_delimiters:	character array of special characters upon which the text string may be broken up;
							defines what characters can be used to express the bounds of a word
							
							all elements in this array must be 1 character in length; any delimiter less than 
							or greater than	1 character will be ignored
														
							
		ellipsis_string: 	defines what to display at the tail end of the text provided if the text becomes 
							truncated to fit within the space defined by the container object
												
							
		max_rows:			specifies the upper limit for the number of rows that the object's text can use
				
		
		text_span_class:	by default ThreeDots will look within the specified object(s) for a span
							of the class 'ellipsis_text'
							
		
		e_span_class:		if an ellipsis_string is displayed at the tail end of the selected object's
							text due to truncation of that text then it will be displayed wrapped within
							a span associated with the class defined by e_span_class and immediately
							following the text_span_class' span
		
		
		whole_word:			when fitting the provided text to the max_rows within the container object
							this boolean setting defines whether or not the 
							
								if true
									THEN	don't truncate any words; ellipsis can ONLY be placed after 
											the last whole word that fits within the provided space, OR
											
								if false
									THEN	maximuze the text within the provided space, allowing the 
											PARTIAL display of words before the ellipsis
		
		
		allow_dangle:		a dangling ellipsis is an ellipsis that typically occurs due to words that
							are longer than a single row of text, resulting, upon text truncation in
							the ellipsis being displayed on a row all by itself
													
							if allow_dangle is set to false, whole_words is overridden ONLY in the 
							circumstances where a dangling ellipsis occurs and the displayed text
							is adjusted to minimize the occurence of such dangling
									
		
		alt_text_e: 		alt_text_e is a shortcut to enabling the user of the product that 
							made use of ThreeDots to see the full text, prior to truncation
							
							if the value is set to true, then the ellipsis span's title property
							is set to the full, original text (pre-truncation)
		
		
		alt_text_t: 		alt_text_t is a shortcut to enabling the user of the product that 
							made use of ThreeDots to see the full text, prior to truncation
							
							if the value is set to true AND the ellipsis is displayed, then the 
							text span's title property is set to the full, original text 
							(pre-truncation) 
	

	MORE

		For latest updates and links to more usage and examples, go to:
			http://tpgblog.com/ThreeDots/
			
	FUTURE NOTE
	
		Do not write any code dependent on the c_settings variable.  If you don't know what this is
		cool -- you don't need to. ;-)  c_settings WILL BE DEPRECATED.
		
		Further optimizations in progress...

******************************************************************************************************/
function(a){function b(b,d){if(1==a.fn.ThreeDots.c_settings.allow_dangle)return!1;var e=a(b).children("."+a.fn.ThreeDots.c_settings.e_span_class).get(0),f=a(e).css("display"),g=c(b,d);a(e).css("display","none");var h=c(b,d);return a(e).css("display",f),g>h?!0:!1}function c(b,c){var d=typeof c;if("object"==d||void 0==d)return a(b).height()/c.lh;if("boolean"==d){var f=e(a(b));return{lh:f}}}function d(b){var c=a.fn.ThreeDots.c_settings.valid_delimiters;b=jQuery.trim(b);var d=-1,e=null,f=null;return jQuery.each(c,function(a,c){if(1!=new String(c).length||null==c)return!1;var g=b.lastIndexOf(c);-1!=g&&g>d&&(d=g,e=b.substring(d+1),f=c)}),d>0?{updated_string:jQuery.trim(b.substring(0,d)),word:e,del:f}:{updated_string:"",word:jQuery.trim(b),del:null}}function e(b){a(b).append("<div id='temp_ellipsis_div' style='position:absolute; visibility:hidden'>H</div>");var c=a("#temp_ellipsis_div").height();return a("#temp_ellipsis_div").remove(),c}function f(b,d,e){var f,g,h,i,j,k=a(d).text(),l=k,m=a.fn.ThreeDots.c_settings.max_rows;if(!(c(b,e)<=m))for(j=0,curr_length=l.length,curr_middle=Math.floor((curr_length-j)/2),f=k.substring(j,j+curr_middle),g=k.substring(j+curr_middle);0!=curr_middle;)a(d).text(f),c(b,e)<=m?(i=Math.floor(g.length/2),h=g.substring(0,i),j=f.length,l=f+h,curr_length=l.length,a(d).text(l)):(l=f,curr_length=l.length),curr_middle=Math.floor((curr_length-j)/2),f=k.substring(0,j+curr_middle),g=k.substring(j+curr_middle)}a.fn.ThreeDots=function(b){var c=this;if("object"==typeof b||void 0==b){a.fn.ThreeDots.the_selected=this;var c=a.fn.ThreeDots.update(b)}return c},a.fn.ThreeDots.update=function(e){var g,h,i,j,k,l,m=null;if("object"==typeof e||void 0==e){a.fn.ThreeDots.c_settings=a.extend({},a.fn.ThreeDots.settings,e);var n=a.fn.ThreeDots.c_settings.max_rows;if(1>n)return a.fn.ThreeDots.the_selected;var o=!1;if(jQuery.each(a.fn.ThreeDots.c_settings.valid_delimiters,function(a,b){1==new String(b).length&&(o=!0)}),0==o)return a.fn.ThreeDots.the_selected;a.fn.ThreeDots.the_selected.each(function(){if(g=a(this),0==a(g).children("."+a.fn.ThreeDots.c_settings.text_span_class).length)return!0;h=a(g).children("."+a.fn.ThreeDots.c_settings.text_span_class).get(0);var e=c(g,!0),o=a(h).text();f(g,h,e);var p=a(h).text();if(void 0!=(k=a(g).attr("threedots"))&&(a(h).text(k),a(g).children("."+a.fn.ThreeDots.c_settings.e_span_class).remove()),j=a(h).text(),j.length<=0&&(j=""),a(g).attr("threedots",o),c(g,e)>n){for(curr_ellipsis=a(g).append('<span style="white-space:nowrap" class="'+a.fn.ThreeDots.c_settings.e_span_class+'">'+a.fn.ThreeDots.c_settings.ellipsis_string+"</span>");c(g,e)>n&&(i=d(a(h).text()),a(h).text(i.updated_string),m=i.word,l=i.del,null!=l););if(null!=m){var q=b(g,e);if(c(g,e)<=n-1||q||!a.fn.ThreeDots.c_settings.whole_word)if(j=a(h).text(),null!=i.del&&a(h).text(j+l),c(g,e)>n)a(h).text(j);else if(a(h).text(a(h).text()+m),c(g,e)>n+1||!a.fn.ThreeDots.c_settings.whole_word||p==m||q)for(;c(g,e)>n&&a(h).text().length>0;)a(h).text(a(h).text().substr(0,a(h).text().length-1))}}o==a(a(g).children("."+a.fn.ThreeDots.c_settings.text_span_class).get(0)).text()?a(g).children("."+a.fn.ThreeDots.c_settings.e_span_class).remove():a(g).children("."+a.fn.ThreeDots.c_settings.e_span_class).length>0&&(a.fn.ThreeDots.c_settings.alt_text_t&&a(g).children("."+a.fn.ThreeDots.c_settings.text_span_class).attr("title",o),a.fn.ThreeDots.c_settings.alt_text_e&&a(g).children("."+a.fn.ThreeDots.c_settings.e_span_class).attr("title",o))})}return a.fn.ThreeDots.the_selected},a.fn.ThreeDots.settings={valid_delimiters:[" ",",","."],ellipsis_string:"...",max_rows:2,text_span_class:"ellipsis_text",e_span_class:"threedots_ellipsis",whole_word:!0,allow_dangle:!1,alt_text_e:!1,alt_text_t:!1}}(jQuery),/**
* hoverIntent is similar to jQuery's built-in "hover" function except that
* instead of firing the onMouseOver event immediately, hoverIntent checks
* to see if the user's mouse has slowed down (beneath the sensitivity
* threshold) before firing the onMouseOver event.
* 
* hoverIntent r6 // 2011.02.26 // jQuery 1.5.1+
* <http://cherne.net/brian/resources/jquery.hoverIntent.html>
* 
* hoverIntent is currently available for use in all personal or commercial 
* projects under both MIT and GPL licenses. This means that you can choose 
* the license that best suits your project, and use it accordingly.
* 
* // basic usage (just like .hover) receives onMouseOver and onMouseOut functions
* $("ul li").hoverIntent( showNav , hideNav );
* 
* // advanced usage receives configuration object only
* $("ul li").hoverIntent({
*	sensitivity: 7, // number = sensitivity threshold (must be 1 or higher)
*	interval: 100,   // number = milliseconds of polling interval
*	over: showNav,  // function = onMouseOver callback (required)
*	timeout: 0,   // number = milliseconds delay before onMouseOut function call
*	out: hideNav    // function = onMouseOut callback (required)
* });
* 
* @param  f  onMouseOver function || An object with configuration options
* @param  g  onMouseOut function  || Nothing (use configuration options object)
* @author    Brian Cherne brian(at)cherne(dot)net
*/
function(a){a.fn.hoverIntent=function(b,c){var d={sensitivity:7,interval:100,timeout:0};d=a.extend(d,c?{over:b,out:c}:b);var e,f,g,h,i=function(a){e=a.pageX,f=a.pageY},j=function(b,c){return c.hoverIntent_t=clearTimeout(c.hoverIntent_t),Math.abs(g-e)+Math.abs(h-f)<d.sensitivity?(a(c).unbind("mousemove",i),c.hoverIntent_s=1,d.over.apply(c,[b])):(g=e,h=f,c.hoverIntent_t=setTimeout(function(){j(b,c)},d.interval),void 0)},k=function(a,b){return b.hoverIntent_t=clearTimeout(b.hoverIntent_t),b.hoverIntent_s=0,d.out.apply(b,[a])},l=function(b){var c=jQuery.extend({},b),e=this;e.hoverIntent_t&&(e.hoverIntent_t=clearTimeout(e.hoverIntent_t)),"mouseenter"==b.type?(g=c.pageX,h=c.pageY,a(e).bind("mousemove",i),1!=e.hoverIntent_s&&(e.hoverIntent_t=setTimeout(function(){j(c,e)},d.interval))):(a(e).unbind("mousemove",i),1==e.hoverIntent_s&&(e.hoverIntent_t=setTimeout(function(){k(c,e)},d.timeout)))};return this.bind("mouseenter",l).bind("mouseleave",l)}}(jQuery),window.EB=window.EB||{},EB.util=function(a,b){"use strict";var c=/(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?/,d=/(?:(.+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?/;return{truncate:function(a,b){return"string"!=typeof a?"":b>3&&a.length>b?a.slice(0,b-3)+"...":a},sort:function(a){return a.split("").sort().join("")},getCookie:function(b){var c=null;if(document.cookie&&""!==document.cookie)for(var d=document.cookie.split(";"),e=0;e<d.length;e++){var f=a.trim(d[e]);if(f.substring(0,b.length+1)===b+"="){c=decodeURIComponent(f.substring(b.length+1));break}}return c},unshuffle:function(a,b){var c,d={};a=a.toLowerCase(),c=this.sort(a);for(var e=0;e<b.length;e++){var f=b[e].toLowerCase();d[this.sort(f)]=f}return d.hasOwnProperty(c)?d[c]:a},parseUrl:function(a,b){var e={},f=["url","scheme","slash","host","port","path","query","fragment"],g=b?d.exec(a):c.exec(a);if(null!==g)for(var h=0;h<f.length;h++)e[f[h]]=g[h];return e},looksLikeUrl:function(a){var c,d=b.util.parseUrl(a,!0);return d.scheme?!0:d.host&&(c=d.host.split("."),c.length>1&&""!==c[1])?!0:!1},scrollToElement:function(b){var c=b.offset();c&&c.top&&a("body, html").animate({scrollTop:c.top-25})},h:function(a){var b,c={},d=96,e=27;if(arguments.length>e)throw new Error("EB.Util.h received too many arguments. Got: "+arguments.length);for(var f=1;f<arguments.length;f++)c[String.fromCharCode(d+f)]=arguments[f];return(b=Handlebars.compile(a))(c)}}}(window.jQuery,EB),/**
 * Requires
 * - Underscore
 */
function(){"use strict";var a={lines:12,length:2,width:2,radius:4,corners:1,rotate:0,direction:1,color:"#ffffff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"spinner--small",zIndex:1,top:"auto",left:"auto"},b=_.extend({},a,{length:3,width:3,radius:7,className:"spinner--medium"}),c=_.extend({},a,{length:5,width:4,radius:9,className:"spinner--large"});EB.namespace("SpinSettings"),EB.SpinSettings={small:a,medium:b,large:c}}(),function(a,b){b(document).ajaxSend(function(a,c,d){function e(a){var c=null;if(document.cookie&&""!==document.cookie)for(var d=document.cookie.split(";"),e=0;e<d.length;e++){var f=b.trim(d[e]);if(f.substring(0,a.length+1)===a+"="){c=decodeURIComponent(f.substring(a.length+1));break}}return c}function f(a){var b=document.location.host,c=document.location.protocol,d="//"+b,e=c+d;return a===e||a.slice(0,e.length+1)===e+"/"||a===d||a.slice(0,d.length+1)===d+"/"||!/^(\/\/|http:|https:).*/.test(a)}function g(a){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)}!g(d.type)&&f(d.url)&&c.setRequestHeader("X-CSRFToken",e("csrftoken"))})}(window.EB=window.EB||{},jQuery),function(a,b){"use strict";b.registerHelper("iframe",function(a){return new b.SafeString("<iframe "+a.fn(this)+"></iframe>")})}(window,window.Handlebars),function(a){"use strict";Handlebars.registerHelper("chain",function(){var b=a.first(arguments).replace(/\s+/," ").split(" "),c=a.rest(arguments);return a(b).each(function(a){return"string"!=typeof a?!1:(c[0]=Handlebars.helpers[a].apply(null,c),!1)}),c[0]})}(window._),function(a){"use strict";a.registerHelper("markSafe",function(b){return new a.SafeString(b)})}(window.Handlebars),/**
 * Functional advice-based mixins using Backbone.Advice
 *
 * Generally we favour mixins over inheritance, as that creates a single rooted hierarchy that
 * often results in a super base class.
 *
 * Using Backbone.Advice we can flexibly add behaviour, and augment existing functions without
 * clobbering the original implementation. It's also possible for the mixer to override default
 * implementations for some of the hook functions providing a lot of flexibility, but providing
 * sane defaults that allow mixins to read declaritvely in the common case.
 *
 * Backbone.Advice docs: https://github.com/rhysbrettbowen/Backbone.Advice
 * Related Angus Croll slides:
 * https://speakerdeck.com/anguscroll/how-we-learned-to-stop-worrying-and-love-javascript
 *
 * Example mixin usage:
 * View.extend({
 *     initialize: function(){...},
 *     someFunctionOverride: function(){
 *       // custom behaviour
 *     }
 * }).mixin(
 *     EB.Backbone.Mixins.exampleMixin,
 *     {
 *         option1: true,
 *         option2: 'text'
 *     }
 * ).mixin(
 *     EB.Backbone.Mixins.anotherMixin,
 *     {
 *         anotherMixinOption1: false,
 *         anotherMixinOption2: 10
 *     }
 * )
 *
 */
function(a,b,c,d,e){"use strict";c.namespace("Backbone.Mixins");var f=function(a,b){"object"==typeof a&&"function"!=typeof b.View.mixin&&(a.addMixin(b.View),a.addMixin(b.Model),a.addMixin(b.Collection))};f(e.Advice,c.Backbone),f(e.Advice,e),c.Backbone.Mixins.enforceDependencies=function(a){this.around("initialize",function(c,d,e){var f="undefined"==typeof this.attributes&&"undefined"==typeof this.fetch;if(f&&(e=d),"undefined"==typeof e)throw new Error("Missing options");var g=this.requiredOptions||a.dependencies;if(!g)throw new Error("Missing list of dependencies");b.each(g,function(a){if("undefined"==typeof e[a])throw new Error("Missing required dependency: "+a);this[a]=e[a]},this),c(e)})},c.Backbone.Mixins.rejectWithServerErrors=function(b){this.setDefaults({rejectWithServerErrors:function(){return a.Deferred().reject({__all__:b.serverErrorMessage||window.gettext("Whoops! Someone must have pulled a plug somewhere... try again.")})}})},c.Backbone.Mixins.rejectIfServerValidationErrors=function(){this.setDefaults({rejectIfServerValidationErrors:function(b){return b.success?b:a.Deferred().reject(this.processServerValidationErrors(b))},processServerValidationErrors:function(a){return a.errors}}),this.after("initialize",function(){b.bindAll(this,"rejectIfServerValidationErrors","processServerValidationErrors")})},c.Backbone.Mixins.withTemplate=function(a){this.after("initialize",function(){if(!a.template&&!a.templateName&&!this.getTemplateName)throw new Error("Missing templateName or getTemplateName function");this.template="function"==typeof a.template?a.template:d.templates[a.templateName||this.getTemplateName()]}),this.around("render",function(a){return this.$el.html(this.template(this.getContextData(),this.getTemplateOptions())),a(),this}),this.setDefaults({getContextData:function(){return this.model?this.model.toJSON():{}},getTemplateOptions:function(){return a.templateOptions||{}}})};var g=function(a){var c=a&&a.bindingDefaults||{events:["blur","cut","paste","change"],onSet:"onSet"};this.after("initialize",function(){var d=a&&a.bindings||this.bindings;if(!d)throw new Error("Bindings missing");b.each(b.keys(d),function(a){var e=d[a];b.isString(e)&&(e=b.extend({observe:e},c),d[a]=e)}),this.bindings=d}),this.setDefaults({onSet:function(a){return a}})};c.Backbone.Mixins.withStickit=function(a){this.mixin(g,a),this.after("render",function(){this.stickit()})},c.Backbone.Mixins.withStickitForMarionette=function(a){this.mixin(g,a),this.before("onRender",function(){this.stickit()}),this.after("onShow",function(){this.stickit()})},c.Backbone.Mixins.withInputValidation=function(){this.after("initialize",function(){if(!this.model)throw new Error("Missing model");c.Backbone.Validation.bind(this,{forceUpdate:!0}),b.bindAll(this,"displayValidationErrors","handleFormLevelError","resetValidationErrors","bindValidationToEvent"),this.errors={}}),this.around("onSet",function(a,b,c){b=a(b,c);var d=this.model.preValidate(c.observe,b);return!d||!b&&this.ignoreEmptyValues()?this.hideFieldValidationError(c.observe):this.showFieldValidationError(c.observe,d),b}),this.setDefaults({ignoreEmptyValues:function(){return!0},handleFormLevelError:function(a){e.Events.trigger("pageNotification",{type:"error",messages:[a]})},getSelectorForAttr:function(a){return b.find(b.keys(this.bindings),function(b){return this.bindings[b].observe===a?b:void 0},this)},get$InputForAttr:function(a){return this.$(this.getSelectorForAttr(a))},get$ErrorMessageForAttr:function(a){return this.$(".js-error-for-"+a)},showFieldValidationError:function(a,b){this.get$InputForAttr(a).addClass("has-form-input-error"),this.get$ErrorMessageForAttr(a).removeClass("is-hidden").html(b),this.errors[a]=b},hideFieldValidationError:function(a){this.get$InputForAttr(a).removeClass("has-form-input-error"),this.get$ErrorMessageForAttr(a).addClass("is-hidden").html(""),this.errors[a]&&delete this.errors[a]},displayValidationErrors:function(a){this.errors=a,b.each(a,function(c,d){if(a.hasOwnProperty(d)){if(b.isArray(c)&&c.length>0&&(c=c[0]),"__all__"===d)return void this.handleFormLevelError(c);this.showFieldValidationError(d,c),this.model.once("change:"+d,b.bind(function(){this.hideFieldValidationError(d)},this))}},this),b.isEmpty(a)||this.postDisplayValidationErrorsHook(a)},resetValidationErrors:function(){b.isEmpty(this.errors)||(b.each(this.errors,function(a,b){this.errors.hasOwnProperty(b)&&this.hideFieldValidationError(b)},this),this.errors={})},validateView:function(){var a=this.model.validate(void 0,{forceUpdate:!1});return a?(this.displayValidationErrors(a),this.$(".form__field-error").not(":empty").length>0&&this.trigger("validationFail",a),!0):(this.trigger("validationSuccess"),!1)},bindValidationToEvent:function(a,b,c){this.listenTo(a,b,function(){this.onSet(a.get(c),{observe:c})})},postDisplayValidationErrorsHook:function(){}})},c.Backbone.Mixins.collectionView=function(c){if(!c.containerSelector)throw new Error("Missing container selector");if(!c.viewClass)throw new Error("Missing View Class");this.setDefaults({handleModelAdded:function(a){var c,d;d=this.viewParameters||{},d.model=a,c=new this.viewClass(d),c.$el.data("cid",a.cid),this.modelCIDViewMap[a.cid]=c,this.container.append(c.render().el),1===b.size(this.modelCIDViewMap)&&this.handleFirstViewAdded(c),this.handleViewAdded(c,a)},handleModelDeleted:function(a){var b=this.modelCIDViewMap[a.cid];delete this.modelCIDViewMap[a.cid],this.collection.length<1&&this.handleNoViews(),this.handleViewRemoved(b)},renderView:function(a){var b=this.modelCIDViewMap[a.cid];this.container.append(b.render().el)},handleFirstViewAdded:function(){},handleNoViews:function(){},handleViewAdded:function(){},handleViewRemoved:function(){}}),this.after("initialize",function(){if(b.bindAll(this,"handleModelAdded","handleModelDeleted","renderView","handleFirstViewAdded","handleNoViews","handleViewAdded","handleViewRemoved"),this.modelCIDViewMap={},this.viewClass=c.viewClass,!this.collection||!c.collectionClass)throw new Error("Missing collection");this.collection=this.collection||c.collectionClass({}),this.listenTo(this.collection,"add",this.handleModelAdded),this.listenTo(this.collection,"remove",this.handleModelDeleted)}),this.after("render",function(){this.container=a("<div>"),this.collection.each(this.handleModelAdded),this.$(c.containerSelector).append(this.container),this.trigger("collection:rendered")})},c.Backbone.Mixins.sortableCollectionView=function(d){if(!d.handle)throw new Error("Missing handle");this.mixin([c.Backbone.Mixins.collectionView],{containerSelector:d.containerSelector,viewClass:d.viewClass,collectionClass:d.collectionClass}),this.setDefaults({handleViewMoved:function(){this.container.children().each(this.setModelIndex),this.collection.sort()},setModelIndex:function(b,c){var d=a(c).data("cid");this.collection.get(d).set("index",b)}}),this.after("initialize",function(){b.bindAll(this,"handleViewMoved","setModelIndex")}),this.after("render",function(){this.container.on("sortstop",this.handleViewMoved),this.container.sortable({axis:"y",containment:"parent",handle:d.handle,tolerance:"pointer",zIndex:6,cursor:"pointer"})})},c.Backbone.Mixins.withDynamicFormPost=function(){this.setDefaults({dynamicFormPost:function(b,c){var d,e=a('<form action="'+b+'" method="POST"></form>');for(d in c)c.hasOwnProperty(d)&&e.append(a('<input type="hidden" name="'+d+'" value="'+c[d]+'"/>'));e.appendTo(this.$el).trigger("submit")}}),this.after("initialize",function(){b.bindAll(this,"dynamicFormPost")})},c.Backbone.Mixins.disabledInputs=function(){this.setDefaults({disableInputs:function(){this.$("btn").addClass("btn--disabled"),this.$("input").prop("disabled",!0),this.$("textarea").prop("disabled",!0),this.$("select").prop("disabled",!0)}}),this.after("initialize",function(){b.bindAll(this,"disableInputs")})},c.Backbone.Mixins.sortableByIndex=function(){this.setDefaults({comparator:function(a){return a.get("index")},handleModelAdd:function(a){this.maxIndex+=1,a.set("index",this.maxIndex)},handleModelRemove:function(){this.maxIndex-=1,this.setIndexes()},setIndexes:function(){this.each(function(a,b){a.set("index",b)})}}),this.after("initialize",function(){b.bindAll(this,"handleModelAdd","handleModelRemove","setIndexes"),this.maxIndex=-1,this.on("add",this.handleModelAdd),this.on("remove",this.handleModelRemove)}),this.after("reset",function(){this.setIndexes(),this.maxIndex=this.length-1})},c.Backbone.Mixins.autocompleteHelpers=function(){this.setDefaults({_highlightText:function(b,c){var d=new RegExp("("+a.ui.autocomplete.escapeRegex(c)+")","ig");return b.replace(d,'<span class="text-body--significant">$1</span>')},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").html(c.label)).appendTo(b)},_populateAutocomplete:function(){a(this).autocomplete("search")}})},"function"==typeof define&&define("eb/backbone/mixins",["backbone_advice","backbone_stickit","backbone_validation"],function(a){return f(a,c.Backbone),f(a,e),c.Backbone.Mixins})}(window.jQuery,window._,window.EB,window.Handlebars,window.Backbone),/*
 * This is being used on the Advanced Teams / Group Registration listing pages
 */
function(a,b){"use strict";b.namespace("EventPage"),b.EventPage.Router=b.Backbone.Router.extend({initialize:function(a){var c=this;a.userAttributes&&(this.ebUser=new b.EventPage.UserModel(a.userAttributes)),this.ticket=new b.EventPage.FreeTicketModel(a.ticketAttributes),this.event=new b.Models.EventModel(a.eventAttributes),this.survey=new b.EventPage.BasicSurveyModel({ticket:this.ticket}),require(["eb/social/facebook_user_model","require/entities/facebook_user_model"],function(d,e){d.FBInit.appId=a.fbAppId,d.FBInit.version=a.fbVersion,c.facebookUser=new e({eb_user_id:b.getUid()},{internalReferrer:a.socialIdentityInternalReferrer,shouldRecordSocialIdentity:!1}),c.orderView=new b.EventPage.OrderView({ebUser:c.ebUser,facebookUser:c.facebookUser,event:c.event,survey:c.survey,friendsGoingEnabled:a.friendsGoingEnabled,isWaitingRoomEnabled:a.isWaitingRoomEnabled,isPreview:a.isPreview,affiliateCode:a.affiliateCode,affiliateUser:a.affiliateUser,invite:a.invite})}),this.ticketOrderView=new b.EventPage.TicketOrderView({ebUser:this.ebUser,event:this.event,friendsGoingEnabled:a.friendsGoingEnabled,isWaitingRoomEnabled:a.isWaitingRoomEnabled,isPreview:a.isPreview,affiliateCode:a.affiliateCode,affiliateUser:a.affiliateUser,invite:a.invite}),this.shareLinksView=new b.EventPage.ShareLinksView,this.order=this.orderView.order,this.analytics=new b.EventPage.AnalyticsModel({event:this.event}),a.isPreview||this.order.on("orderComplete",this.analytics.trackOrderConfirmation)},routes:{"":"index"}}),b.EventPage.SERVER_ERROR="Whoops! Someone must have pulled a plug somewhere... try again.",b.EventPage.CLIENT_SIDE_VALIDATION_ERROR="Double-check below, something important is missing.","function"==typeof define&&define("eb/event_page/router",function(){return b.EventPage.Router})}(window.jQuery,window.EB),/* global _ */
function(a){"use strict";a.namespace("CreatePage"),a.CreatePage.trackError||(a.CreatePage.trackError=function(){}),a.namespace("Models"),a.Models.EventModel=a.Backbone.Model.extend({defaults:{is_free:!0,is_live:!1,is_repeating:!1,repeating:"never",is_atd:!0,capacity:0,is_series:!1,is_pick_a_seat_enabled:!0,can_display_seat_map:!0,tax_on_fees_enabled:!1},validation:{capacity:[{fn:function(b){return!$.isNumeric(b)||parseInt(b,10)<0?(a.CreatePage.trackError("capacity_required"),window.gettext("Please enter a number")):b&&b.indexOf(".")>-1?(a.CreatePage.trackError("capacity_has_decimal"),window.gettext("Please enter a whole number")):void 0}}]},initialize:function(){this.on("change:repeating",this.setIsRepeating),this.setIsRepeating()},setDefaultCapacity:function(a){0===this.get("capacity")&&this.set("capacity",a.sumQuantity())},setIsRepeating:function(){var a=this.get("repeating");"never"===a||_.isEmpty(a)?this.set("is_repeating",!1):this.set("is_repeating",!0)},isPossiblyCCP:function(){return this.get("currency").isCCP()&&(!this.get("has_payment_type")||this.get("accept_eventbrite"))}}),a.Models.EventModel.EVENT_DELETED=80,"function"==typeof define&&define("require/entities/event_model",function(){return a.Models.EventModel})}(window.EB),function(a,b){"use strict";b.namespace("EventPage"),b.EventPage.FreeTicketModel=b.Backbone.Model.extend({})}(window.jQuery,window.EB,window._,window),// TODO: extract urls
function(a,b,c){"use strict";b.namespace("EventPage"),b.EventPage.OrderModel=b.Backbone.Model.extend({defaults:{complete:!1},initialize:function(a,d){if(c.bindAll(this,"saveOrderStartData","_handleOrderRegisterSuccess","register","start","triggerInWaitingRoom","triggerOrderComplete"),"undefined"==typeof a||"undefined"==typeof d)throw new Error("OrderModel is misconfigured.");if("undefined"==typeof a.survey)throw new Error("OrderModel requires a survey.");if("undefined"==typeof a.affiliateCode)throw new Error("OrderModel requires an affiliate_code.");if("undefined"==typeof a.affiliateUser)throw new Error("OrderModel requires an affiliate_user.");if("undefined"==typeof a.eid)throw new Error("OrderModel requires an eid.");if("undefined"==typeof d.isWaitingRoomEnabled)throw new Error("OrderModel requires an `isWaitingRoomEnabled` option.");this.waitingRoom=new b.EventPage.WaitingRoomModel({},{enabled:d.isWaitingRoomEnabled,eid:a.eid})},triggerInWaitingRoom:function(){this.trigger(b.EventPage.OrderModel.IN_WAITING_ROOM_EVENT)},triggerOrderComplete:function(a){this.trigger("orderComplete",a)},doOrder:function(){var b,c,d;return"undefined"!=typeof this.orderDeferred&&"rejected"!==this.orderDeferred.state()?this.orderDeferred.promise():(this.orderDeferred=a.Deferred(),b=this.waitingRoom.joinQueue().progress(this.triggerInWaitingRoom),c=b.pipe(this.start),d=c.pipe(this.register).done(this.orderDeferred.resolve).done(this.waitingRoom.handleOrderComplete).done(this.triggerOrderComplete).fail(this.orderDeferred.reject),this.orderDeferred.promise())},rejectIfStartErrors:function(d){return"undefined"==typeof d.errors||c.isEmpty(d.errors)?d.success&&"undefined"!=typeof d.data?d:a.Deferred().reject([b.EventPage.SERVER_ERROR]):a.Deferred().reject(d.errors)},start:function(){return"undefined"!=typeof this.orderStartPromise&&"rejected"!==this.orderStartPromise.state()?this.orderStartPromise:(this.orderStartPromise=a.ajax({url:b.EventPage.OrderModel.START_URL,type:"POST",contentType:"application/json",data:JSON.stringify({eid:this.get("eid"),tickets:this.get("survey").orderStartTicketData(),waiting_room_client_id:this.waitingRoom.get("client_id"),affiliate_code:this.get("affiliateCode"),affiliate_user:this.get("affiliateUser"),invite:this.get("invite")}),timeout:b.EventPage.OrderModel.TIMEOUT}).pipe(this.rejectIfStartErrors,this.rejectWithServerError).done(this.saveOrderStartData),this.orderStartPromise)},saveOrderStartData:function(a){this.set("id",a.data.order_id),this.set("tickets",a.data.tickets)},rejectWithServerError:function(){return a.Deferred().reject([b.EventPage.SERVER_ERROR])},rejectIfRegisterErrors:function(b){if("undefined"!=typeof b.errors&&!c.isEmpty(b.errors)){var d=c.reduce(b.errors,function(a,b){return c.union(a,b)},[]);return a.Deferred().reject(d)}return b},register:function(){if("undefined"!=typeof this.orderRegisterPromise&&"rejected"!==this.orderRegisterPromise.state())return this.orderRegisterPromise;var d={eid:this.get("eid"),order_id:this.get("id"),tickets:this.get("tickets"),affiliate_code:this.get("affiliateCode"),affiliate_user:this.get("affiliateUser"),override_end_date:this.get("overrideEndDate")||!1};return d=c.extend(d,this.get("survey").toJSON()),this.orderRegisterPromise=a.ajax({url:b.EventPage.OrderModel.REGISTER_URL,type:"POST",contentType:"application/json",data:JSON.stringify(d),timeout:b.EventPage.OrderModel.TIMEOUT}).pipe(this.rejectIfRegisterErrors,this.rejectWithServerError),this.orderRegisterPromise},_handleOrderRegisterSuccess:function(a){this.trigger("orderComplete",a)}}),b.EventPage.OrderModel.TIMEOUT=2e4,b.EventPage.OrderModel.START_URL="/event/order-start/",b.EventPage.OrderModel.REGISTER_URL="/event/register/",b.EventPage.OrderModel.IN_WAITING_ROOM_EVENT="inWaitingRoom"}(window.jQuery,window.EB,window._,window),function(a){"use strict";a.namespace("EventPage"),a.EventPage.UserModel=a.Backbone.Model.extend({}),"function"==typeof define&&define("require/entities/user_model",function(){return a.EventPage.UserModel})}(window.EB),function(a,b,c){"use strict";b.namespace("EventPage"),b.EventPage.BasicSurveyModel=b.Backbone.Model.extend({initialize:function(a){if("undefined"==typeof a||"undefined"==typeof a.ticket)throw new Error("Survey requires a ticket.")},_handleUserChange:function(){},orderStartTicketData:function(){return[{ticket_type:this.get("ticket").get("id"),quantity:this.get("quantity")}]},toJSON:function(){var a=c.clone(this.attributes);return delete a.quantity,delete a.ticket,a.payment_type="free",a.survey_type="direct",a},validate:function(a,b){if(!c.isObject(b)||!c.isBoolean(b.validate)||b.validate!==!1){"undefined"==typeof a&&(a=this.attributes);var d={},e=parseInt(a.quantity,10),f=typeof e;return a.first_name||(d.first_name="First name can't be empty"),a.last_name||(d.last_name="Last name can't be empty"),a.email&&!a.email.match(/@proxymail.facebook.com$/)&&/\S+@\S+/.test(a.email)||(d.email="Email can't be empty"),(isNaN(e)||"number"!==f)&&(d.quantity="Quantity is not valid"),c.isEmpty(d)?void 0:d}},set:function(d,e,f){var g;return c.isObject(d)?(g=d,f=e):(g={})[d]=e,"undefined"!=typeof g.quantity&&(g.quantity=parseInt(g.quantity,10)),c.each(g,function(b,c){"string"==typeof g[c]&&(g[c]=a.trim(g[c]))}),b.Backbone.Model.prototype.set.call(this,g,f)},submit:function(){this.isValid()&&this.trigger("startOrder")}}),b.EventPage.BasicSurveyModel.FACEBOOK_SURVEY_ERROR="Whoops! We couldn't get everything we needed from Facebook, so please fill in the fields below to register.",b.EventPage.BasicSurveyModel.FACEBOOK_LOADING_ERROR="Whoops! We can't get your registration info from Facebook, so please fill in the fields below."}(window.jQuery,window.EB,window._,window),function(a,b,c){"use strict";b.namespace("EventPage"),b.EventPage.AnalyticsModel=b.Backbone.Model.extend({initialize:function(a){if("undefined"==typeof a||"undefined"==typeof a.event)throw new Error("AnalyticsModel requires an event.");c.bindAll(this,"trackOrderConfirmation")},trackOrderConfirmation:function(){b.Analytics.trackPageView("/orderconfirmation")}})}(window.jQuery,window.EB,window._,window),function(a,b,c){"use strict";b.namespace("EventPage"),b.EventPage.FriendsModel=b.Backbone.Model.extend({initialize:function(b){if(c.bindAll(this,"_fbUserConnected","_resolveFriendsDeferred"),"undefined"==typeof b)throw new Error("Missing Parameters");if("object"!=typeof b.facebookUser)throw new Error("Missing FacebookUser Object");if("object"!=typeof b.event)throw new Error("Missing Event Object");this._friendsFetchDeferred=a.Deferred(),this.friendsResponse=void 0,"undefined"!=typeof b.enabled&&b.enabled&&(this.facebookUser=b.facebookUser,this.event=b.event,this.fbFetchPromise=this.facebookUser.checkLoginStatus(),this.fbFetchPromise.done(this._fbUserConnected))},_fbUserConnected:function(){a.ajax({type:"POST",url:"/event/friends-going/",data:{eid:this.event.get("eid"),has_perms:1,iref:this.facebookUser.options.internalReferrer},dataType:"json"}).done(this._resolveFriendsDeferred)},_resolveFriendsDeferred:function(a){this.friendsResponse=a,this._friendsFetchDeferred.resolve(a)},fetch:function(){return this._friendsFetchDeferred.promise()}})}(window.jQuery,window.EB,window._,window),function(a,b,c,d){"use strict";b.namespace("EventPage"),b.EventPage.WaitingRoomModel=b.Backbone.Model.extend({initialize:function(a,d){if(c.bindAll(this,"_ping","_renewAllocation","_handleFetchFail","_setResponseData","_resolveWaitingDeferred","_checkDoneWaiting","_handleRenewResponse","_handleRenewError","handleOrderComplete"),"undefined"==typeof d)throw new Error("WaitingRoomModel is misconfigured.");if("undefined"==typeof d.enabled)throw new Error("WaitingRoomModel requires `enabled` to be set.");if("undefined"==typeof d.eid)throw new Error("WaitingRoomModel requires `eid` to be set.");this.enabled=d.enabled,this.eid=d.eid,this.baseRenewURL=b.getQueueServer()+"/queue_rpc/renew",this._resetProperties()},joinQueue:function(){return this.waitingDeferred?this.waitingDeferred.promise():(this.waitingDeferred=a.Deferred(),this.enabled?(this.fetch().done(this._checkDoneWaiting).fail(this._handleFetchFail),this.waitingDeferred.promise()):this.waitingDeferred.resolve())},handleOrderComplete:function(){this._stopPinging()},clear:function(){return this._resetProperties(),b.Backbone.Model.prototype.clear.apply(this)},fetch:function(){return a.ajax({url:b.EventPage.WaitingRoomModel.FETCH_URL,type:"POST",data:JSON.stringify({eid:this.eid}),contentType:"application/json"}).pipe(this._filterResponseForSuccess).done(this._setResponseData)},_handleFetchFail:function(){this._rejectWaitingDeferred(b.EventPage.SERVER_ERROR)},_resetProperties:function(){this.waitingDeferred=null,this.renewErrorCount=0,this.renewIntervalID&&this._stopRenewing(),this.pingIntervalID&&this._stopPinging(),this.renewIntervalID=null,this.pingIntervalID=null},_handleDoneWaiting:function(){this._startPinging(),this._resolveWaitingDeferred()},_checkDoneWaiting:function(){this.get("is_live")?this._handleDoneWaiting():(this._notifyWaitingInProgress(),this._startRenewing())},_notifyWaitingInProgress:function(){this.waitingDeferred.notify()},_startRenewing:function(){this.renewIntervalID=d.setInterval(this._renewAllocation,b.EventPage.WaitingRoomModel.TIME_INTERVAL)},_stopRenewing:function(){d.clearInterval(this.renewIntervalID)},_startPinging:function(){this.pingIntervalID=d.setInterval(this._ping,b.EventPage.WaitingRoomModel.TIME_INTERVAL)},_stopPinging:function(){d.clearInterval(this.pingIntervalID)},_resolveWaitingDeferred:function(){this.waitingDeferred.resolve()},_setResponseData:function(a){this.set(a.data)},_rejectWaitingDeferred:function(a){this.waitingDeferred.reject([a||b.EventPage.WaitingRoomModel.ERROR_MESSAGE]),this.clear()},_filterResponseForSuccess:function(b){return b&&b.success?b:a.Deferred().reject()},_ping:function(){var b=[this.baseRenewURL,this.get("client_id")],c=b.join("/")+"/";a.get(c)},_getRenewURL:function(){var a=[this.baseRenewURL,this.get("client_id"),this.get("event_id"),"False",this.get("allocation_time"),this.get("hash_code")];return a.join("/")+"/"},_handleRenewResponse:function(a){a.is_live&&(this.set("is_live",!0),this._stopRenewing(),this._handleDoneWaiting())},_handleRenewError:function(){this.renewErrorCount+=1,this.renewErrorCount>=b.EventPage.WaitingRoomModel.RENEW_ERROR_MAX&&this._rejectWaitingDeferred(b.EventPage.WaitingRoomModel.ERROR_MESSAGE)},_filterNoResponse:function(b){return c.isEmpty(b)?a.Deferred().reject():b},_renewAllocation:function(){return a.ajax({url:this._getRenewURL(),cache:!1,type:"GET",timeout:b.EventPage.WaitingRoomModel.RENEW_TIMEOUT}).pipe(this._filterNoResponse).done(this._handleRenewResponse).fail(this._handleRenewError)}}),b.EventPage.WaitingRoomModel.RENEW_TIMEOUT=9e3,b.EventPage.WaitingRoomModel.TIME_INTERVAL=1e4,b.EventPage.WaitingRoomModel.RENEW_ERROR_MAX=3,b.EventPage.WaitingRoomModel.FETCH_URL="/event/waiting-room/",b.EventPage.WaitingRoomModel.ERROR_MESSAGE="Unfortunately there was an error completing your registration. So please refresh and try again."}(window.jQuery,window.EB,window._,window),function(a,b,c,d){"use strict";b.namespace("EventPage"),a.fn.serializeObject=function(){var b={},c=this.serializeArray();return a.each(c,function(){void 0!==b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},b.EventPage.BasicSurveyFormView=b.Backbone.View.extend({el:"#email-registration",initialize:function(b){if("undefined"==typeof b||"undefined"==typeof b.survey)throw new Error("SurveyModelUndefinedError");c.bindAll(this,"handleSubmit","revealForm","showErrors","updateQuantity","setQuantity","enableForm","disableForm","showLoading","hideLoading","checkEmail","acceptEmailSuggestion","closeEmailSuggestion"),this.survey=this.options.survey,this.$form=a("#register-with-email-form-container"),this.$email=this.$form.find('input[name="email"]'),this.$link=a("#register-with-email-link"),this.$errors=a(this.$el.find(".errors").get(0)),this.$submit=this.$el.find("#register_with_email_submit"),this.emailSuggestionTemplate=d.compile(a("#email-suggestion-template").html()),this.survey.on("invalid",this.showErrors,this),this.$quantity=this.$form.find('select[name="quantity"]'),this.survey.on("change:quantity",this.updateQuantity)},events:{"click #register_with_email_submit":"handleSubmit","click #register-with-email-link":"revealForm","change #email-quantity":"setQuantity",'change input[name="email"]':"checkEmail","click #accept-email-suggestion":"acceptEmailSuggestion","click #reject-email-suggestion":"closeEmailSuggestion"},handleSubmit:function(a){var b=this.$form.find("input,select").serializeObject();a.preventDefault(),this.trigger("submit"),this.survey.set(b),this.survey.submit()},revealForm:function(){var b=this;if("disabled"!==this.$link.attr("disabled"))return this.$form.slideDown("slow"),this.$link.animate({opacity:0},0,function(){b.$link.css("display","none")}),this.$el.removeClass("l-pad-vert-3").addClass("l-pad-vert-5 l-sm-pad-vert-3"),a("#register-with-facebook-form").hide(0,function(){a("#register-with-facebook-link").css("display","block").delay(500).animate({opacity:1},500)}),!1},showErrors:function(e,f){var g=c.keys(f),h=this.$form.find("input"),i="has-form-input-error",j=this;this.$errors.length||(this.$errors=a("<div>",{"class":"errors"}),this.$form.prepend(this.$errors)),this.$errors.html(d.compile(a("#notification-template").html())({messages:[b.EventPage.CLIENT_SIDE_VALIDATION_ERROR],type:"alert"})),this.$errors.fadeIn(b.EventPage.BasicSurveyFormView.ERROR_FADE_IN_DURATION,function(){h.removeClass(i),c.each(g,function(a){j.$form.find('input[name="'+a+'"]').addClass(i)})})},setQuantity:function(){this.survey.set("quantity",this.$quantity.val(),{validate:!1})},updateQuantity:function(a){parseInt(this.$quantity.val(),10);this.$quantity.val(a.get("quantity")).trigger("change")},checkEmail:function(){if(this.fixedEmail=b.EventRegister.EmailSuggestions.findPossibleCorrections(this.$email.val()),a("#email-suggestion").remove(),this.fixedEmail!==!1){var c=this.fixedEmail,d=!0;c===!0&&(d=!1),this.$email.after(this.emailSuggestionTemplate({email:this.fixedEmail,isDomainSpecified:d}))}},acceptEmailSuggestion:function(a){a.preventDefault(),this.$email.val(this.fixedEmail),this.closeEmailSuggestion(a)},closeEmailSuggestion:function(a){a.preventDefault(),this.$form.find("#email-suggestion").remove()},enableForm:function(){this.$link.removeAttr("disabled"),this.$form.find("input, select, button").removeAttr("disabled")},disableForm:function(){this.$link.attr("disabled","disabled"),this.$form.find("input, select, button").attr("disabled","disabled")},showLoading:function(){this.$submit.addClass("btn--large--loader")},hideLoading:function(){this.$submit.removeClass("btn--large--loader")}}),b.EventPage.BasicSurveyFormView.ERROR_FADE_IN_DURATION=350}(window.jQuery,window.EB,window._,window.Handlebars,window),function(a,b,c,d,e){"use strict";b.namespace("EventPage"),b.EventPage.AddToCalendarView=b.Backbone.View.extend({el:".add-to-calendar",pageName:"",events:{'click a[data-calendar="google"]':"addToGoogleCalendar",'click a[data-calendar="yahoo"]':"addToYahooCalendar",'click a[data-calendar="outlook"]':"addToOutlook",'click a[data-calendar="ical"]':"addToICal"},initialize:function(a){if(c.bindAll(this,"addToGoogleCalendar","addToYahooCalendar","addToOutlook","addToICal"),"undefined"==typeof a||"undefined"==typeof a.event)throw new Error("Event required.");this.event=a.event},_addToCalendar:function(a){var c="toolbar=yes,menubar=yes,location=yes,status=yes,scrollbars=yes,resizable=yes,width=800,height=600,left=0,top=0";this.trackAddToCalendarEvent(a),e.open(b.getEBServer()+"/calendar.ics?eid="+this.event.eid+"&calendar="+a,"calendar",c)},addToGoogleCalendar:function(){this._addToCalendar("google")},addToYahooCalendar:function(){this._addToCalendar("yahoo")},addToOutlook:function(){this._addToCalendar("outlook")},addToICal:function(){this._addToCalendar("ical")},trackAddToCalendarEvent:function(a){b.Analytics.trackEvent({action:"AddToCal",category:this.pageName,label:a})}})}(window.jQuery,window.EB,window._,window.Handlebars,window),function(a,b,c,d,e){"use strict";b.namespace("EventPage"),b.EventPage.ShareLinksView=b.Backbone.View.extend({el:"#share_links",events:{"click .share-link":"handleShareClick",'click .share-link[data-share-link-type="twitter"]':"handleTwitterClick",'click .share-link[data-share-link-type="linkedin"]':"handleLinkedinShareClick"},initialize:function(){c.bindAll(this,"handleFacebookLike","subscribeToFacebookLike","handleShareClick"),b.Social.FacebookUserModel.FBDeferred.done(this.subscribeToFacebookLike)},subscribeToFacebookLike:function(){e.FB.Event.subscribe("edge.create",this.handleFacebookLike)},trackAction:function(a,b){var c={};b&&(c={async:!1,timeout:1})},handleFacebookLike:function(){this.trackAction("facebook")},handleShareClick:function(b){this.trackAction(a(b.target).closest("a").data("share-link-type"),!0)},handleTwitterClick:function(c){c.preventDefault(),b.simplePopup({url:a(c.target).closest("a").attr("href")})},handleLinkedinShareClick:function(c){c.preventDefault(),b.simplePopup({url:a(c.target).closest("a").attr("href"),width:600,height:450})}})}(window.jQuery,window.EB,window._,window.Handlebars,window),function(a,b,c,d){"use strict";b.namespace("EventPage"),b.EventPage.FriendsGoingView=b.Backbone.View.extend({el:"#friends-going",templateSelector:"#friends-going-template",events:{"click .js-friends-going-show-more":"showMoreFriends","click .js-friends-going-show-less":"hideMoreFriends"},initialize:function(a){if(c.bindAll(this,"handleFriendsGoing"),"undefined"==typeof a)throw new Error("Misconfigured.");if("undefined"==typeof a.friendsModel)throw new Error("Friends Model required.");if("undefined"==typeof a.enabled)throw new Error("enabled option required.");this.event=a.event,this.friendsModel=a.friendsModel,this.friendsModel.fetch().done(this.handleFriendsGoing),this.enabled=a.enabled},handleFriendsGoing:function(a){this.friendsGoingResponse=a,this.addSocialSettingsLightbox(),"object"==typeof this.friendsGoingResponse.friends&&this.friendsGoingResponse.friends.length>0&&this.render()},toggleShowMore:function(a){this.$moreFriends.toggleClass("social-swg-more-hidden",a),this.$moreLink.toggleClass("js-friends-going-show-more",a),this.$moreFriends.toggleClass("social-swg-more-expanded",!a),this.$moreLink.toggleClass("js-friends-going-show-less",!a),this.$moreArrow.toggleClass("social-swg-arrow-rotate-up",!a),a?(this.$moreFriends.slideUp(500),this.$moreLinkText.text("and "+this.moreFriendsCount+" more")):(this.$moreFriends.slideDown(500),this.$moreLinkText.text("hide"))},showMoreFriends:function(a){a.preventDefault(),this.toggleShowMore(!1)},hideMoreFriends:function(a){a.preventDefault(),this.toggleShowMore(!0)},addSocialSettingsLightbox:function(){var a=this.friendsGoingResponse.visibility;this.socialSettingsLightbox=new b.EventPage.SocialSettingsLigthboxView({visibility:a})},render:function(e){var f=d.compile(a(this.templateSelector).html()),g=b.EventPage.BasicSurveyModel.INITIAL_FRIENDS_SHOWN,h={numberOfFriendsGoing:this.friendsGoingResponse.friends.length,hasMultipleFriendsGoing:this.friendsGoingResponse.friends.length>1,friendsInitial:this.friendsGoingResponse.friends,hasMoreFriends:!1};return this.friendsGoingResponse.friends.length>g&&(h.moreFriendsCount=this.friendsGoingResponse.friends.length-g,h.friendsInitial=this.friendsGoingResponse.friends.slice(0,g),h.friendsMore=this.friendsGoingResponse.friends.slice(g),h.hasMoreFriends=!0),this.moreFriendsCount=h.moreFriendsCount,d.registerPartial("friend",a("#friend-partial-template").html()),this.$el.html(f(c.extend(h,this.friendsGoingResponse))),"undefined"==typeof e||e===!0?this.$el.slideDown(500):this.$el.show(),this.$moreFriends=this.$el.find(".social-see-whos-going-more-friends"),this.$moreLink=this.$el.find(".social-swg-toggle-friends"),this.$moreLinkText=this.$el.find(".social-swg-expand-link-text"),this.$moreArrow=this.$el.find(".social-swg-expand-arrow"),this}}),b.EventPage.BasicSurveyModel.INITIAL_FRIENDS_SHOWN=4}(window.jQuery,window.EB,window._,window.Handlebars,window),function(a,b,c,d){"use strict";b.namespace("EventPage"),b.EventPage.SocialSettingsLigthboxView=b.Backbone.View.extend({initialize:function(b){var c=d.compile(a("#social-settings-lightbox-template").html());this.$el=a(c({isSocial:b.visibility})),a("#lightbox-container").append(this.$el)}})}(window.jQuery,window.EB,window._,window.Handlebars,window),function(a,b){"use strict";b.namespace("EventPage"),b.EventPage.HeaderView=b.Backbone.View.extend({initialize:function(a){this.allowHiddenHeader=a.allowHiddenHeader,this.createdDate=a.createdDate,this.subtargets=a.subtargets,this.forceHeader()},forceHeader:function(){!this.allowHiddenHeader&&this.createdAfterCutoffDate()&&(this.showCSSRules(this.$el),this.showCSSRules(this.$el.find(this.subtargets)),this.$el.css({margin:"0",top:"0",left:"0"}))},createdAfterCutoffDate:function(){return Date.parse(this.createdDate.split(" ")[0])>1386144e6},showCSSRules:function(a){a.attr("style",function(a,b){var c="z-index: 100 !important; display: block !important; opacity: 1 !important; visibility: visible !important; overflow: visible !important";return b?b+c:c})}})}(window.jQuery,window.EB,window._,window.Handlebars,window),/*global google:false, */
EB.GoogleMap=function(a,b){var c=0,d=0,e=0,f="en",g="http://",h=function(){var a=document.createElement("script");a.type="text/javascript",a.src=g+"maps.googleapis.com/maps/api/js?sensor=false&client=gme-eventbrite&callback=previewMapInit&language="+f,document.body.appendChild(a)},i=function(){var a=new google.maps.LatLng(c,d),b={zoom:e,center:a,mapTypeId:google.maps.MapTypeId.ROADMAP},f=new google.maps.Map(document.getElementById("map_canvas"),b),g=new google.maps.Marker({map:f,draggable:!1});g.setPosition(f.getCenter()),google.maps.event.addListenerOnce(f,"tilesloaded",j)},j=function(){var c=a("#map_canvas"),d=new b.UIComponents.GoogleMapsAccessibility({map:c}),e=c.find('div[title="Change map style"],div[title="Show street map"],div[title="Show street map with terrain"],div[title="Show satellite imagery"],div[title="Zoom in to show 45 degree view"],div[title="Show imagery with street names"],div[title="Zoom in"],div[title="Zoom out"],img[title="Rotate map 90 degrees"]');e.each(function(b,c){d.addAriaLabel(a(c),c.title)})};return{init:function(a){c=parseFloat(a.lat),d=parseFloat(a.lon),e=parseFloat(a.zoom),f=a.language,a.scheme&&(g=a.scheme),document.getElementById("map_canvas")&&("undefined"==typeof google||"undefined"==typeof google.maps?window.onload=h:i()),window.previewMapInit=i}}}(jQuery,EB||{}),function(a,b,c){"use strict";c.namespace("UIComponents"),c.UIComponents.GoogleMapsAccessibility=c.Backbone.View.extend({initialize:function(a){b.bindAll(this,"fixAltTags","addAriaLabel"),this.$map=a.map,this.mapImages=this.$map.find("img"),this.fixAltTags(),this.fixEmptyLinks()},fixAltTags:function(){for(var a,b=0;b<this.mapImages.length;b++)a=this.mapImages[b].alt,a||this.mapImages[b].setAttribute("alt","")},fixEmptyLinks:function(){this.$map.find("a img").parent().append('<span class="is-hidden-accessible">Google Maps</span>')},addAriaLabel:function(b,c){b.attr({role:"button",tabindex:"0","aria-label":c}).bind("keydown",function(b){13===b.which&&(b.preventDefault(),a(this).trigger("click"))})}}),"function"==typeof define&&define("eb/ui_components/google_map_accessibility_helper",function(){return c.UIComponents.GoogleMapsAccessibility})}(window.jQuery,window._,window.EB,window),/**
 * This UI Component depends on:
 * django/media/django/compass/sass/modules
 * - custom_select.css.scss
 * - themes/3rdgen.css.scss (or whatever your theme is)
 *
 * You must include this file and build/custom_select.js for
 * the handle bars template.
 *
 * jquery, underscore, backboneview, handlbars
 */
function(a,b,c,d){"use strict";b.namespace("UIComponents"),b.UIComponents.SelectBox=b.Backbone.View.extend({initialize:function(b){if(c.bindAll(this,"selectItem"),"undefined"==typeof b||"undefined"==typeof b.element)throw"SelectBox 'element' undefined";this.parentClass="form__select","string"==typeof b.parentClass&&(this.parentClass=b.parentClass),this.$el=a(b.element),this.template=d.templates.custom_select_internal,this.wrapperTemplate=d.templates.custom_select_wrapper,0===this.$el.find('option[selected="selected"], option[selected]').length&&a(this.$el.find("option").get(0)).attr("selected","selected"),this.initialRender(),this.$el.change(this.selectItem)},initialRender:function(){this.$wrapper=a(this.wrapperTemplate({parentClass:this.parentClass})),this.$el.wrap(this.$wrapper),this.$wrapper=this.$el.parent(),this.$wrapper.prepend(a(this.template({select_value:this.$el.find('option[value="'+this.$el.val()+'"]').text()}))),this.$span=this.$wrapper.find(".custom-select-value"),this.selectItem()},selectItem:function(){this.updateText(),this.trigger("change",this.$el.val())},updateText:function(){this.$span.text(this.text())},val:function(a){return void 0!==a&&(this.$el.val(a),this.selectItem()),this.$el.val()},text:function(){return this.$el.find("option:selected").text()}}),a.fn.customselect=function(d){return this.each(function(){var e=a(this);return new b.UIComponents.SelectBox(c.extend({},d||{},{element:e}))})},a(function(){a(".js-form__select").customselect(),a(".js-responsive-form__select").customselect({parentClass:"responsive-form__select"})}),"function"==typeof define&&define("eb/ui_components/custom_select_view",function(a){return d.templates=d.templates||{},d.templates.custom_select_wrapper=a("hb!templates/src/eb/ui_components/custom_select_wrapper.handlebars"),d.templates.custom_select_internal=a("hb!templates/src/eb/ui_components/custom_select_internal.handlebars"),b.UIComponents.SelectBox})}(jQuery,window.EB,window._,window.Handlebars),function(a,b,c,d,e){"use strict";b.namespace("Social"),b.Social&&b.Social.FacebookUserModel||(b.Social.FacebookUserModel=b.Backbone.Model.extend({defaultOptions:{timeout:10,scope:"public_profile,email,user_friends"},defaultFBInit:{appId:null,oauth:!0,cookie:!0,status:!0,xfbml:!0,locale:"en_US",debug:!1},facebookEvents:["auth.login","auth.authResponseChange","auth.statusChange","auth.logout","auth.prompt","xfbml.render","edge.create","edge.remove","comment.create","comment.remove","message.send"],options:{},initialize:function(c,e){var f=this;if(!b.Social.FacebookUserModel.FBInit||!b.Social.FacebookUserModel.FBInit.appId)throw new Error("An appId is required to initialize FB");d.bindAll(this,"_FBLoadedInitializer","_handleFBAuthResponse","_handleFBApiMeResponse","_fetchWhenFBDone","_handleInitTimeout","_loginWhenFBDone","_loginCallback","_logoutCallback","_logoutWhenFBDone","_checkPermissionsFail","_checkPermissionsSuccess","_handleFBPromiseDone","_checkLoginStatusCallback","_checkLoginStatusWhenDone"),a.extend(this.options,this.defaultOptions,e),this.set("status",b.Social.FacebookUserModel.STATUS.unknown),this._initFB(),"resolved"===this._getFBPromise().state()&&f.checkLoginStatus().done(f._handleFBAuthResponse)},_initFB:function(){var e=this;this._getFBPromise().done(this._handleFBPromiseDone),this.initTimeout=setTimeout(this._handleInitTimeout,1e3*this.options.timeout),"undefined"==typeof c.fbAsyncInit?(b.Social.FacebookUserModel.FBInit=a.extend({},this.defaultFBInit,b.Social.FacebookUserModel.FBInit),this._attachFBJavascriptToTheDOM(),c.fbAsyncInit=this._FBLoadedInitializer):c.fbAsyncInit=d.wrap(c.fbAsyncInit,function(a){a(),b.Social.FacebookUserModel.FBDeferred.resolve(),clearTimeout(e.initTimeout)})},_handleInitTimeout:function(){c.fbAsyncInit=e,b.Social.FacebookUserModel.FBDeferred.reject(),this.trigger("fb:error")},_handleFBPromiseDone:function(){for(var a=this.facebookEvents.length,b="",d=this,e=function(a){return function(){var b=Array.prototype.slice.call(arguments);b.unshift(a),d.trigger.apply(d,b)}};a--;)b=this.facebookEvents[a],c.FB.Event.subscribe(b,e(b));this.trigger("fb:ready"),c.FB.Event.subscribe("auth.authResponseChange",this._handleFBAuthResponse)},_attachFBJavascriptToTheDOM:function(){var c="facebook-jssdk",d="";a("#"+c).length||(d="//connect.facebook.net/"+b.Social.FacebookUserModel.FBInit.locale+"/all"+(b.Social.FacebookUserModel.FBInit.debug?"/debug":"")+".js",a.getScript(d))},_FBLoadedInitializer:function(){var d={};clearTimeout(this.initTimeout),a.extend(d,b.Social.FacebookUserModel.FBInit),delete d.locale,delete d.debug,c.FB.init(d),b.Social.FacebookUserModel.FBDeferred.resolve()},_handleFBAuthResponse:function(a){a&&(this.set({status:a.status}),this._isResponseConnected(a)?(this.set({fb_id:a.authResponse.userID}),this.set({avatar:"//graph.facebook.com/"+this.get("fb_id")+"/picture"}),this.trigger("fb:connect")):this.trigger("fb:disconnect"))},_fetchWhenFBDone:function(){this.api("/me").done(this._handleFBApiMeResponse)},_handleFBApiMeResponse:function(a){this.set(a),this.trigger("sync"),this._fetchDeferred.resolve(this)},_loginWhenFBDone:function(){c.FB.login(this._loginCallback,{scope:this.options.scope})},_loginCallback:function(a){this._isResponseConnected(a)?this._loginDeferred.resolve(a):this._loginDeferred.reject(a)},_isResponseConnected:function(a){return a.status===b.Social.FacebookUserModel.STATUS.connected},_logoutWhenFBDone:function(){this._loginDeferred=e,this._fetchDeferred=e,c.FB.logout(this._logoutCallback)},_logoutCallback:function(){this._logoutDeferred.resolve()},_enableDeferredTimeout:function(a){setTimeout(a.reject,1e3*this.options.timeout)},_checkPermissionsSuccess:function(a){var b=-1,c=this.options.scope.split(/\s*,\s*/),d=null,e=!0;if(a&&a.data&&a.data[0])for(d=a.data[0],b=0;b<c.length;b++)if(!(c[b]in d)){e=!1;break}e?this._checkPermissionsDeferred.resolve():this._checkPermissionsDeferred.reject()},_checkPermissionsFail:function(){this._checkPermissionsDeferred.reject()},_checkLoginStatusWhenDone:function(){c.FB.getLoginStatus(this._checkLoginStatusCallback)},_checkLoginStatusCallback:function(a){this._isResponseConnected(a)?this._checkLoginStatusDeferred.resolve(a):this._checkLoginStatusDeferred.reject(a)},_getFBPromise:function(){return b.Social.FacebookUserModel.FBDeferred.promise()},api:function(b){var d=new a.Deferred;return this._getFBPromise().done(function(){c.FB.api(b,function(a){d.resolve(a)})}).fail(d.reject),this._enableDeferredTimeout(d),d.promise()},login:function(){return this._loginDeferred&&"pending"===this._loginDeferred.state()?this._loginDeferred.promise():(this._loginDeferred=new a.Deferred,this._getFBPromise().done(this._loginWhenFBDone).fail(this._loginDeferred.reject),this._loginDeferred.promise())},logout:function(){return this._logoutDeferred=a.Deferred(),this._getFBPromise().done(this._logoutWhenFBDone).fail(this._logoutDeferred.reject),this._logoutDeferred.promise()},fetch:function(){return this._fetchDeferred||(this._fetchDeferred=a.Deferred(),this._getFBPromise().done(this._fetchWhenFBDone).fail(this._fetchDeferred.reject),this._enableDeferredTimeout(this._fetchDeferred)),this._fetchDeferred.promise()},checkPermissions:function(){return this._checkPermissionsDeferred=a.Deferred(),this.api("/me/permissions").done(this._checkPermissionsSuccess).fail(this._checkPermissionsFail),this._checkPermissionsDeferred.promise()},checkLoginStatus:function(){return this._checkLoginStatusDeferred&&"pending"===this._checkLoginStatusDeferred.state()||(this._checkLoginStatusDeferred=a.Deferred(),this._getFBPromise().done(this._checkLoginStatusWhenDone).fail(this._checkLoginStatusDeferred.reject),this._enableDeferredTimeout(this._checkLoginStatusDeferred)),this._checkLoginStatusDeferred.promise()},ui:function(b){var d=a.Deferred();return this._uiDeferred=d,this._getFBPromise().done(function(){c.FB.ui(b,d.resolve)}).fail(d.reject),this._uiDeferred.promise()},getLastAuthResponse:function(){var a=null;return"resolved"===this._getFBPromise().state()&&(a=c.FB.getAuthResponse()),a}}),b.Social.FacebookUserModel.FBDeferred=a.Deferred(),b.Social.FacebookUserModel.FBInit={},b.Social.FacebookUserModel.STATUS={connected:"connected",unknown:"unknown",notAuthorized:"not_authorized"},"function"==typeof define&&define("eb/social/facebook_user_model",function(){return b.Social.FacebookUserModel}))}(jQuery,EB,window,window._),/*!
 * jQuery UI 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
function(a,b){function c(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}function d(b,d){var e=b.nodeName.toLowerCase();if("area"===e){var f,g=b.parentNode,h=g.name;return b.href&&h&&"map"===g.nodeName.toLowerCase()?(f=a("img[usemap=#"+h+"]")[0],!!f&&c(f)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||d:d)&&c(b)}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.18",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),e&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return d(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var c=a.attr(b,"tabindex"),e=isNaN(c);return(e||c>=0)&&d(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),/*!
 * jQuery UI Widget 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d,e=0;null!=(d=b[e]);e++)try{a(d).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e,f=b.split(".")[0];b=b.split(".")[1],e=f+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e]=function(c){return!!a.data(c,b)},a[f]=a[f]||{},a[f][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[f][b].prototype=a.extend(!0,g,{namespace:f,widgetName:b,widgetEventPrefix:a[f][b].prototype.widgetEventPrefix||b,widgetBaseClass:e},d),a.widget.bridge(b,a[f][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),/*
 * jQuery UI Position 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d="center",e={},f=a.fn.position,g=a.fn.offset;a.fn.position=function(g){if(!g||!g.of)return f.apply(this,arguments);g=a.extend({},g);var h,i,j,k=a(g.of),l=k[0],m=(g.collision||"flip").split(" "),n=g.offset?g.offset.split(" "):[0,0];return 9===l.nodeType?(h=k.width(),i=k.height(),j={top:0,left:0}):l.setTimeout?(h=k.width(),i=k.height(),j={top:k.scrollTop(),left:k.scrollLeft()}):l.preventDefault?(g.at="left top",h=i=0,j={top:g.of.pageY,left:g.of.pageX}):(h=k.outerWidth(),i=k.outerHeight(),j=k.offset()),a.each(["my","at"],function(){var a=(g[this]||"").split(" ");1===a.length&&(a=b.test(a[0])?a.concat([d]):c.test(a[0])?[d].concat(a):[d,d]),a[0]=b.test(a[0])?a[0]:d,a[1]=c.test(a[1])?a[1]:d,g[this]=a}),1===m.length&&(m[1]=m[0]),n[0]=parseInt(n[0],10)||0,1===n.length&&(n[1]=n[0]),n[1]=parseInt(n[1],10)||0,"right"===g.at[0]?j.left+=h:g.at[0]===d&&(j.left+=h/2),"bottom"===g.at[1]?j.top+=i:g.at[1]===d&&(j.top+=i/2),j.left+=n[0],j.top+=n[1],this.each(function(){var b,c=a(this),f=c.outerWidth(),k=c.outerHeight(),l=parseInt(a.curCSS(this,"marginLeft",!0))||0,o=parseInt(a.curCSS(this,"marginTop",!0))||0,p=f+l+(parseInt(a.curCSS(this,"marginRight",!0))||0),q=k+o+(parseInt(a.curCSS(this,"marginBottom",!0))||0),r=a.extend({},j);"right"===g.my[0]?r.left-=f:g.my[0]===d&&(r.left-=f/2),"bottom"===g.my[1]?r.top-=k:g.my[1]===d&&(r.top-=k/2),e.fractions||(r.left=Math.round(r.left),r.top=Math.round(r.top)),b={left:r.left-l,top:r.top-o},a.each(["left","top"],function(c,d){a.ui.position[m[c]]&&a.ui.position[m[c]][d](r,{targetWidth:h,targetHeight:i,elemWidth:f,elemHeight:k,collisionPosition:b,collisionWidth:p,collisionHeight:q,offset:n,my:g.my,at:g.at})}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(r,{using:g.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==d){var e=a(window),f=c.collisionPosition.left+c.collisionWidth-e.width()-e.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==d){var e=a(window),f=c.collisionPosition.top+c.collisionHeight-e.height()-e.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(function(){a.offset.setOffset(this,b)}):g.call(this):null}),function(){var b,c,d,f,g,h=document.getElementsByTagName("body")[0],i=document.createElement("div");b=document.createElement(h?"div":"body"),d={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},h&&a.extend(d,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in d)b.style[j]=d[j];b.appendChild(i),c=h||document.documentElement,c.insertBefore(b,c.firstChild),i.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",f=a(i).offset(function(a,b){return b}).offset(),b.innerHTML="",c.removeChild(b),g=f.top+f.left+(h?2e3:0),e.fractions=g>21&&22>g}()}(jQuery),/*
 * jQuery UI Dialog 1.8.18
 *
 * Copyright 2011, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},f=a.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)}),h=(b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)),i=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){i.addClass("ui-state-hover")},function(){i.removeClass("ui-state-hover")}).focus(function(){i.addClass("ui-state-focus")}).blur(function(){i.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(h);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(i),a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(h)}a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),h.find("*").add(h).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog},close:function(b){var c,d,e=this;return!1!==e._trigger("beforeClose",b)?(e.overlay&&e.overlay.destroy(),e.uiDialog.unbind("keypress.ui-dialog"),e._isOpen=!1,e.options.hide?e.uiDialog.hide(e.options.hide,function(){e._trigger("close",b)}):(e.uiDialog.hide(),e._trigger("close",b)),a.ui.dialog.overlay.resize(),e.options.modal&&(c=0,a(".ui-dialog").each(function(){this!==e.uiDialog[0]&&(d=a(this).css("z-index"),isNaN(d)||(c=Math.max(c,d)))}),a.ui.dialog.maxZ=c),e):void 0},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var d,e=this,f=e.options;return f.modal&&!b||!f.stack&&!f.modal?e._trigger("focus",c):(f.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=f.zIndex),e.overlay&&(a.ui.dialog.maxZ+=1,e.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),d={scrollTop:e.element.scrollTop(),scrollLeft:e.element.scrollLeft()},a.ui.dialog.maxZ+=1,e.uiDialog.css("z-index",a.ui.dialog.maxZ),e.element.attr(d),e._trigger("focus",c),e)},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");if(b.target===e[0]&&!b.shiftKey)return d.focus(1),!1;if(b.target===d[0]&&b.shiftKey)return e.focus(1),!1}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),g=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);c.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(g);a.each(d,function(a,b){"click"!==a&&(a in f?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function b(a){return{position:a.position,offset:a.offset}}var c,d=this,e=d.options,f=a(document);d.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,g){c="auto"===e.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),d._trigger("dragStart",f,b(g))},drag:function(a,c){d._trigger("drag",a,b(c))},stop:function(g,h){e.position=[h.position.left-f.scrollLeft(),h.position.top-f.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(c),d._trigger("dragStop",g,b(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function d(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var e=this,f=e.options,g=e.uiDialog.css("position"),h="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:f.maxWidth,maxHeight:f.maxHeight,minWidth:f.minWidth,minHeight:e._minHeight(),handles:h,start:function(b,c){a(this).addClass("ui-dialog-resizing"),e._trigger("resizeStart",b,d(c))},resize:function(a,b){e._trigger("resize",a,d(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),f.height=a(this).height(),f.width=a(this).width(),e._trigger("resizeStop",b,d(c)),a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c,d=[],e=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(d=b.split?b.split(" "):[b[0],b[1]],1===d.length&&(d[1]=d[0]),a.each(["left","top"],function(a,b){+d[a]===d[a]&&(e[a]=d[a],d[a]=b)}),b={my:d.join(" "),at:d.join(" "),offset:e.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,c=this.uiDialog.is(":visible"),c||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),c||this.uiDialog.hide()},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&"string"==typeof d&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var b,c,d=this.options,e=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),d.minWidth>d.width&&(d.width=d.minWidth),b=this.uiDialog.css({height:"auto",width:d.width}).height(),c=Math.max(0,d.minHeight-b),"auto"===d.height)if(a.support.minHeight)this.element.css({minHeight:c,height:"auto"});else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,c))}else this.element.height(Math.max(d.height-b,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.18",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()<a.ui.dialog.overlay.maxZ?!1:void 0})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a,b){"use strict";b.namespace("OrderConfirmation"),b.OrderConfirmation.AddToCalendarLightboxView=b.EventPage.AddToCalendarView.extend({el:"#add_to_calendar_lightbox",pageName:"order-conf",initialize:function(c){b.EventPage.AddToCalendarView.prototype.initialize.call(this,c),a(c.triggerElement).on("click",this.showAddToCalendarLightbox)},showAddToCalendarLightbox:function(b){b.preventDefault(),a("#add_to_calendar_lightbox").dialog({modal:!0,width:580,resizable:!1})},_addToCalendar:function(c){a("#add_to_calendar_lightbox").dialog("close"),b.EventPage.AddToCalendarView.prototype._addToCalendar.call(this,c)}})}(window.jQuery,window.EB,window._,window.Handlebars,window),function(a){var b="/ajax/social/settings",c="#social_settings_lightbox",d='input[name="social_settings_visibility"]:checked',e=[],f=function(f){f.preventDefault();var g=a(this).find(d).val();a.ajax({type:"POST",url:b,data:{visibility:g},cache:!1,dataType:"json",complete:function(){EB.Ui.lightbox.hide(c)},success:function(a){for(var b=0;b<e.length;++b)e[b](a)}})},g=function(){var b=a(c).find(d).parentsUntil(".eb_lightbox_content").last();a(".social_settings_option").removeClass("selected"),b.addClass("selected")};a("body").delegate(".social_settings_show","click",function(){return EB.Ui.lightbox.show(c),!1}),a("body").delegate(c,"lightboxSave",f),a("body").delegate(c,"lightboxHide",g),a("body").delegate(d,"click",g),EB.SocialSettings={change:function(a){"function"==typeof a&&e.push(a)}}}(jQuery),// this is a generic lightbox module for showing and hiding lightboxes
function(a,b){if(!b)throw"EB.Ui.lightbox: Missing jQuery.";a.Ui=a.Ui||{},a.Ui.lightbox={};var c=function(a){return a instanceof b?a.eq(0):b(a).eq(0)},d=function(a){if(!a.hasClass("js-eb-lightbox")){var b=(a.outerHeight()||jQuery("body").outerHeight())/2,c=(a.outerWidth()||jQuery("body").outerWidth())/2;a.css({"margin-top":"-"+b+"px","margin-left":"-"+c+"px"})}},e=function(){b("body").css({"max-height":b(window).height()+"px",overflow:"hidden"})},f=function(){b("body").css({"max-height":"none",overflow:"auto"})},g=function(a,c,g){(a.hasClass("eb_lightbox")||a.hasClass("js-eb-lightbox"))&&(c?(f(),a.removeClass("active"),/MSIE\ (5|6|7|8)/i.test(navigator.userAgent)?(a.hide(0,g),b("div.eb_lightbox_background").remove(),a.trigger("lightboxHide")):(a.fadeOut(333,function(){a.trigger("lightboxHide"),"function"==typeof g&&g.call(a)}),b("div.eb_lightbox_background").fadeTo(333,0,function(){b(this).remove()})),b(".js-eb-lightbox-parent").hide()):(a.hasClass("active")||(a.addClass("active"),a.before('<div class="eb_lightbox_background"></div>')),/MSIE\ (5|6|7|8)/i.test(navigator.userAgent)?(a.show(0),b("div.eb_lightbox_background").css("opacity","0.5")):(a.fadeIn(333),b("div.eb_lightbox_background").fadeTo(333,.5)),a.trigger("lightboxShow"),"function"==typeof g&&g.call(a),d(a),e()))},h=function(a){var c=b("div.eb_lightbox.active, .js-eb-lightbox.active"),d=b.Event("lightboxCancel");b(a.target).hasClass("eb_lightbox_background")&&c.data("noBackgroundClick")||(c.trigger(d),d.isDefaultPrevented()||(c.find("input, select, textarea").each(function(){/radio|checkbox/.test(b(this).attr("type"))?this.checked=!!b(this).data("initial"):b(this).val(b(this).data("initial")||"").trigger("change").trigger("blur")}),g(c,!0)))};a.Ui.lightbox.show=function(a,d){var e=c(a);e.find("input, select, textarea").each(function(){/radio|checkbox/.test(b(this).attr("type"))?b(this).data("initial",this.checked):b(this).data("initial",b(this).val())}),g(e,!1,d)},a.Ui.lightbox.hide=function(a,b){g(c(a),!0,b)},a.Ui.lightbox.center=function(a){d(c(a))},b("body").delegate(".js-eb-lightbox__close, div.eb_lightbox_close, div.eb_lightbox .cancel, div.eb_lightbox_background","click",function(a){a.preventDefault(),h(a)}),b("body").delegate("div.eb_lightbox .save","click",function(a){a.preventDefault();var c=b("div.eb_lightbox.active"),d=b.Event("lightboxSave");c.trigger(d),d.isDefaultPrevented()||g(c,!0)}),b(document).keyup(function(a){27==a.keyCode&&h(a)})}(window.EB=window.EB||{},jQuery),function(a,b,c,d,e){"use strict";b.namespace("EventPage"),b.EventPage.OrderView=b.Backbone.View.extend({el:"#order-flow",events:{"click .share-on-facebook":"facebookShareDialog"},initialize:function(a){c.bindAll(this,"showTopLevelErrors","handleSurveyStartOrder","showOrderConfirmation","lockForms","unlockForms","handleInWaitingRoom","facebookShareDialog","createShareParams","handleOrderComplete","showOrderFlowContent"),this.facebookUser=a.facebookUser,this.survey=a.survey,this.ebUser=a.ebUser,this.event=a.event,this.isPreview=a.isPreview,this.isPreview||(this.order=new b.EventPage.OrderModel({eid:a.event.get("eid"),survey:this.survey,affiliateCode:a.affiliateCode,affiliateUser:a.affiliateUser,invite:a.invite},{isWaitingRoomEnabled:a.isWaitingRoomEnabled}),this.order.on("orderComplete",this.handleOrderComplete),this.order.on(b.EventPage.OrderModel.IN_WAITING_ROOM_EVENT,this.handleInWaitingRoom)),this.surveyView=new b.EventPage.BasicSurveyFormView({survey:this.survey}),this.friendsModel=new b.EventPage.FriendsModel({facebookUser:this.facebookUser,event:this.event,enabled:a.friendsGoingEnabled}),this.friendsGoingView=new b.EventPage.FriendsGoingView({friendsModel:this.friendsModel,enabled:a.friendsGoingEnabled}),this.on("error",this.showOrderFlowContent),this.survey.on("invalid",this.unlockForms),this.on("error",this.unlockForms),this.surveyView.on("submit",this.lockForms),this.shareParams=this.createShareParams(),this.survey.on("startOrder",this.handleSurveyStartOrder),this.shareParams=this.createShareParams()},handleInWaitingRoom:function(){this.$el.find("#order-flow-content").addClass("is-hidden"),this.$el.find("#order-flow-waiting-room").removeClass("is-hidden")},showOrderFlowContent:function(){this.$el.find("#order-flow-waiting-room").addClass("is-hidden"),this.$el.find("#order-flow-content").removeClass("is-hidden")},createShareParams:function(){var b=c.reject([this.event.get("longPrettyDate"),this.event.get("shortAddress")],function(b){return""===a.trim(b)}).join(" -- ");return{method:"feed",link:this.event.get("facebookShareURL"),picture:this.event.get("logo"),name:this.event.get("name"),caption:b,description:this.event.get("shortDescription")}},showTopLevelErrors:function(b){var e=this.$el.find("#order-errors");this.trigger("error"),e.html(d.compile(a("#notification-template").html())({messages:c.values(b),type:"alert"})),e.fadeIn(350)},handleSurveyStartOrder:function(){this.isPreview?e.setTimeout(this.showOrderConfirmation,b.EventPage.OrderView.PREVIEW_ORDER_START_DELAY):this.order.doOrder().fail(this.showTopLevelErrors)},handleOrderComplete:function(a){this.facebookUser.options.shouldRecordSocialIdentity=!0,this.facebookUser.checkLoginStatus().done(this.facebookUser.recordSocialIdentity),this.showOrderConfirmation(a)},showOrderConfirmation:function(d){var e,f="string"==typeof this.facebookUser.get("fb_id"),g="preview-order";if("undefined"!=typeof d)try{e=c.reject(d.data.confirmation_url.split("/"),function(a){return""===a}),g=e[e.length-2]}catch(h){throw"Expected response to contain 'data.confirmation_url', and have the confirmation number second to last."}this.renderTemplate("#order_confirmation",{first_name:this.survey.get("first_name"),email:this.survey.get("email"),fbAppId:b.Social.FacebookUserModel.FBInit.appId,avatarPath:this.facebookUser.get("avatar")+"?width=100&height=100",quantity:this.survey.get("quantity"),moreThanOnePurchased:this.survey.get("quantity")>1,fbUserConnected:f,isShareable:this.event.get("isShareable"),confirmationNumber:g}),this.friendsGoingView=new b.EventPage.FriendsGoingView({friendsModel:this.friendsModel,enabled:this.friendsGoingView.enabled}),this.friendsModel.fetch().done(function(b){b.friends.length>0&&a(".facepile-js").css("padding-bottom",0)})},renderTemplate:function(b,c){this.$el.html(d.compile(a(b).html())(c))},lockForms:function(){this.surveyView.disableForm(),this.surveyView.showLoading()},unlockForms:function(){this.surveyView.enableForm(),this.surveyView.hideLoading()},facebookShareDialog:function(a){a.preventDefault(),this.facebookUser.ui(this.shareParams),b.Analytics.recordAction({category:"facebook",name:"streampublish_click_dj_orderconf"})}}),b.EventPage.OrderView.PREVIEW_ORDER_START_DELAY=1e3}(window.jQuery,window.EB,window._,window.Handlebars,window),function(a,b,c){"use strict";b.namespace("EventPage"),b.EventPage.TicketOrderView=b.Backbone.View.extend({el:".js-ticket-registration",events:{submit:"startCheckout","change .ticket_table_select":"updateQuantity"},initialize:function(a){c.bindAll(this,"freeLegacyCheckout","validateForm","updateQuantity","startCheckout","submitForm"),this.ebUser=a.ebUser,this.ebEvent=a.event,this.eid=a.event.get("eid"),this.isPreview=a.isPreview,this.ticketsForm=document.ticketsForm,this.$quantity=this.$el.find('select[id="ticket_table_select"]'),this.updateQuantity()},startCheckout:function(a){a.preventDefault(),this.ticketType=this.$el.find('select[id="ticket_table_select"]').attr("id"),this.ticketQuantity=this.$quantity.val(),this.ticketsForm.has_javascript.value=1,this.freeLegacyCheckout()},freeLegacyCheckout:function(){this.ticketsForm.payment_type.value="free",this.ticketsForm[this.ticketType].value=this.ticketQuantity,this.validateForm()&&this.submitForm()},freeCheckout:function(){var a={eid:this.eid,tickets:[{ticket_type:"9623338",quantity:1,gross:0,attendees:[]}],affiliate_code:"",affiliate_user:"",gross:0},b={beforeSend:function(a){a.setRequestHeader("Content-Type","application/json")}};b.url="/event/order-start/",b.data=JSON.stringify(a),this.ticketsOrder.save(null,b)},isValidQuantity:function(a){var b=!1,c=parseInt(a,10);return 0/0!==c&&(b=c>=this.ticketsForm.min_quantity.value&&c<=this.ticketsForm.max_quantity.value),b},showErrorNotification:function(){alert("Invalid quantity.")},submitForm:function(){this.ticketsForm.submit()},validateForm:function(){var a=!1;if(this.ticketsForm){if(0==this.isValidQuantity(this.ticketQuantity))return this.showErrorNotification(),a;a=!0}return a},updateQuantity:function(){var a=this.$el.find(".js-total-tickets-quantity");a.html(this.$quantity.val())}})}(window.jQuery,window.EB,window._,window.Handlebars,window);var RecaptchaTemplates={};RecaptchaTemplates.VertHtml='<table id="recaptcha_table" class="recaptchatable" > <tr> <td colspan="6" class=\'recaptcha_r1_c1\'></td> </tr> <tr> <td class=\'recaptcha_r2_c1\'></td> <td colspan="4" class=\'recaptcha_image_cell\'><div id="recaptcha_image"></div></td> <td class=\'recaptcha_r2_c2\'></td> </tr> <tr> <td rowspan="6" class=\'recaptcha_r3_c1\'></td> <td colspan="4" class=\'recaptcha_r3_c2\'></td> <td rowspan="6" class=\'recaptcha_r3_c3\'></td> </tr> <tr> <td rowspan="3" class=\'recaptcha_r4_c1\' height="49"> <div class="recaptcha_input_area"> <label for="recaptcha_response_field" class="recaptcha_input_area_text"><span id="recaptcha_instructions_image" class="recaptcha_only_if_image recaptcha_only_if_no_incorrect_sol"></span><span id="recaptcha_instructions_audio" class="recaptcha_only_if_no_incorrect_sol recaptcha_only_if_audio"></span><span id="recaptcha_instructions_error" class="recaptcha_only_if_incorrect_sol"></span></label><br/> <input name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td rowspan="4" class=\'recaptcha_r4_c2\'></td> <td><a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="17" /></a></td> <td rowspan="4" class=\'recaptcha_r4_c4\'></td> </tr> <tr> <td><a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="16" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="16" alt=""/></a></td> </tr> <tr> <td><a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a></td> </tr> <tr> <td class=\'recaptcha_r7_c1\'></td> <td class=\'recaptcha_r8_c1\'></td> </tr> </table> ',RecaptchaTemplates.CleanCss=".recaptchatable td img{display:block}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px;padding:7px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto;text-align:left!important}.recaptchatable #recaptcha_image{margin:auto;border:1px solid #dfdfdf!important}.recaptchatable a img{border:0}.recaptchatable a,.recaptchatable a:hover{outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{border:1px solid #dfdfdf!important;margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{font-size:11pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1em;border:1px solid #dfdfdf!important}.recaptcha_error_text{color:red}",RecaptchaTemplates.CleanHtml='<table id="recaptcha_table" class="recaptchatable"> <tr height="73"> <td class=\'recaptcha_image_cell\' width="302"><center><div id="recaptcha_image"></div></center></td> <td style="padding: 10px 7px 7px 7px;"> <a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="18" alt="" /></a> <a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="15" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="15" alt=""/></a> <a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a> </td> <td style="padding: 18px 7px 18px 7px;"> <img id=\'recaptcha_logo\' alt="" width="71" height="36" /> </td> </tr> <tr> <td style="padding-left: 7px;"> <div class="recaptcha_input_area" style="padding-top: 2px; padding-bottom: 7px;"> <input style="border: 1px solid #3c3c3c; width: 302px;" name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td></td> <td style="padding: 4px 7px 12px 7px;"> <img id="recaptcha_tagline" width="71" height="17" /> </td> </tr> </table> ',RecaptchaTemplates.ContextHtml='<table id="recaptcha_table" class="recaptchatable"> <tr> <td colspan="6" class=\'recaptcha_r1_c1\'></td> </tr> <tr> <td class=\'recaptcha_r2_c1\'></td> <td colspan="4" class=\'recaptcha_image_cell\'><div id="recaptcha_image"></div></td> <td class=\'recaptcha_r2_c2\'></td> </tr> <tr> <td rowspan="6" class=\'recaptcha_r3_c1\'></td> <td colspan="4" class=\'recaptcha_r3_c2\'></td> <td rowspan="6" class=\'recaptcha_r3_c3\'></td> </tr> <tr> <td rowspan="3" class=\'recaptcha_r4_c1\' height="49"> <div class="recaptcha_input_area"> <label for="recaptcha_response_field" class="recaptcha_input_area_text"><span id="recaptcha_instructions_context" class="recaptcha_only_if_image recaptcha_only_if_no_incorrect_sol"></span><span id="recaptcha_instructions_audio" class="recaptcha_only_if_no_incorrect_sol recaptcha_only_if_audio"></span><span id="recaptcha_instructions_error" class="recaptcha_only_if_incorrect_sol"></span></label><br/> <input name="recaptcha_response_field" id="recaptcha_response_field" type="text" /> </div> </td> <td rowspan="4" class=\'recaptcha_r4_c2\'></td> <td><a id=\'recaptcha_reload_btn\'><img id=\'recaptcha_reload\' width="25" height="17" /></a></td> <td rowspan="4" class=\'recaptcha_r4_c4\'></td> </tr> <tr> <td><a id=\'recaptcha_switch_audio_btn\' class="recaptcha_only_if_image"><img id=\'recaptcha_switch_audio\' width="25" height="16" alt="" /></a><a id=\'recaptcha_switch_img_btn\' class="recaptcha_only_if_audio"><img id=\'recaptcha_switch_img\' width="25" height="16" alt=""/></a></td> </tr> <tr> <td><a id=\'recaptcha_whatsthis_btn\'><img id=\'recaptcha_whatsthis\' width="25" height="16" /></a></td> </tr> <tr> <td class=\'recaptcha_r7_c1\'></td> <td class=\'recaptcha_r8_c1\'></td> </tr> </table> ',RecaptchaTemplates.VertCss=".recaptchatable td img{display:block}.recaptchatable .recaptcha_r1_c1{background:url(IMGROOT/sprite.png) 0 -63px no-repeat;width:318px;height:9px}.recaptchatable .recaptcha_r2_c1{background:url(IMGROOT/sprite.png) -18px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r2_c2{background:url(IMGROOT/sprite.png) -27px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r3_c1{background:url(IMGROOT/sprite.png) 0 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r3_c2{background:url(IMGROOT/sprite.png) -18px -57px no-repeat;width:300px;height:6px}.recaptchatable .recaptcha_r3_c3{background:url(IMGROOT/sprite.png) -9px 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r4_c1{background:url(IMGROOT/sprite.png) -43px 0 no-repeat;width:171px;height:49px}.recaptchatable .recaptcha_r4_c2{background:url(IMGROOT/sprite.png) -36px 0 no-repeat;width:7px;height:57px}.recaptchatable .recaptcha_r4_c4{background:url(IMGROOT/sprite.png) -214px 0 no-repeat;width:97px;height:57px}.recaptchatable .recaptcha_r7_c1{background:url(IMGROOT/sprite.png) -43px -49px no-repeat;width:171px;height:8px}.recaptchatable .recaptcha_r8_c1{background:url(IMGROOT/sprite.png) -43px -49px no-repeat;width:25px;height:8px}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px}#recaptcha_area,#recaptcha_table{width:318px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;padding:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;font-family:helvetica,sans-serif;font-size:8pt;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto;text-align:left!important}.recaptchatable #recaptcha_image{margin:auto}.recaptchatable img{border:0!important;margin:0!important;padding:0!important}.recaptchatable a,.recaptchatable a:hover{outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;width:146px!important;height:45px!important;margin-left:20px!important;margin-right:5px!important;margin-top:4px!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important;background:none!important;height:auto!important;width:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{width:145px!important;position:absolute!important;bottom:7px!important;padding:0!important;margin:0!important;font-size:10pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1em}#recaptcha_instructions_error{color:red!important}";var RecaptchaStr_en={visual_challenge:"Get a visual challenge",audio_challenge:"Get an audio challenge",refresh_btn:"Get a new challenge",instructions_visual:"Type the two words:",instructions_context:"Type the words in the boxes:",instructions_audio:"Type what you hear:",help_btn:"Help",play_again:"Play sound again",cant_hear_this:"Download sound as MP3",incorrect_try_again:"Incorrect. Try again."},RecaptchaStr_de={visual_challenge:"Visuelle Aufgabe generieren",audio_challenge:"Audio-Aufgabe generieren",refresh_btn:"Neue Aufgabe generieren",instructions_visual:"Gib die 2 Wrter ein:",instructions_context:"",instructions_audio:"Gib die 8 Ziffern ein:",help_btn:"Hilfe",incorrect_try_again:"Falsch. Nochmals versuchen!"},RecaptchaStr_es={visual_challenge:"Obtn un reto visual",audio_challenge:"Obtn un reto audible",refresh_btn:"Obtn un nuevo reto",instructions_visual:"Escribe las 2 palabras:",instructions_context:"",instructions_audio:"Escribe los 8 nmeros:",help_btn:"Ayuda",incorrect_try_again:"Incorrecto. Otro intento."},RecaptchaStr_fr={visual_challenge:"Dfi visuel",audio_challenge:"Dfi audio",refresh_btn:"Nouveau dfi",instructions_visual:"Entrez les deux mots:",instructions_context:"",instructions_audio:"Entrez les huit chiffres:",help_btn:"Aide",incorrect_try_again:"Incorrect."},RecaptchaStr_nl={visual_challenge:"Test me via een afbeelding",audio_challenge:"Test me via een geluidsfragment",refresh_btn:"Nieuwe uitdaging",instructions_visual:"Typ de twee woorden:",instructions_context:"",instructions_audio:"Typ de acht cijfers:",help_btn:"Help",incorrect_try_again:"Foute invoer."},RecaptchaStr_pt={visual_challenge:"Obter um desafio visual",audio_challenge:"Obter um desafio sonoro",refresh_btn:"Obter um novo desafio",instructions_visual:"Escreva as 2 palavras:",instructions_context:"",instructions_audio:"Escreva os 8 numeros:",help_btn:"Ajuda",incorrect_try_again:"Incorrecto. Tenta outra vez."},RecaptchaStr_ru={visual_challenge:"  ",audio_challenge:"  ",refresh_btn:"  ",instructions_visual:"  :",instructions_context:"",instructions_audio:"  :",help_btn:"",incorrect_try_again:"."},RecaptchaStr_tr={visual_challenge:"Grsel deneme",audio_challenge:"itsel deneme",refresh_btn:"Yeni deneme",instructions_visual:"ki kelimeyi yazn:",instructions_context:"",instructions_audio:"Sekiz numaray yazn:",help_btn:"Yardm (ngilizce)",incorrect_try_again:"Yanl. Bir daha deneyin."},RecaptchaStr_it={visual_challenge:"Modalit visiva",audio_challenge:"Modalit auditiva",refresh_btn:"Chiedi due nuove parole",instructions_visual:"Scrivi le due parole:",instructions_context:"",instructions_audio:"Trascrivi ci che senti:",help_btn:"Aiuto",incorrect_try_again:"Scorretto. Riprova."},RecaptchaLangMap={en:RecaptchaStr_en,de:RecaptchaStr_de,es:RecaptchaStr_es,fr:RecaptchaStr_fr,nl:RecaptchaStr_nl,pt:RecaptchaStr_pt,ru:RecaptchaStr_ru,tr:RecaptchaStr_tr,it:RecaptchaStr_it},RecaptchaStr=RecaptchaStr_en,RecaptchaOptions,RecaptchaDefaultOptions={tabindex:0,theme:"red",callback:null,lang:null,custom_theme_widget:null,custom_translations:null,includeContext:!1},Recaptcha={widget:null,timer_id:-1,style_set:!1,theme:null,type:"image",ajax_verify_cb:null,$:function(a){return"string"==typeof a?document.getElementById(a):a},create:function(a,b,c){Recaptcha.destroy(),b&&(Recaptcha.widget=Recaptcha.$(b)),Recaptcha._init_options(c),Recaptcha._call_challenge(a)},destroy:function(){var a=Recaptcha.$("recaptcha_challenge_field");a&&a.parentNode.removeChild(a),-1!=Recaptcha.timer_id&&clearInterval(Recaptcha.timer_id),Recaptcha.timer_id=-1,(a=Recaptcha.$("recaptcha_image"))&&(a.innerHTML=""),Recaptcha.widget&&("custom"!=Recaptcha.theme?Recaptcha.widget.innerHTML="":Recaptcha.widget.style.display="none",Recaptcha.widget=null)},focus_response_field:function(){var a=Recaptcha.$,a=a("recaptcha_response_field");a.focus()},get_challenge:function(){return"undefined"==typeof RecaptchaState?null:RecaptchaState.challenge},get_response:function(){var a=Recaptcha.$,a=a("recaptcha_response_field");return a?a.value:null},ajax_verify:function(a){Recaptcha.ajax_verify_cb=a,a=Recaptcha._get_api_server()+"/ajaxverify?c="+encodeURIComponent(Recaptcha.get_challenge())+"&response="+encodeURIComponent(Recaptcha.get_response()),Recaptcha._add_script(a)},_ajax_verify_callback:function(a){Recaptcha.ajax_verify_cb(a)},_get_api_server:function(){var a,b=window.location.protocol;return a="undefined"!=typeof _RecaptchaOverrideApiServer?_RecaptchaOverrideApiServer:"www.google.com/recaptcha/api",b+"//"+a},_call_challenge:function(a){a=Recaptcha._get_api_server()+"/challenge?k="+a+"&ajax=1&cachestop="+Math.random(),RecaptchaOptions.lang&&(a+="&lang="+RecaptchaOptions.lang),"undefined"!=typeof RecaptchaOptions.extra_challenge_params&&(a+="&"+RecaptchaOptions.extra_challenge_params),RecaptchaOptions.includeContext&&(a+="&includeContext=1"),Recaptcha._add_script(a)},_add_script:function(a){var b=document.createElement("script");b.type="text/javascript",b.src=a,Recaptcha._get_script_area().appendChild(b)},_get_script_area:function(){var a=document.getElementsByTagName("head");return a=!a||a.length<1?document.body:a[0]},_hash_merge:function(a){var b,c={};for(b in a)for(var d in a[b])c[d]=a[b][d];return"context"==c.theme&&(c.includeContext=!0),c},_init_options:function(a){RecaptchaOptions=Recaptcha._hash_merge([RecaptchaDefaultOptions,a||{}])},challenge_callback:function(){var a=Recaptcha.widget;if(Recaptcha._reset_timer(),RecaptchaStr=Recaptcha._hash_merge([RecaptchaStr_en,RecaptchaLangMap[RecaptchaOptions.lang]||{},RecaptchaOptions.custom_translations||{}]),window.addEventListener&&window.addEventListener("unload",function(){Recaptcha.destroy()},!1),Recaptcha._is_ie()&&window.attachEvent&&window.attachEvent("onbeforeunload",function(){}),navigator.userAgent.indexOf("KHTML")>0){a=document.createElement("iframe"),a.src="about:blank",a.style.height="0px",a.style.width="0px",a.style.visibility="hidden",a.style.border="none";var b=document.createTextNode("This frame prevents back/forward cache problems in Safari.");a.appendChild(b),document.body.appendChild(a)}Recaptcha._finish_widget()},_add_css:function(a){var b=document.createElement("style");b.type="text/css",b.styleSheet?-1!=navigator.appVersion.indexOf("MSIE 5")?document.write("<style type='text/css'>"+a+"</style>"):b.styleSheet.cssText=a:-1!=navigator.appVersion.indexOf("MSIE 5")?document.write("<style type='text/css'>"+a+"</style>"):(a=document.createTextNode(a),b.appendChild(a)),Recaptcha._get_script_area().appendChild(b)},_set_style:function(a){Recaptcha.style_set||(Recaptcha.style_set=!0,Recaptcha._add_css(a+"\n\n.recaptcha_is_showing_audio .recaptcha_only_if_image,.recaptcha_isnot_showing_audio .recaptcha_only_if_audio,.recaptcha_had_incorrect_sol .recaptcha_only_if_no_incorrect_sol,.recaptcha_nothad_incorrect_sol .recaptcha_only_if_incorrect_sol{display:none !important}"))},_init_builtin_theme:function(){var a,b,c=Recaptcha.$,d=RecaptchaStr,e=RecaptchaState,e=e.server;"/"==e[e.length-1]&&(e=e.substring(0,e.length-1));var f=e+"/img/"+Recaptcha.theme;"clean"==Recaptcha.theme?(e=RecaptchaTemplates.CleanCss,a=RecaptchaTemplates.CleanHtml,b="png"):("context"==Recaptcha.theme?(e=RecaptchaTemplates.VertCss,a=RecaptchaTemplates.ContextHtml):(e=RecaptchaTemplates.VertCss,a=RecaptchaTemplates.VertHtml),b="gif"),e=e.replace(/IMGROOT/g,f),Recaptcha._set_style(e),Recaptcha.widget.innerHTML="<div id='recaptcha_area'>"+a+"</div>",c("recaptcha_reload").src=f+"/refresh."+b,c("recaptcha_switch_audio").src=f+"/audio."+b,c("recaptcha_switch_img").src=f+"/text."+b,c("recaptcha_whatsthis").src=f+"/help."+b,"clean"==Recaptcha.theme&&(c("recaptcha_logo").src=f+"/logo."+b,c("recaptcha_tagline").src=f+"/tagline."+b),c("recaptcha_reload").alt=d.refresh_btn,c("recaptcha_switch_audio").alt=d.audio_challenge,c("recaptcha_switch_img").alt=d.visual_challenge,c("recaptcha_whatsthis").alt=d.help_btn,c("recaptcha_reload_btn").href="javascript:Recaptcha.reload ();",c("recaptcha_reload_btn").title=d.refresh_btn,c("recaptcha_switch_audio_btn").href="javascript:Recaptcha.switch_type('audio');",c("recaptcha_switch_audio_btn").title=d.audio_challenge,c("recaptcha_switch_img_btn").href="javascript:Recaptcha.switch_type('image');",c("recaptcha_switch_img_btn").title=d.visual_challenge,c("recaptcha_whatsthis_btn").href=Recaptcha._get_help_link(),c("recaptcha_whatsthis_btn").target="_blank",c("recaptcha_whatsthis_btn").title=d.help_btn,c("recaptcha_whatsthis_btn").onclick=function(){return Recaptcha.showhelp(),!1},c("recaptcha_table").className="recaptchatable recaptcha_theme_"+Recaptcha.theme,c("recaptcha_instructions_image")&&c("recaptcha_instructions_image").appendChild(document.createTextNode(d.instructions_visual)),c("recaptcha_instructions_context")&&c("recaptcha_instructions_context").appendChild(document.createTextNode(d.instructions_context)),c("recaptcha_instructions_audio")&&c("recaptcha_instructions_audio").appendChild(document.createTextNode(d.instructions_audio)),c("recaptcha_instructions_error")&&c("recaptcha_instructions_error").appendChild(document.createTextNode(d.incorrect_try_again))},_finish_widget:function(){var a=Recaptcha.$,b=RecaptchaStr,b=RecaptchaState,c=RecaptchaOptions,d=c.theme;switch(d){case"red":case"white":case"blackglass":case"clean":case"custom":case"context":break;default:d="red"}Recaptcha.theme||(Recaptcha.theme=d),"custom"!=Recaptcha.theme?Recaptcha._init_builtin_theme():Recaptcha._set_style(""),d=document.createElement("span"),d.id="recaptcha_challenge_field_holder",d.style.display="none",a("recaptcha_response_field").parentNode.insertBefore(d,a("recaptcha_response_field")),a("recaptcha_response_field").setAttribute("autocomplete","off"),a("recaptcha_image").style.width="300px",a("recaptcha_image").style.height="57px",Recaptcha.should_focus=!1,Recaptcha._set_challenge(b.challenge,"image"),c.tabindex&&(a("recaptcha_response_field").tabIndex=c.tabindex,"custom"!=Recaptcha.theme)&&(a("recaptcha_whatsthis_btn").tabIndex=c.tabindex,a("recaptcha_switch_img_btn").tabIndex=c.tabindex,a("recaptcha_switch_audio_btn").tabIndex=c.tabindex,a("recaptcha_reload_btn").tabIndex=c.tabindex),Recaptcha.widget&&(Recaptcha.widget.style.display=""),c.callback&&c.callback()},switch_type:function(a){var b=Recaptcha;b.type=a,b.reload("audio"==b.type?"a":"v")},reload:function(a){var b=Recaptcha,c=b.$,c=RecaptchaState;"undefined"==typeof a&&(a="r"),c=c.server+"reload?c="+c.challenge+"&k="+c.site+"&reason="+a+"&type="+b.type,RecaptchaOptions.lang&&(c+="&lang="+RecaptchaOptions.lang),RecaptchaOptions.includeContext&&(c+="&includeContext=1"),"undefined"!=typeof RecaptchaOptions.extra_challenge_params&&(c+="&"+RecaptchaOptions.extra_challenge_params),"audio"==b.type&&(c+=RecaptchaOptions.audio_beta_12_08?"&audio_beta_12_08=1":"&new_audio_default=1"),b.should_focus="t"!=a,b._add_script(c)},finish_reload:function(a,b){RecaptchaState.is_incorrect=!1,Recaptcha._set_challenge(a,b)},_set_challenge:function(a,b){var c=Recaptcha,d=RecaptchaState,e=c.$;if(d.challenge=a,c.type=b,e("recaptcha_challenge_field_holder").innerHTML="<input type='hidden' name='recaptcha_challenge_field' id='recaptcha_challenge_field' value='"+d.challenge+"'/>","audio"==b)e("recaptcha_image").innerHTML=Recaptcha.getAudioCaptchaHtml();else if("image"==b){var f=d.server+"image?c="+d.challenge;e("recaptcha_image").innerHTML="<img style='display:block;' height='57' width='300' src='"+f+"'/>"}Recaptcha._css_toggle("recaptcha_had_incorrect_sol","recaptcha_nothad_incorrect_sol",d.is_incorrect),Recaptcha._css_toggle("recaptcha_is_showing_audio","recaptcha_isnot_showing_audio","audio"==b),c._clear_input(),c.should_focus&&c.focus_response_field(),c._reset_timer()},_reset_timer:function(){var a=RecaptchaState;clearInterval(Recaptcha.timer_id),Recaptcha.timer_id=setInterval("Recaptcha.reload('t');",1e3*(a.timeout-300))},showhelp:function(){window.open(Recaptcha._get_help_link(),"recaptcha_popup","width=460,height=580,location=no,menubar=no,status=no,toolbar=no,scrollbars=yes,resizable=yes")},_clear_input:function(){var a=Recaptcha.$("recaptcha_response_field");a.value=""},_displayerror:function(a){var b=Recaptcha.$;b("recaptcha_image").innerHTML="",b("recaptcha_image").appendChild(document.createTextNode(a))},reloaderror:function(a){Recaptcha._displayerror(a)},_is_ie:function(){return navigator.userAgent.indexOf("MSIE")>0&&!window.opera},_css_toggle:function(a,b,c){var d=Recaptcha.widget;d||(d=document.body);var e=d.className,e=e.replace(RegExp("(^|\\s+)"+a+"(\\s+|$)")," "),e=e.replace(RegExp("(^|\\s+)"+b+"(\\s+|$)")," ");e+=" "+(c?a:b),d.className=e},_get_help_link:function(){var a=RecaptchaState,a="http://www.google.com/recaptcha/help?c="+a.challenge;return RecaptchaOptions.lang&&(a+="&lang="+RecaptchaOptions.lang),a},playAgain:function(){var a=Recaptcha.$;a("recaptcha_image").innerHTML=Recaptcha.getAudioCaptchaHtml()},getAudioCaptchaHtml:function(){var a=Recaptcha,b=RecaptchaState,c=Recaptcha.$,c=b.server+"image?c="+b.challenge;return 0==c.indexOf("https://")&&(c="http://"+c.substring(8)),b=b.server+"/img/audiocaptcha.swf?v2",a=a._is_ie()?'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" id="audiocaptcha" width="0" height="0" codebase="https://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab"><param name="movie" value="'+b+'" /><param name="quality" value="high" /><param name="bgcolor" value="#869ca7" /><param name="allowScriptAccess" value="always" /></object><br/>':'<embed src="'+b+'" quality="high" bgcolor="#869ca7" width="0" height="0" name="audiocaptcha" align="middle" play="true" loop="false" quality="high" allowScriptAccess="always" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/go/getflashplayer"></embed> ',c=(Recaptcha.checkFlashVer()?'<br/><a class="recaptcha_audio_cant_hear_link" href="#" onclick="Recaptcha.playAgain(); return false;">'+RecaptchaStr.play_again+"</a>":"")+'<br/><a class="recaptcha_audio_cant_hear_link" target="_blank" href="'+c+'">'+RecaptchaStr.cant_hear_this+"</a>",a+c
},gethttpwavurl:function(){var a=RecaptchaState;return"audio"==Recaptcha.type?(a=a.server+"image?c="+a.challenge,0==a.indexOf("https://")&&(a="http://"+a.substring(8)),a):""},checkFlashVer:function(){var a=-1!=navigator.appVersion.indexOf("MSIE")?!0:!1,b=-1!=navigator.appVersion.toLowerCase().indexOf("win")?!0:!1,c=-1!=navigator.userAgent.indexOf("Opera")?!0:!1,d=-1;if(null!=navigator.plugins&&navigator.plugins.length>0)(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash 2.0"]?" 2.0":"",a=navigator.plugins["Shockwave Flash"+a].description,a=a.split(" "),a=a[2].split("."),d=a[0]);else if(a&&b&&!c)try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7"),f=e.GetVariable("$version"),d=f.split(" ")[1].split(",")[0]}catch(g){}return d>=9},getlang:function(){return RecaptchaOptions.lang}};/*
 * Note:
 *  ToDo - This lightbox should be converted to a dorsal component (many pages use it).
 * Dependencies:
 *  recaptcha/recaptcha_ajax.js
 *  eb/csrfcookie.js
 */
EB.ContactOrganizerLightbox=function(a,b){var c=!0,d=!1,e="",f="",g="",h="",i="",j=!1,k={formHeader:gettext("Contact Host"),formDisclaimer:gettext("Your message will only be seen by the event organizer."),fieldMessage:""},l={requestRefund:!0,formHeader:gettext("Request Refund"),formDisclaimer:gettext("Only the organizer of this event can issue you a refund. Eventbrite is the self-service online tool that the event organizer used to sell tickets or process registrations to this event."),fieldMessage:gettext("I would like to request a refund for")+" "},m=function(){var b,c=a("#form_contact_organizer").attr("action");return c?c:(d?b="/ajax/request-refund/"+e+"/"+g+"/":(b="/ajax/contact-organizer/"+e+"/",f&&(b+=f+"/")),b)},n=function(b){b.preventDefault();var c="",d=0,f="";!a("#lightbox_contact_send_button").is(".sending_mode")&&o()&&a.ajax({type:"POST",url:m(),data:a("#form_contact_organizer").serialize(),success:function(b){if(a("#lightbox_contact_send_button").removeClass("sending_mode"),b.success)j?(a("#lightbox_contact_buttons_row").hide(),a("#lightbox_contact_main_form").hide(),a("#lightbox_contact_close_row").show()):a("#lightbox_contact").dialog("close"),g=e="",r();else{q(),d=0;for(f in b.errors)d>0&&(c+="<br />"),c+=b.errors[f],a(document.contactForm[f]).addClass("has-form-input-error"),d++;a("#error_messages").html(c),b.errors.captcha&&(a("#error_messages").html(gettext("Please fill out the missing information.")),a("#recaptcha_response_field").addClass("has-form-input-error"),Recaptcha.reload())}},error:function(){a("#lightbox_contact_send_button").removeClass("sending_mode"),j?a.magnificPopup.close():(a("#lightbox_contact").dialog("close"),a("#lightbox_contact_confirmation").dialog("close"))}})},o=function(){var b=document.contactForm,c=!1,d=!1,e=!1,f=0;return b.from_email.value=a.trim(b.from_email.value),a("#form_contact_organizer input").removeClass("has-form-input-error"),a("#form_contact_organizer textarea").removeClass("has-form-input-error"),a("#recaptcha_response_field")&&a("#recaptcha_response_field").removeClass("has-form-input-error"),b.from_name.value||(c=!0,a("#contact_name").addClass("has-form-input-error"),b.from_name.focus()),b.from_name.value.length>64&&(e=!0,f=64,a("#contact_name").addClass("has-form-input-error"),b.from_name.focus()),b.from_email.value||(c=!0,a("#contact_email").addClass("has-form-input-error"),b.from_email.focus()),p(b.from_email.value)||(d=!0,a("#contact_email").addClass("has-form-input-error"),b.from_email.focus()),b.message.value||(c=!0,a("#contact_message").addClass("has-form-input-error"),b.message.focus()),b.message.value.length>1024&&(e=!0,f=1024,a("#contact_message").addClass("has-form-input-error"),b.message.focus()),b.recaptcha_response_field&&(b.recaptcha_response_field.value||a("#container_captcha_privacy").hasClass("is-hidden")||(c=!0,a("#recaptcha_response_field").addClass("has-form-input-error"),b.recaptcha_response_field.focus())),c?(a("#error_messages").html(gettext("Please fill out the missing information.")),!1):d?(a("#error_messages").html(gettext("Please enter a valid email address.")),!1):e?(a("#error_messages").html(gettext("Your input exceeds the max limit of ")+f+"."),!1):(a("#lightbox_contact_send_button").addClass("sending_mode"),a("#lightbox_contact_send_message").addClass("is-hidden"),a("#lightbox_contact_please_wait").removeClass("is-hidden"),a("#error_messages").html(""),!0)},p=function(a){if(window.RegExp){var b=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;return b.test(a)}return a.indexOf("@")>=0?!0:!1},q=function(){a("#error_messages").html(""),a("#contact_name, #contact_email, #contact_message, #recaptcha_response_field").removeClass("has-form-input-error")},r=function(){j?a("#lightbox_contact_confirmation").show():a("#lightbox_contact_confirmation").dialog("open"),t()},s=function(){a("#lightbox_contact_buttons_row").show(),a("#lightbox_contact_main_form").show(),a("#lightbox_contact_close_row").hide(),a("#lightbox_contact_confirmation").hide(),a("#lightbox_contact_send_message").removeClass("is-hidden"),a("#lightbox_contact_please_wait").addClass("is-hidden")},t=function(){a.browser.msie&&"6.0"===a.browser.version&&window.resizeBy(-1,-1)},u=function(a,c){var d={},e=["url","scheme","slash","host","port","path","query","fragment"],f=c?b.getUrlLooseRegex().exec(a):b.getUrlRegex().exec(a);if(null!==f)for(var g=0;g<e.length;g++)d[e[g]]=f[g];return d},v=function(a){var c,d;return c=b.util&&b.util.hasOwnProperty("parseUrl")?b.util.parseUrl(a,!0):u(a,!0),c&&c.host&&(d=c.host.split("."),d&&d.length>1&&""!==d[1])?!0:!1},w=function(a){for(var b=a.split(/\s+/),c=0;c<b.length;c++)if(v(b[c]))return!0;return!1},x=function(){Recaptcha.create("6LfbZr8SAAAAAKlolhfFS6RTWGhnjaGawWtkZkhP","recaptcha_area",{theme:"clean",callback:function(){a("#recaptcha_response_field").css("border","")}})},y=function(b){b.preventDefault(),q();var c=a(b.currentTarget),d=c.attr("data-event-name");e=c.attr("data-organizer-id"),f=c.attr("data-event-id"),g=c.attr("data-order-id"),b.data&&(b.data.eventName=d||"",z(b.data)),x(),a("#container_captcha_privacy").toggleClass("is-hidden",!w(a("#contact_message").val())),j||a("#lightbox_contact").dialog("open"),A(),t()},z=function(b){d=b.requestRefund,a("#lightbox_contact_heading").text(b.formHeader),a("#contact_disclaimer").html(b.formDisclaimer),a("#contact_name").val(h),a("#contact_email").val(i),a("#contact_message").val(b.fieldMessage+b.eventName)},A=function(){a.ajax({type:"POST",url:"/ajax/contact-organizer/open/",data:{is_request_refund:d}})};return{init:function(b){a.fn.jQd&&(a.fn.dialog=jQuery.fn.jQd),j=b.use_mfp||!1,j?(a("#request_refund").on("mfpOpen",function(){var b=new a.Event("click",{data:l,currentTarget:a.magnificPopup.instance.currItem.el[0]});y(b)}),a("#contact_org, .contact_organizer_link").on("mfpOpen",function(){var b=new a.Event("click",{data:k,currentTarget:a.magnificPopup.instance.currItem.el[0]});y(b)}),a("#request_refund, #contact_org, .contact_organizer_link").on("mfpAfterClose",function(){s()})):(a("#lightbox_contact").dialog({width:600,height:"auto",modal:!0,resizable:!1,autoOpen:!1,dialogClass:"dialog_contact"}),a("#lightbox_contact_confirmation").dialog({width:380,height:"auto",modal:!0,resizable:!1,autoOpen:!1,dialogClass:"dialog_contact_confirmation",minHeight:80}),b.manageOrder?(a("#request_refund").bind("click",l,y),a("#contact_org").bind("click",k,y)):b.requestRefund?a(".contact_organizer_link").bind("click",l,y):a().on?a(".contact_organizer_link").on("click",y):a(".contact_organizer_link").live("click",y)),h=b.userName||"",i=b.userEmail||"",a("#lightbox_contact_send_button").live("click",n),a("#lightbox_contact_cancel_button, #lightbox_contact_close_button, #lightbox_confirm_cancel_button").live("click",function(){j?a.magnificPopup.close():(a("#lightbox_contact").dialog("close"),a("#lightbox_contact_confirmation").dialog("close"))}),a("#contact_message").live("keyup",function(){w(this.value)?(c&&x(),c=!1,a("#container_captcha_privacy").toggleClass("is-hidden",!1)):a("#container_captcha_privacy").toggleClass("is-hidden",!0)})}}}(jQuery,EB||{}),"function"==typeof define&&define("eb/contact_organizer_lightbox",function(){return EB.ContactOrganizerLightbox}),/**
 * Helps you check if an email is valid or has typos
 * Depends on handlebars, jquery and eb common
 */
window.EB=window.EB||{},function(a,b){b.namespace("EventRegister"),b.EventRegister.EmailSuggestions={looksLikeAnEmailAddress:function(a){var b=new RegExp("^[a-z0-9-_.]+[a-z]$"),c=a.split("@")[1];return c&&this.hasOneAt(a)&&c.split(".").length>1&&b.test(c.toLowerCase())?!0:!1},damerauLevenshteinOne:function(a,b){var c,d,e,f,g;if(a===b)return!1;if(a.length>b.length&&(c=a,a=b,b=c),f=b.length-a.length,f>1)return!1;for(g=0,d=e=0;d<a.length;d++,e++)if(a[d]!==b[e]){if(g>0)return!1;d+1<a.length&&a[d]==b[e+1]&&a[d+1]==b[e]&&(d++,e++),g++,d-=f}return!0},fixupPart:function(a,b){if(-1!==_.indexOf(b,a))return a;for(var c=0;c<b.length;c++)if(this.damerauLevenshteinOne(a,b[c]))return b[c];return a},fixupDomain:function(a){var b,c,d={"umd.umich":"umd.umich.edu","worldnet.att":"worldnet.att.net","att.com":"att.net","comcast.com":"comcast.net","bellsouth.com":"bellsouth.net","sbcglobal.com":"sbcglobal.net","tmo.blackberry":"tmo.blackberry.net","sprint.blackberry":"sprint.blackberry.net","bbc.com":"bbc.co.uk","schools.nyc":"schools.nyc.gov"},e=["yahoo.com","yahoo.co.uk","yahoo.ca","yahoo.it","yahoo.es","yahoo.fr","yahoo.com.au","hotmail.com","hotmail.co.uk","hotmail.ca","hotmail.it","hotmail.es","hotmail.fr","hotmail.com.au","gmail.com","ymail.com","live.com","live.ca","live.cn","live.co.uk","live.de","live.fr","live.in","live.ru","live.it","live.lt","rocketmail.com","fastmail.fm","comcast.net","rogers.com","sbcglobal.net","teleworm.us","verizon.net","bellsouth.net","shaw.ca","facebook.com","aol.com","mail.com","gmx.net"],f=["biz","com","info","net","org","edu","eu","gov","mil"],g=["co.uk","ac.uk","org.uk","gov.uk","sch.uk","com.au","org.au","edu.au","gov.au","ac.nz","co.nz","org.nz","school.nz","govt.nz","nil.nz","edu.it","gov.it","com.es","org.es","gob.es","edu.es","k12.us"];return 0===a.length?!0:(a=this.stripWWWPrefix(a),a=this.dedupeDots(a),a=this.insertDot(a),a===!0?!0:(b=a.split("."),c=b.pop(),c=this.fixupPart(c,f),c=this.fixupPart(c,g),b.length>1&&(c=b.pop()+"."+c,c=fixupPart(c,g)),a=b.join(".")+"."+c,a=this.fixupPart(a,e),d.hasOwnProperty(a)&&(a=d[a]),/\.rr$/.test(a)&&(a+=".com"),a))},hasOneAt:function(a){var b=a.indexOf("@"),c=a.lastIndexOf("@");return b!==c||-1===b?!1:!0},stripWWWPrefix:function(a){return a.replace(/^www\./,"")},dedupeDots:function(a){return a.replace(/\.\.+/g,".")},insertDot:function(a){return-1!=a.indexOf(".")?a:(/(com|net|org)$/.test(a)?a=a.slice(0,a.length-3)+"."+a.slice(-3):a+=".com",a)},findPossibleCorrections:function(a){var b,c,d,e;return this.hasOneAt(a)?(b=a.split("@"),c=b[0],d=b[1],d=d.toLowerCase(),e=this.fixupDomain(d),d!=e?e===!0?!0:(b[1]=e,b.join("@")):!1):!0}}}(jQuery,EB),this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.custom_select_wrapper=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<div class="',(f=c.parentClass)?f=f.call(b,{hash:{},data:e}):(f=b.parentClass,f=typeof f===h?f.apply(b):f),g+=i(f)+' custom-select-container clrfix">\n</div>\n'}),this.Handlebars.templates.custom_select_internal=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='<span class="custom-select-value">',(f=c.select_value)?f=f.call(b,{hash:{},data:e}):(f=b.select_value,f=typeof f===h?f.apply(b):f),g+=i(f)+'</span>\n<div class="custom-select-arrow"></div>\n'});//==================================================================================
//====   G L O B A L      F I E L D S     F O R    A  L  L             F O R M   ===
//====  event-new.html     /    event-header.html     /  even-footer.html		 ===
//==== Form in relation to  Calendar API                                         ===
//==================================================================================
var GLOBAL_LIMIT_DATE=2037,GLOBAL_DEFAULT_LIMIT_DATE="01/01/2037",GLOBAL_DISPLAY_CALENDAR=!1,GLOBAL_MODE_DATE="",GLOBAL_MAX_INTEGER=1e6,GLOBAL_MAX_QUANTITY=1e4,GLOBAL_RED="DC143C",GLOBAL_BLACK="000000",GLOBAL_DAY_SECOND=86400,GLOBAL_HOUR_SECOND=3600,GLOBAL_MN_SECOND=60,GLOBAL_ID_MESSAGE="",GLOBAL_ID_MESSAGE_SOURCE="",GLOBAL_TIMEOUT_MESSAGE=3e3,GLOBAL_API_KEY_UPPERCASE=!0,GLOBAL_API_KEY_LENGTH=16,GLOBAL_API_KEY_NUMBER=!0,gMonth_names_fr={},gMonth_names_us={},gMonth_days={};gMonth_days["01"]=31,gMonth_days[1]=31,gMonth_days["02"]=28,gMonth_days[2]=28,gMonth_days["03"]=31,gMonth_days[3]=31,gMonth_days["04"]=30,gMonth_days[4]=30,gMonth_days["05"]=31,gMonth_days[5]=31,gMonth_days["06"]=30,gMonth_days[6]=30,gMonth_days["07"]=31,gMonth_days[7]=31,gMonth_days["08"]=31,gMonth_days[8]=31,gMonth_days["09"]=30,gMonth_days[9]=30,gMonth_days[10]=31,gMonth_days[11]=30,gMonth_days[12]=31,gMonth_names_fr["01"]="Janvier",gMonth_names_fr[1]="Janvier",gMonth_names_fr["02"]="Fvrier",gMonth_names_fr[2]="Fvrier",gMonth_names_fr["03"]="Mars",gMonth_names_fr[3]="Mars",gMonth_names_fr["04"]="Avril",gMonth_names_fr[4]="Avril",gMonth_names_fr["05"]="Mai",gMonth_names_fr[5]="Janvier",gMonth_names_fr["06"]="Juin",gMonth_names_fr[6]="Juin",gMonth_names_fr["07"]="Juillet",gMonth_names_fr[7]="Janvier",gMonth_names_fr["08"]="Aot",gMonth_names_fr[8]="Aot",gMonth_names_fr["09"]="Septembre",gMonth_names_fr[9]="Septembre",gMonth_names_fr[10]="Octobre",gMonth_names_fr[11]="Novembre",gMonth_names_fr[12]="Dcembre",gMonth_names_us["01"]="January",gMonth_names_us[1]="January",gMonth_names_us["02"]="February",gMonth_names_us[2]="February",gMonth_names_us["03"]="March",gMonth_names_us[3]="March",gMonth_names_us["04"]="April",gMonth_names_us[4]="April",gMonth_names_us["05"]="May",gMonth_names_us[5]="May",gMonth_names_us["06"]="June",gMonth_names_us[6]="June",gMonth_names_us["07"]="July",gMonth_names_us[7]="July",gMonth_names_us["08"]="August",gMonth_names_us[8]="August",gMonth_names_us["09"]="September",gMonth_names_us[9]="September",gMonth_names_us[10]="October",gMonth_names_us[11]="November",gMonth_names_us[12]="December";var STR_PAD_LEFT=1,STR_PAD_RIGHT=2,STR_PAD_BOTH=3;String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};var escapeHTML=function(){"use strict";var a={'"':"&quot;","&":"&amp;","'":"&#39;","/":"&#47;","<":"&lt;",">":"&gt;"};return function(b){return b.replace(/[\"&'\/<>]/g,function(b){return a[b]})}}();window.allowCheckoutFormSubmit=!0,window.$=window.jQuery,document.onkeydown=function(a){var b=a?a.which?a.which:a.keyCode:event.keyCode,c=a?a.target:event.srcElement,d="select"==c.tagName.toLowerCase()||"text"==c.type||"password"==c.type||"checkbox"==c.type;if(13==b&&d)switch(c.form.name){case"mgform":case"registrationForm":case"reviewForm":case"addressForm":case"ccForm":return a&&a.stopPropagation(),!1}};var maximumLength=150,ajax_running=!1,global_prfefix_sel="show_",global_prefix_send_sel="send_show_",global_prefix_text="_text_area",global_prefix_html="_Html",global_prefix_HeaderFooter="send_",global_sel="",global_send_sel="",global_text="",global_html="",global_HeaderFooter="";/*
 * EB.Risk
 * Requires EB.Analytics
 *
 */
window.EB=window.EB||{},EB.Risk=function(a){return{addCCPasteDetection:function(b){a(b.creditCardField).bind("paste",function(){EB.Analytics.analyticsAction("CCPasteDetectAction",{order_id:b.orderId,source:a(this).attr("data-cc-source")},{})})}}}(window.jQuery),// XXX: Get rid of this!
//
// This is a super old social share file we're still using on old event pages (the share
// buttons under the ticket module). We should be updating events to use our new share
// box component.
function(a,b){"use strict";b.namespace("Social"),b.Social.twitterPopup=function(a){b.simplePopup({url:a.url,name:"tweet_button_popup",width:550,height:450})},b.Social.linkedInPopup=function(a){b.simplePopup({url:a.url,name:"linkedin_popup",width:575,height:450})}}(jQuery,EB,window,window._),/**
 * Requires:
 * - EB
 * - jQuery
 * - Underscore
 * - vendor/spin-1.3.js (for buttonLoader)
 * - vendor/spin-1.3_settings.js (for buttonLoader)
 */
function(a){"use strict";function b(b,c){var d=a("<div>",{"class":"layout-overlay"});return b.each(function(b,c){var d=a(c);"static"===d.css("position")&&d.css("position","relative")}),c&&d.addClass("layout-overlay--visible"),b.append(d),d}function c(a){a.find(".layout-overlay").remove()}function d(a){var b=EB.SpinSettings.large;return a.hasClass("btn--small")&&(b=EB.SpinSettings.small),a.hasClass("btn--medium")&&(b=EB.SpinSettings.medium),new window.Spinner(_.extend({},b,{top:0}))}function e(e,f,g){var h,i,j=a(e),k=a("<span>",{style:"display: inline;"}),l=d(j),m=a(g);return"block"===j.css("display")&&(k=a("<div>")),j.wrap(k),j.addClass("btn--has-spinner"),l.spin(j.get(0)),h=b(j.parent()),i=b(m),f.always(_.bind(c,null,m.add(j.parent()))).always(function(){l.stop(),j.unwrap(),j.removeClass("btn--has-spinner")}),{buttonOverlay:h,sectionOverlay:i,spinner:l}}function f(d,e,f){var g,h=a(d),i=new window.Spinner(_.extend({},EB.SpinSettings.large,{color:"#000000"},f||{}));return i.spin(h.get(0)),g=b(h,!0),e.always(_.bind(c,null,h)).always(function(){i.stop()}),{overlay:g,spinner:i}}EB.namespace("UIComponents"),EB.UIComponents.Loader={createButtonLoader:e,createSectionLoader:f}}(jQuery),/*
 * EB.Facebook
 * Requires EB.Analytics, EB.util
 *
 */
function(a,b,c){if(!a.Facebook||!a.Facebook.ready){var d=!1,e="/ajax/social/disconnect",f="badperms",g="connected",h=[],i=!1,j=!1,k={authResponse:null,status:"unknown"},l="EB.Facebook.hasPerms",m="0",n="1",o={streamPublish:"efbnen",streamPublishAction:"efbnreg",inviteFriends:"efbinvt"},p={scope:"public_profile,email,user_friends",locale:"en_US",internalReferrer:"0",fbVersion:"v2.0"},q=function(a){u.clear(),FB.login(function(){s(a)},{scope:p.scope})},r=function(a){u.clear(),b.ajax({type:"POST",url:e,data:{},cache:!1,dataType:"json",success:function(b){b&&b.success&&FB.logout(a)},error:function(){FB.logout(),"function"==typeof a&&setTimeout(a,250)}})},s=function(a){FB.getLoginStatus(function(c){c&&c.status===g?v({success:function(){"function"==typeof a&&a(c)},failure:function(){c.status=f,"function"==typeof a&&a(c)}}):(u.clear(),"function"==typeof a&&a(c)),b.extend(k,c)})},t=function(){return FB.getUserID()},u={get:function(){return window.localStorage?window.localStorage.getItem(l):null},set:function(a){window.localStorage&&window.localStorage.setItem(l,a)},clear:function(){window.localStorage&&window.localStorage.removeItem(l)}},v=function(a){return u.get()===n?void a.success():void FB.api("/me/permissions",function(b){var d=p.scope.split(/\s*,\s*/);return b&&b.data&&b.data.length?(permissions=c.filter(b.data,function(a){return"granted"===a.status&&c.contains(d,a.permission)}),permissions.length===d.length?(u.set(n),void a.success()):(u.set(m),void a.failure())):(u.set(m),void a.failure())})},w=function(a){return function(c){var d=a.name;return a.pageModule&&(d=a.pageModule+"_"+a.name),c&&(d=d+"_"+c),b.extend({},a,{name:d})}},x=function(a){if(!d)return void q(function(b){b.status===g&&x(a)});{var b=a.event;w({name:"streampublish",category:"facebook",pageModule:a.pageModule})}FB.ui({display:"dialog",method:"share",href:b.base_url+"/?aff="+o.streamPublishAction},function(b){b&&b.post_id?"function"==typeof a.success&&a.success():"function"==typeof a.error&&a.error()})},y=function(a){"function"==typeof a&&(i?a():h.push(a))},z=function(){var a;for(a=0;a<h.length;++a)h[a]();h=[]},A=function(){!function(a,b,c){var d,e=a.getElementsByTagName(b)[0];a.getElementById(c)||(d=a.createElement(b),d.id=c,d.src="//connect.facebook.net/"+p.locale+"/sdk.js",e.parentNode.insertBefore(d,e))}(document,"script","facebook-jssdk")},B=function(a){return i||j?!1:(b.extend(p,a),window.fbAsyncInit&&(p.oldCB=window.fbAsyncInit),window.fbAsyncInit=function(){p.oldCB?p.oldCB():FB.init({appId:p.appId,version:p.fbVersion,oauth:!0,cookie:!0,status:!0,xfbml:!0,channelUrl:"/facebook-sdk"}),FB.Event.subscribe("auth.authResponseChange",function(a){d=a.status===g&&a.authResponse?!0:!1}),FB.Event.subscribe("edge.create",function(a,b){for(var c="like",d=b&&b.dom;d;){if("eb_header"===d.id){c+="hdr";break}d=d.parentElement}}),z(),i=!0},j=!0,void(a.deferSDKLoad||A()))};a.Facebook={init:B,loadFacebookSDK:A,login:q,logout:r,getLoginStatus:s,getFbId:t,ready:y,shareEvent:x,isConnected:function(){return k.status===a.Facebook.FB_STATUS_CONNECTED},isInitialized:function(){return i},FB_STATUS_CONNECTED:g,FB_STATUS_BADPERMS:f,loginStatus:k}}}(window.EB,window.jQuery,window._),"function"==typeof define&&define("eb/social/facebook",function(){"use strict";return EB.Facebook}),/**
 * eb.timing.js: code for timing round trip time from when a user
 * clicks a link to when the onload event fires on the next page.
 */
window.EB=window.EB||{},EB.Timing=function(a){var b,c,d,e=!1,f=function(b){var c={expires:new Date(b+6e5),path:"/",domain:d};a.cookie("eb_timing_t_start",b.toString(),c),a.cookie("eb_timing_referrer",document.URL.replace(/#.*/,""),c)},g=function(){var b={path:"/",domain:d};a.cookie("eb_timing_t_start",null,b),a.cookie("eb_timing_referrer",null,b)},h=function(a,b){var d,e="/timer/?u="+encodeURIComponent(a)+"&t="+encodeURIComponent(b)+"&v="+encodeURIComponent(c);d=new Image,d.src=e};return{init:function(f){b=a("<div/>").html(f.url).text(),c=f.testVariate||"A",d=f.cookieDomain||"eventbrite.com",e||(e=!0,f.skip||(a(window).load(this.done),a(window).bind("beforeunload",this.start)))},start:function(){var a,b=(new Date).getTime();f(b),a=(new Date).getTime(),a-b>50&&g()},done:function(){var c,d,e,f,i=(new Date).getTime();e=a.cookie("eb_timing_referrer"),e="string"==typeof e&&e.replace(/(\?|&)?fb_xd_fragment/,""),f=document.referrer.replace(/#.*/,""),f=f&&f.replace(/(\?|&)?fb_xd_fragment/,""),e!==f||/^http:\/\/www.facebook.com/.exec(e)||(c=parseInt(a.cookie("eb_timing_t_start"),10),isNaN(c)||(d=i-c,h(b,d.toString()),g()))}}}(jQuery,EB),/**
 * eb.timing.js: code for timing round trip time from when a user
 * clicks a link to when the onload event fires on the next page.
 */
window.EB=window.EB||{},EB.Queue=function(a,b){var c=!1,d=null,e=null,f=null,g=null,h=null,i=null,j=null,k=function(){var b=Array(j,d),b=b.join("/")+"/";a.ajax({url:b,type:"GET",error:function(){setTimeout(function(){k()},1e4)},success:function(){setTimeout(function(){k()},1e4)}})},l=function(){var b=(Math.floor(1e3*Math.random()),Array(j,d,e,f,g,h)),b=b.join("/")+"/",c="json";a.browser.msie&&(c="jsonp"),a.ajax({url:b,cache:!1,type:"GET",dataType:c,error:function(){setTimeout(function(){l()},1e4)},success:function(b){if(0==b)setTimeout(function(){l()},1e4);else if(0==b.is_live)setTimeout(function(){l()},1e4);else{var c=jQuery("<div/>").html(i).text(),d=jQuery.parseJSON(c),e=jQuery("<form/>",{method:"POST",action:"",id:"form_resubmit"});for(var f in d)a("<input/>",{type:"hidden",name:f,value:d[f]}).appendTo(e);jQuery("body").append(e),e.submit()}}})};return{init:function(m){c||(c=!0,m.enabled&&(d=m.client_id,j=b.getQueueServer()+"/queue_rpc/renew","renew"==m.mode?(e=m.event_id,f=m.is_live,g=m.allocation_time,h=m.hash_code,i=m.json_form_elements,a(window).ready(l)):(m.mode="ping")&&a(window).ready(k)))}}}(jQuery,EB),/*
 * Functionality related to orderconfirmation page
 * @requires eb/social/facebook.js
 */
EB.orderConf=function(a,b){var c,d=function(b,c){a("#optout_status").text(b),c?a("#optout_status").toggleClass(c,!0):a("#optout_status").removeClass(),a("#optout_status").show(),"error"!=c&&a("#optout_status").fadeOut(3e3)};return{event:{name:"",url:"",image:""},init:function(e){b.orderConf.event=e,a("#attendee_newsletter_optout").change(function(){var b=a(this).attr("data-channel-id"),c=!a(this).is(":checked");c=c?1:0,a.ajax({type:"POST",url:"/newsletters/ajax/optout/",data:{channel_id:b,optout:c,crumb:this.form.crumb.value},cache:!1,context:this,success:function(a){a.success?d(gettext("Your preference has been saved.")):d(gettext("Error.  Your preference has not been saved.  Please contact support for details."),"error")},error:function(){d(gettext("Error.  Your preference has not been saved.  Please contact support for details."),"error")}})}),a(".js-facebook-share").on("click",function(c){b.orderConf.hideLightBoxAndOverlay(),b.orderConf.fbshare(a(c.currentTarget).data("share-click-source"))}),a(".fbinvite_action").click(b.orderConf.invite),a(".lightbox_close").click(function(){b.orderConf.hideLightBoxAndOverlay()}),a("#lightbox").click(function(c){return a(c.target).is("#lightbox")&&"none"!==a("#social_lightbox").css("display")?(b.orderConf.hideLightBoxAndOverlay(),!1):void 0}),b.Facebook.ready(function(){var c=a(".js-ato-facebook-send");c.removeClass("btn--large--loader"),c.on("click",b.orderConf.fbsend)}),b.orderConf.event.social&&require(["eb-styleguide/js/ui_components/modal/modal_view"],function(a){c=new a,c.open({items:{src:"#social-share-lightbox"}})})},invite:function(){return a("#lightbox").fadeIn("slow"),a("#social_lightbox").hide(),a("#lightbox_invite_wrapper").show(),b.Facebook.inviteFriends({event:b.orderConf.event,target:"#lightbox_invite_wrapper .lightbox_content",error:b.orderConf.hideLightBoxAndOverlay}),!1},fbshare:function(c){return a("#lightbox").fadeOut("slow"),b.Facebook.shareEvent({event:b.orderConf.event,success:b.orderConf.hideLightBoxAndOverlay,error:b.orderConf.hideLightBoxAndOverlay,module:c}),!1},fbsend:function(){window.FB.ui({method:"send",link:b.getEBServer()+"/features?ref=eorderconfhoursreferfriend&utm_source=eborderconf&utm_medium=ebsite&utm_content=hoursreferfriend&utm_campaign=atomsg"})},hideLightBoxAndOverlay:function(){c&&c.close(),a("#lightbox, #opaque_overlay").fadeOut("slow"),b.orderConf.hideEmailConfirmation()},showLightBoxAndOverlay:function(){a("#lightbox, #opaque_overlay").show("slow")},showSocialActions:function(){a(".social_loader").fadeOut("slow"),a(".social_action").css("visibility","visible")},hideEmailConfirmation:function(){setTimeout(function(){a("#email_confirmation").slideUp(1e3)},8e3)}}}(jQuery,EB);/*============================================================================*/
var ccTypeToName=new Array,ccTypeError="";ccTypeToName["001"]="visa",ccTypeToName["002"]="mastercard",ccTypeToName["003"]="amex",ccTypeToName["004"]="discover",ccCVVLengthMap={"001":3,"002":3,"003":4,"004":3},/**
 * eb.registration2.js: New code for the event page redisign lives
 * here.  If we choose to refactor old global namespace polluting code
 * from registration.js and register_questionnaire.js, it will also live here.
 *
 * Code in this file must not pollute the global namespace and must
 * coexist with registration.js and register_questionnaire.js
 *
 * Dependencies:
 * eb.common.js: EB.util,
 * eb.contact.js: EB.Contact
 * event_register/email_suggestions.js
 */
window.EB=window.EB||{},EB.Registration=function(a,b){var c=null,d=function(){var c=a(this).closest("form"),d=c.find('input[name="email"]').val();return a.ajax({type:"POST",url:c.attr("action"),data:c.serialize(),success:function(c){c.success?(e(c.data.user),g(c.data.cards,c.data.num_payment_choices),a("#loginError").hide(),a("#loginExpanded").hide(),a("#loggedInEmail").text(d),a("#loggedInAs").show(),b.Analytics.trackEvent({action:"Signin",category:"checkout",label:"success"}),window.emailValidator&&(b.EmailValidation.$emailConfirmation.closest("tr").hide(),b.EmailValidation.$emailConfirmation.val(d),b.EmailValidation.$passwordField.closest("tr").hide())):(a("#loginError").html(c.errors[0]).show(),b.Analytics.trackEvent({action:"Signin",category:"checkout",label:"failure"}))},error:function(){a("#loginError").html("<b>"+gettext("Server error.  Please try again.")+"</b>").show(),b.Analytics.trackEvent({action:"Signin",category:"checkout",label:"failure"})}}),!1},e=function(b){for(var d,e,g=0;g<b.length;g++)d=b[g][0],e=b[g][1],f(d,e),c&&f("attendee_"+c+"_"+d,e);a("#password_create_row").remove(),G()},f=function(b,c){var d=a('input[name="'+b+'"]');return d.length?(d.val()||(d.val(c),d.triggerHandler("change")),void((b.indexOf("website")>-1||b.indexOf("blog")>-1)&&"http://"===d.val()&&(d.val(c),d.triggerHandler("change")))):(d=a('select[name="'+b+'"]'),d.val(c),void d.triggerHandler("change"))},g=function(b,c){var d,e,f=b.length>0,g=c>1;if(f){d=a("#payment_method_select");for(var i=0;i<b.length;i++)e=b[i],d.prepend('<option value="WALLET_'+e.id+'">'+e.card_holder_name+" "+e.card_type+" "+e.card_number+"</option>");d.val(b[0].id)}h(g,f)},h=function(b,c){(b||c&&"True"!=window.feature_flags_divert_cyber)&&a("#payment_methods_fields").show(),c&&"True"!=window.feature_flags_divert_cyber&&(a("#payment_method_fields").show(),a('select[name="payment_method"]').addClass("required"),a("#save_cc_info").attr("checked",null),a("#cc_input_fields, #bill_fields").hide()),(2==arguments.length||1==arguments[2])&&(a("#save_cc_info_fields").show(),a("#cc_stored_disclaimer").hide(),c||a("#save_cc_info").attr("checked","checked")),"function"!=typeof removeBoletoBancarioTaxId||a(".tax_id_review").length||removeBoletoBancarioTaxId()},i=function(){var b=a(this).find(":selected").val();"0"!=b&&(a("#bill_fields").hide(),a("#cc_input_fields").hide(),a(this)[0].remove(0),a(this).val(b),a("#cc_input_fields").find(":text, select, :checkbox").val("").removeAttr("selected").removeAttr("checked"),a("#cc_add_new").show(),a('select[name="payment_method"]').unbind("change").addClass("required"))},j=function(b){var c=a('select[name="payment_method"]'),d=document.createElement("option");return d.text=gettext("New Card"),d.value="0",d.id="cc_new_option",a.browser.msie&&parseInt(a.browser.version,10)<9?c[0].add(d,0):c.prepend(a(d)),c.val("0"),c.removeClass("required"),c.change(i),a("#bill_fields").insertAfter("#cc_input_fields"),a("#bill_fields").show(),a("#cc_add_new").hide(),a("#save_cc_info").attr("checked","checked"),a("#cc_input_fields").show(),b.preventDefault(),!1},k=function(){var b=a('select[name="payment_method"]');return payment_method=b.val(),m(),a("#affirm_installments").hide(),l(gettext("Pay Now")),removeBoletoBancarioTaxId(),removeCouponsDisclaimer(),restoreZipCodeField(),"CREDIT_CARD"===payment_method?(a("#bill_fields").insertAfter("#cc_input_fields"),a("#bill_fields").show(),a("#save_cc_info").attr("checked","checked"),a("#cc_input_fields").show(),a("#use_bill_address_div").show(),a("#sepa_input_fields").hide(),a("#cc_stored_disclaimer").length&&a("#cc_stored_disclaimer").show(),s()):"SOFORT"===payment_method?(a("#bill_fields").insertAfter("#cc_input_fields"),a("#bill_fields").show(),a("#use_bill_address_div").show(),a("#cc_input_fields").hide(),a("#sepa_input_fields").hide(),a("#cc_stored_disclaimer").length&&a("#cc_stored_disclaimer").hide(),s()):"BOLETO_BANCARIO"===payment_method?(a("#bill_fields").insertAfter("#cc_input_fields"),a("#bill_fields").show(),a("#use_bill_address_div").show(),a("#cc_input_fields").hide(),a("#sepa_input_fields").hide(),a("#cc_stored_disclaimer").length&&a("#cc_stored_disclaimer").hide(),requireBoletoBancarioTaxId(),t(),reorderZipCode(),a(".button_checkout a[href]").text(gettext("Reserve now"))):"PAGOFACIL"===payment_method||"RAPIPAGO"===payment_method?(a("#bill_fields").insertAfter("#cc_input_fields"),a("#bill_fields").show(),a("#cc_input_fields").hide(),a("#use_bill_address_div").show(),a("#sepa_input_fields").hide(),a("#cc_stored_disclaimer").length&&a("#cc_stored_disclaimer").hide(),t(),showCouponsDisclaimer(),a(".button_checkout a[href]").text(gettext("Reserve now"))):"SEPA_DIRECT_DEBIT"===payment_method?(a("#cc_input_fields").hide(),a("#save_cc_info_fields").hide(),a("#cc_stored_disclaimer").length&&a("#cc_stored_disclaimer").hide(),a("#use_bill_address_div").hide(),a("#sepa_input_fields").show(),a("#bill_fields").insertAfter("#sepa_input_fields"),a("#bill_fields").show(),s()):r(payment_method)?(a("#work_fields")?a("#bill_fields").hide():a("#bill_fields").show(),a("#cc_input_fields").hide(),a("#sepa_input_fields").hide(),a("#cc_stored_disclaimer").length&&a("#cc_stored_disclaimer").hide(),"INVOICE"===payment_method&&a("#work_fields tr td h3").html(gettext("Invoice Information")),u(payment_method)):"AFFIRM"===payment_method?(a("#cc_input_fields").hide(),a("#affirm_installments").show(),a("#bill_fields").hide(),a(".button_checkout a[href]").attr("href","javascript: payByAffirm();").text(gettext("Continue to Affirm")),l(gettext("Continue to Affirm"))):("IDEAL"===payment_method&&(null!=a("#ship_fields tr:nth-child(2) td:nth-child(2)").html()&&-1!=a("#ship_fields tr:nth-child(2) td:nth-child(2)").html().indexOf(gettext("Billing Address"))&&a("#ship_fields tr:nth-child(2)").hide(),null!=a("#home_fields tr:nth-child(2) td:nth-child(2)").html()&&-1!=a("#home_fields tr:nth-child(2) td:nth-child(2)").html().indexOf(gettext("Billing Address"))&&a("#home_fields tr:nth-child(2)").hide(),null!=a("#work_fields tr:nth-child(2) td:nth-child(2)").html()&&-1!=a("#work_fields tr:nth-child(2) td:nth-child(2)").html().indexOf(gettext("Billing Address"))&&a("#work_fields tr:nth-child(2)").hide()),a("#bill_fields").hide(),a("#cc_input_fields").hide(),a("#save_cc_info").removeAttr("checked"),a("#sepa_input_fields").hide(),a("#cc_stored_disclaimer").length&&a("#cc_stored_disclaimer").hide(),s()),z(),!1},l=function(b){a(".js-tos-pay-now-button-text").text(b)},m=function(){a("#ship_fields tr:nth-child(2)").show(),a("#home_fields tr:nth-child(2)").show(),a("#work_fields tr:nth-child(2)").show()},n=function(){var c=a("input[name='cc_installments']:checked").data("gross");b.Intl.init({currencyFormat:""}),a("#total_amount_due_1").html(b.Intl.formatMoney(c))},o=function(){a("#js_pay_by_cash_instructions").hide(),a("#js_pay_by_check_instructions").hide(),a("#js_pay_by_invoice_instructions").hide()},p=function(){a("#js_tos_cash").hide(),a("#js_tos_check").hide(),a("#js_tos_invoice").hide()},q=function(){o(),p(),a("#js_payment_method_logos").show(),a(".button_checkout a[href]").attr("href","javascript: payByEventbrite();"),a(".button_checkout a[href]").text(gettext("Pay Now"))},r=function(a){return"CASH"===a||"CHECK"===a||"INVOICE"===a},s=function(){a("#js_tos_reserve_now").hide(),q(),a("#js_tos_pay_now").show()},t=function(){a("#js_tos_pay_now").hide(),q(),a("#js_tos_reserve_now").show()},u=function(b){o(),p(),a("#js_payment_method_logos").hide(),a("#js_tos_pay_now").hide(),a("#js_tos_reserve_now").hide(),"CASH"===b?(a("#js_tos_cash").show(),a("#js_pay_by_cash_instructions").show(),a(".button_checkout a[href]").attr("href","javascript: payAtTheDoor();"),a(".button_checkout a[href]").text(gettext("Pay at the door"))):"CHECK"===b?(a("#js_tos_check").show(),a("#js_pay_by_check_instructions").show(),a(".button_checkout a[href]").attr("href","javascript: payByCheck();"),a(".button_checkout a[href]").text(gettext("Pay by check"))):"INVOICE"===b&&(a("#js_tos_invoice").show(),a("#js_pay_by_invoice_instructions").show(),a(".button_checkout a[href]").attr("href","javascript: payByInvoice();"),a(".button_checkout a[href]").text(gettext("Send Invoice")))},v=function(){var b=a('select[name="is_business"]'),c=b.val();"1"===c?(a("#tax_registration_fields").show(),a("#tax_info_fields_business").show(),a("#tax_info_fields_individual").hide(),a("#work_fields").hide(),w()):(a("#tax_registration_fields").hide(),a("#tax_info_fields_business").hide(),a("#tax_info_fields_individual").show(),a("#work_fields").show(),z())},w=function(){var b=a("#tax_registration_id"),c=a("#work_country");return b.val()?(b.val(b.val().trim()),c.val()?void a.ajax({url:"/ajax/tax/validate_id_and_country_exemptions",data:{event_id:window.eid,country:c.val(),tax_id:b.val()},context:this}).success(function(d){d.valid?(b.val().substr(0,2).toUpperCase()!=c.val()&&a("#tax_registration_id").val(c.val()+b.val()),a("#tax_registration_id_failure").hide(),a("#tax_registration_id_info").hide(),d.is_tax_exempt?(a("#tax_country_exemption").show(),y()):(a("#tax_registration_id_success").show(),z())):(a("#tax_country_exemption").hide(),a("#tax_registration_id_success").hide(),a("#tax_registration_id_info").hide(),a("#tax_registration_id_failure").show(),z())}):void alert(gettext("Please select a country first."))):void z()},x=function(){a("#tax_registration_id_success").hide(),a("#tax_registration_id_failure").hide(),a("#tax_country_exemption").hide(),a("#tax_registration_id_info").show()},y=function(){var b="/ticket-summary?eid="+eventId+"&orderid="+bigOrderId+"&exclude_tax=1";a.ajax({url:b,type:"GET",context:this,success:function(b){a("#order_summary_container").html(b),g_orderSummary=a("#order_summary_container_text").html(),a("#total_amount_due_1").html(a("#total_amount_due_0").html())}})},z=function(){var b=a('select[name="payment_method"]').val(),c="/ticket-summary?eid="+eventId+"&orderid="+bigOrderId+"&payment_method="+b;a.ajax({url:c,type:"GET",context:this,success:function(b){a("#order_summary_container").html(b),g_orderSummary=a("#order_summary_container_text").html(),a("#total_amount_due_1").html(a("#total_amount_due_0").html())}})},A=function(b,c){var d=["_zip","_zip_label","_zip_delimiter","_zip_required"],e=b+d.join(", "+b);a(e).toggle(c)},B=function(b,c){a(b+"_zip").length&&(gCountriesNoZipCode[c.toUpperCase()]?A(b,!1):A(b,!0))},C=function(b){$state=a(b+"_state"),$state.length&&($state.show(),$state.addClass("required"),a(b+"_state_span").html("*"))},D=function(b){a(b+"_state").show().val("").removeClass("required"),a(b+"_state_span").html("")},E=function(b,c){var d={us:1,ca:1,gb:1,ie:1,au:1},e=["_state","_state_us","_state_ca","_state_gb","_state_ie","_state_au"],f=b+e.join(", "+b);switch(a(f).hide(),c){case"us":a(b+"_state_label").html(a("#data_event_state").html()),a(b+"_zip_label").html(a("#data_event_zip").html());break;case"ca":a(b+"_state_label").html(a("#data_event_province").html()),a(b+"_zip_label").html(a("#data_event_postalcode").html());break;case"gb":a(b+"_state_label").html(a("#data_event_county").html()),a(b+"_zip_label").html(a("#data_event_postalcode").html());break;case"ie":a(b+"_state_label").html(a("#data_event_county_ireland").html()),a(b+"_zip_label").html(a("#data_event_postalcode").html());break;case"au":a(b+"_state_label").html(a("#data_event_stateterritory").html()),a(b+"_zip_label").html(a("#data_event_postalcode").html());break;default:a(b+"_state_label").html(a("#data_event_stateprovince").html()),a(b+"_zip_label").html(a("#data_event_postalcode").html())}d[c]?(a(b+"_state_"+c).show(),a(b+"_state").addClass("required"),a(b+"_state_span").html("*")):"br"===c&&"#bill"===b?C(b):D(b)},F=function(a){var b="#"+this.name.split("_country")[0],c=this[this.selectedIndex].value;B(b,c),E(b,c.toLowerCase()),w(a)},G=function(){a('select[name$="country"]').each(F)},H=function(a){var b=parseInt(a.tixavail,10);b&&"22"===a.err&&(1===b?a.err="34":b>1&&(a.err="35")),display_error_msg_div(a.err,"tickets","ticket_error_message")},I=function(b){b.err||b.tixavail||(b=a.deparam.querystring()),b.err&&document.getElementById("TicketReg")&&H(b)},J=function(){var b=a(".js-affirm-subtitle"),c=a(".js-affirm-read-more");c.click(function(){b.show()})};return affirmAsLowAs=function(){var b=a("#total_amount_due_0").html(),c=.0548,d=parseInt(a(".js-affirm-subtitle").data("affirm-months"),10);return b&&d?(b=parseFloat(b.replace("$","").replace(",","")),affirmLowerAmount=(b*c+b)/d+.99,{total_amount:b,lower_amount:affirmLowerAmount.toFixed(2)}):!1},{looksLikeAnEmailAddress:function(a){return b.EventRegister.EmailSuggestions.looksLikeAnEmailAddress(a)},fixupEmail:function(a){return b.EventRegister.EmailSuggestions.findPossibleCorrections(a)},emailSuggest:function(c){var d=b.EventRegister.EmailSuggestions.findPossibleCorrections(c.target.value),e=function(){return a(c.target).closest("tr").next("tr").filter(".email_suggest_row").remove(),a(c.target).removeClass("notification_border"),!1},f=function(){return a(c.target).val(d),e(),!1};e(),d&&(a(c.target).addClass("notification_border"),d===!0?a(c.target).closest("tr").after('<tr class="email_suggest_row"><td></td><td></td><td><div class="email_suggest_caret"></div><div class="deprecated-notification2 standard_notification email_suggest_div">'+gettext("Are you sure that's correct?")+"</div></td></tr>"):(a(c.target).closest("tr").after('<tr class="email_suggest_row"><td></td><td></td><td><div class="email_suggest_caret"></div><div class="deprecated-notification2 standard_notification email_suggest_div">'+gettext("Did you mean")+' "<strong>'+d+'</strong>"?  <a href="#" class="accept">'+gettext("Yes")+'</a> - <a href="#" class="reject">'+gettext("No")+"</a></div></td></tr>"),a(c.target).closest("tr").next(".email_suggest_row").find("a.accept").bind("click",f),a(c.target).closest("tr").next(".email_suggest_row").find("a.reject").bind("click",e)))},init:function(e){var f=Boolean(e.hasMultiplePaymentMethods),g=Boolean(e.hasSavedCreditCards);c=e.firstAttendeeId,a(document).ready(function(){var c=Boolean(window.uid),i=a(".js-affirm-min-amount"),l=a(".js-affirm-amount-due");h(f,g,c),g_orderSummary=a("#order_summary_container_text").html(),a("#payment_method_select").live("change",k),a("#cc_add_new").live("click",j),a("#loginForm").bind("submit",d),a('select[name$="country"]').change(F).blur(F),a("#is_business").live("change",v),a("#tax_registration_id").live("blur",w),a("#tax_registration_id").live("focus",x),a("#bill_fields").is(":visible")&&a("#bill_fields").insertAfter("#cc_input_fields"),a("#payment_methods_fields").is(":visible")&&k(),a("#cc_installments_section").is(":visible")&&a("input[name='cc_installments']").live("change",n),a("#affirm_installments").is(":visible")&&J(),a(document).on("DOMSubtreeModified","#order_summary_container",function(){var a=affirmAsLowAs();a&&(i.html("$"+a.lower_amount),l.html("$"+a.total_amount))}),G(),b.ContactOrganizerLightbox.init(e),b.Merchandise.init(),a.browser.msie&&"6.0"===a.browser.version&&a(".contact_organizer_link").unbind("click").die("click");var m=document.createElement("param");m.setAttribute("name","wmode"),m.setAttribute("value","opaque");for(var o=document.getElementsByTagName("object"),p=0;p<o.length;p++){var q=o[p].cloneNode(!0);m=m.cloneNode(!0),q.appendChild(m),o[p].parentNode.replaceChild(q,o[p])}a(".js-tooltip").tooltip(),I(e.qdata)}),"undefined"!=typeof b.EmailValidation&&(window.emailValidator=b.EmailValidation.create()),a(window).load(function(){b.Merchandise.centerImages()})}}}(jQuery,EB),function(a,b,c){"use strict";c.EmailValidation={$emailAddress:a("input[name=email_address]"),$emailConfirmation:a('input[name="confirm_email_address"]'),$passwordField:a("#registrationForm input[name=passwd]"),$emailStatus:a("<i>",{"class":"field-valid-status"}),$emailConfirmationStatus:a("<i>",{"class":"field-valid-status"}),$emailErrorMessage:a("<div>",{"class":"field-error-message"}),$confirmationErrorMessage:a("<div>",{"class":"field-error-message"}),validClasses:"ico-checkmark ico--color-brand-dark-green ico--small",create:function(){var a=Object.create(c.EmailValidation);return a.initialize(),this.$emailAddress.addClass("validated-field"),this.$emailConfirmation.addClass("validated-field"),a},initialize:function(){_.bindAll(this,"handleEmailAddressBlur","handleEmailConfirmationBlur","emailLookupFinished"),this.spinner=new window.Spinner(_.extend(c.SpinSettings.small,{color:"#000"})).spin(),this.initializeTooltips(),this.initializeStatusIcons(),this.initializeErrorMessages(),this.bindHandlers()},bindHandlers:function(){this.$emailAddress.on("blur",this.handleEmailAddressBlur),this.$emailConfirmation.on("blur",this.handleEmailConfirmationBlur)},initializeStatusIcons:function(){this.$emailAddress.after(this.$emailStatus),this.$emailConfirmation.after(this.$emailConfirmationStatus)},initializeErrorMessages:function(){this.$emailAddress.parent().append(this.$emailErrorMessage),this.$emailConfirmation.parent().append(this.$confirmationErrorMessage)},initializeTooltips:function(){this.$emailAddress.tooltip({trigger:"focus",placement:"right",title:window.gettext("Tickets and event info will be sent here")}),this.$passwordField.tooltip({trigger:"focus",placement:"right",title:window.gettext("Create an account to access your orders and for faster checkout next time")})},showSpinner:function(){this.$emailStatus.show().removeClass(this.validClasses),this.spinner.spin(this.$emailStatus.get(0))},hideSpinner:function(){this.spinner.stop()},showEmailInvalid:function(){this.hideSpinner(),this.$emailStatus.removeClass(this.validClasses)},showEmailValid:function(){this.hideSpinner(),this.$emailStatus.addClass(this.validClasses)},showEmailErrorMessage:function(){this.isEmailValid()||this.$emailErrorMessage.text(window.gettext("This email is invalid.")),""===a.trim(this.$emailAddress.val())&&this.$emailErrorMessage.text(window.gettext("You can't leave this empty."))},clearEmailErrorMessage:function(){this.$emailErrorMessage.text("")},showConfirmationInvalid:function(){this.$emailConfirmationStatus.removeClass(this.validClasses)},showConfirmationValid:function(){this.$emailConfirmationStatus.addClass(this.validClasses)},showConfirmationErrorMessage:function(){this.isEmailConfirmationValid()||this.$confirmationErrorMessage.text(window.gettext("Your emails do not match. Please try again.")),""===a.trim(this.$emailConfirmation.val())&&this.$confirmationErrorMessage.text(window.gettext("You can't leave this empty."))},clearConfirmationErrorMessage:function(){this.$confirmationErrorMessage.text("")},isEmailValid:function(){var a=this.$emailAddress.val().trim(),b=c.EventRegister.EmailSuggestions.looksLikeAnEmailAddress(a),d=a.length<=50;return b&&d},isEmailConfirmationValid:function(){return this.$emailConfirmation.val().trim()&&this.$emailAddress.val().trim()===this.$emailConfirmation.val().trim()},emailLookupFinished:function(){this.hideSpinner(),this.clearEmailErrorMessage(),this.isEmailValid()?this.showEmailValid():(this.showEmailInvalid(),this.showEmailErrorMessage())},handleEmailAddressBlur:function(){return this.isEmailValid()?(this.$emailStatus.checkPromise=a.ajax({timeout:3e3,type:"POST",url:"/users/send_activation_email/",data:{email:this.$emailAddress.val()}}),this.showSpinner(),void this.$emailStatus.checkPromise.done(function(b){b.user_exists?a(".js-password-row").hide(200):a(".js-password-row").show(200)}).always(this.emailLookupFinished)):(this.showEmailInvalid(),this.showEmailErrorMessage(),void this.clearConfirmationErrorMessage())},handleEmailConfirmationBlur:function(){this.isEmailValid()&&(this.clearConfirmationErrorMessage(),this.$emailAddress.off("blur",this.handleEmailConfirmationBlur).on("blur",this.handleEmailConfirmationBlur),this.isEmailConfirmationValid()?this.showConfirmationValid():(this.showConfirmationInvalid(),this.showConfirmationErrorMessage()))}}}(jQuery,window.Backbone,EB),EB.Merchandise=function(a,b){var c,d="",e="",f="",g=function(){var b="/ticket-summary?eid="+eventId+"&orderid="+bigOrderId;a.ajax({url:b,type:"GET",context:this,success:function(b){a("#order_summary_container").html(b),g_orderSummary=a("#order_summary_container_text").html(),a("#total_amount_due_1").html(a("#total_amount_due_0").html())}})},h=function(h){h.preventDefault();var i="/ajax/order/"+(orderId||bigOrderId)+"/merchandise/add/";a.ajax({url:i,type:"POST",data:{product:f,option_id:e,quantity:d},context:this,success:function(b){var c=a("#notification_tpl").clone().removeAttr("id");b.success?(c.addClass("success"),g()):c.addClass("error"),c.prependTo("#product_cell").html(b.message).show().delay(1e4).slideUp().queue(function(){a(this).remove()})}}),b.Ui.lightbox.hide(c)},i=function(b){b.preventDefault();var c="/ajax/order/"+(orderId||bigOrderId)+"/merchandise/remove/";confirm(gettext("Are you sure you want to remove this item?"))&&a.ajax({url:c,type:"POST",data:{merchandise:a(b.currentTarget).attr("data-merchandise-id")},context:this,success:function(b){var c=a("#notification_tpl").clone().removeAttr("id");b.success?(c.addClass("success"),g()):c.addClass("error"),c.prependTo("#order_summary_container").html(gettext("Could not remove item.")).show().delay(1e4).slideUp().queue(function(){a(this).remove()})}})},j=function(){a.browser.msie&&"6.0"===a.browser.version&&window.resizeBy(-1,-1)},k=function(b){a(".lightbox_merchandise_price").html(a("option:selected",b).attr("option-price-change")),e=a("option:selected",b).attr("option-id")},l=function(b){d=a("option:selected",b).attr("value")},m=function(d){d.preventDefault();var e=a(d.currentTarget),g=a(".add_merchandise_content",e.parent());f=e.attr("data-product-id"),productTitle=a(".product_tile_name",e).attr("threedots"),l(a(".product_quantity_select",g)),k(a(".product_option_select",g)),c.find(".eb_lightbox_header .product_name").html(productTitle),c.find(".eb_lightbox_content").html(g.html()),b.Ui.lightbox.show(c),a(".product_option_select").change(function(){k(a(this))}),a(".product_quantity_select").change(function(){l(a(this))}),j()},n=function(){a(".product_tile_image img").each(function(){var b=a(this).parent(),c=(b.height()-a(this).height())/2;a(this).css("margin-top",c+"px")})};return{init:function(){c=a("#lightbox_merchandise"),c.bind("lightboxSave",h),a(".add_merchandise_link").on("click",m),a("#page_registration").on("click",".remove_merchandise_item",i),a(".product_tile_name").ThreeDots({max_rows:2})},centerImages:n}}(jQuery,EB||{}),window.EB=window.EB||{},EB.AttDownloader=function(a){"use strict";var b={},c={iphone:/iphone|ipod/i.test(navigator.userAgent),android:/android/i.test(navigator.userAgent)},d={app_store:"http://itunes.apple.com/us/app/eventbrite/id487922291?mt=8",google_play:"https://play.google.com/store/apps/details?id=com.eventbrite.attendee"},e="hideattdownloadheader",f=a("#eb_header_container"),g=a(".notification"),h=function(b){var d=a("#app_download_cta_template"),e=a('<span class="message"></span>');d.removeClass("hidden").addClass("app_download_cta"),c.iphone?e.text(gettext("FREE - On the App Store")):c.android&&e.text(gettext("FREE - On Google Play")),d.find(".cta_content > p").prepend(e),a("#"+b).prepend(d),a(".app_download_cta").live("click",i),a(".cta_close").live("click",j),f&&(f.addClass("att_header_patch"),g.addClass("att_header_patch"))},i=function(){if(b.user_agent=navigator.userAgent,b.click_type="ATT_APP_DOWNLOAD",c.iphone)b.click_url=d.app_store;else{if(!c.android)return!1;b.click_url=d.google_play}a.post("/ajax/click_stream_tracking/",JSON.stringify(b)).complete(function(){window.location.href=b.click_url})},j=function(){return a("#app_download_cta_template").hide(),a.cookie(e,1,{expires:1,path:"/"}),f&&(f.removeClass("att_header_patch"),g.removeClass("att_header_patch")),!1},k=function(){return c.iphone||c.android?c.iphone&&/OS (6|7|8|9|\d\d+)(.*) like Mac OS X/i.test(navigator.userAgent)?!1:a.isEmptyObject(a.cookie(e))?!0:!1:!1};return{init:function(c){return k()?(c.csrf&&a.ajaxSetup({headers:{"X-CSRFToken":c.csrf}}),b=c.atdTracking,c.app_store_link&&(d.app_store=c.app_store_link),c.google_play_link&&(d.google_play=c.google_play_link),void(a.mobile?a("#"+c.pageId).on("pagebeforeshow",function(){h(c.pageId)}):h(c.pageId))):!1}}}(jQuery,EB);